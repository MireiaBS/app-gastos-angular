var AO=Object.defineProperty,RO=Object.defineProperties;var NO=Object.getOwnPropertyDescriptors;var KD=Object.getOwnPropertySymbols,MO=Object.getPrototypeOf,xO=Object.prototype.hasOwnProperty,PO=Object.prototype.propertyIsEnumerable,kO=Reflect.get;var QD=(n,e,t)=>e in n?AO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})xO.call(e,t)&&QD(n,t,e[t]);if(KD)for(var t of KD(e))PO.call(e,t)&&QD(n,t,e[t]);return n},pe=(n,e)=>RO(n,NO(e));var Zr=(n,e,t)=>kO(MO(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function YD(n,e){return Object.is(n,e)}var rt=null,Hl=!1,ql=1,dr=Symbol("SIGNAL");function Ee(n){let e=rt;return rt=n,e}function ZD(){return rt}var mc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kg(n){if(Hl)throw new Error("");if(rt===null)return;rt.consumerOnSignalRead(n);let e=rt.nextProducerIndex++;if(Kl(rt),e<rt.producerNode.length&&rt.producerNode[e]!==n&&gc(rt)){let t=rt.producerNode[e];Wl(t,rt.producerIndexOfThis[e])}rt.producerNode[e]!==n&&(rt.producerNode[e]=n,rt.producerIndexOfThis[e]=gc(rt)?tb(n,rt,e):0),rt.producerLastReadVersion[e]=n.version}function OO(){ql++}function JD(n){if(!(gc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ql)){if(!n.producerMustRecompute(n)&&!Fg(n)){n.dirty=!1,n.lastCleanEpoch=ql;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ql}}function XD(n){if(n.liveConsumerNode===void 0)return;let e=Hl;Hl=!0;try{for(let t of n.liveConsumerNode)t.dirty||FO(t)}finally{Hl=e}}function eb(){return rt?.consumerAllowSignalWrites!==!1}function FO(n){n.dirty=!0,XD(n),n.consumerMarkedDirty?.(n)}function zl(n){return n&&(n.nextProducerIndex=0),Ee(n)}function Og(n,e){if(Ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(gc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Wl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Fg(n){Kl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(JD(t),r!==t.version))return!0}return!1}function Lg(n){if(Kl(n),gc(n))for(let e=0;e<n.producerNode.length;e++)Wl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function tb(n,e,t){if(nb(n),n.liveConsumerNode.length===0&&rb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=tb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Wl(n,e){if(nb(n),n.liveConsumerNode.length===1&&rb(n))for(let r=0;r<n.producerNode.length;r++)Wl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kl(i),i.producerIndexOfThis[r]=e}}function gc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function nb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function rb(n){return n.producerNode!==void 0}function ib(n){let e=Object.create(LO);e.computation=n;let t=()=>{if(JD(e),kg(e),e.value===Gl)throw e.error;return e.value};return t[dr]=e,t}var xg=Symbol("UNSET"),Pg=Symbol("COMPUTING"),Gl=Symbol("ERRORED"),LO=pe(P({},mc),{value:xg,dirty:!0,error:null,equal:YD,producerMustRecompute(n){return n.value===xg||n.value===Pg},producerRecomputeValue(n){if(n.value===Pg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Pg;let t=zl(n),r;try{r=n.computation()}catch(i){r=Gl,n.error=i}finally{Og(n,t)}if(e!==xg&&e!==Gl&&r!==Gl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function VO(){throw new Error}var sb=VO;function ob(){sb()}function ab(n){sb=n}var UO=null;function cb(n){let e=Object.create(lb);e.value=n;let t=()=>(kg(e),e.value);return t[dr]=e,t}function Vg(n,e){eb()||ob(),n.equal(n.value,e)||(n.value=e,jO(n))}function ub(n,e){eb()||ob(),Vg(n,e(n.value))}var lb=pe(P({},mc),{equal:YD,value:void 0});function jO(n){n.version++,OO(),XD(n),UO?.()}function z(n){return typeof n=="function"}function ro(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ql=ro(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(s){e=s instanceof Ql?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{db(s)}catch(o){e=e??[],o instanceof Ql?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ql(e)}}add(e){var t;if(e&&e!==this)if(this.closed)db(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gi(t,e)}remove(e){let{_finalizers:t}=this;t&&Gi(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var Ug=ze.EMPTY;function Yl(n){return n instanceof ze||n&&"closed"in n&&z(n.remove)&&z(n.add)&&z(n.unsubscribe)}function db(n){z(n)?n():n.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var io={setTimeout(n,e,...t){let{delegate:r}=io;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=io;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zl(n){io.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(n);else throw n})}function hr(){}var hb=jg("C",void 0,void 0);function fb(n){return jg("E",void 0,n)}function pb(n){return jg("N",n,void 0)}function jg(n,e,t){return{kind:n,value:e,error:t}}var zi=null;function so(n){if(gn.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=zi;if(zi=null,t)throw r}}else n()}function gb(n){gn.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=n)}var Wi=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yl(e)&&e.add(this)):this.destination=HO}static create(e,t,r){return new oo(e,t,r)}next(e){this.isStopped?$g(pb(e),this):this._next(e)}error(e){this.isStopped?$g(fb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$g(hb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BO=Function.prototype.bind;function Bg(n,e){return BO.call(n,e)}var Hg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Jl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Jl(r)}else Jl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Jl(t)}}},oo=class extends Wi{constructor(e,t,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&gn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bg(e.next,s),error:e.error&&Bg(e.error,s),complete:e.complete&&Bg(e.complete,s)}):i=e}this.destination=new Hg(i)}};function Jl(n){gn.useDeprecatedSynchronousErrorHandling?gb(n):Zl(n)}function $O(n){throw n}function $g(n,e){let{onStoppedNotification:t}=gn;t&&io.setTimeout(()=>t(n,e))}var HO={closed:!0,next:hr,error:$O,complete:hr};var ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(n){return n}function Xl(...n){return qg(n)}function qg(n){return n.length===0?qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=GO(t)?t:new oo(t,r,i);return so(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=mb(r),new r((i,s)=>{let o=new oo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ao](){return this}pipe(...t){return qg(t)(this)}toPromise(t){return t=mb(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mb(n){var e;return(e=n??gn.Promise)!==null&&e!==void 0?e:Promise}function qO(n){return n&&z(n.next)&&z(n.error)&&z(n.complete)}function GO(n){return n&&n instanceof Wi||qO(n)&&Yl(n)}function Gg(n){return z(n?.lift)}function ue(n){return e=>{if(Gg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new zg(n,e,t,r,i)}var zg=class extends Wi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function co(){return ue((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jr=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return co()(this)}};var yb=ro(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ed(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yb}next(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ug:(this.currentObservers=null,s.push(t),new ze(()=>{this.currentObservers=null,Gi(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new ed(e,t),n})(),ed=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ug}};var ft=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wg={now(){return(Wg.delegate||Date).now()},delegate:void 0};var td=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var yc={setInterval(n,e,...t){let{delegate:r}=yc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=yc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var uo=class extends td{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return yc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&yc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var lo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};lo.now=Wg.now;var ho=class extends lo{constructor(e,t=lo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var fo=new ho(uo),Kg=fo;var nd=class extends uo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var rd=class extends ho{};var Qg=new rd(nd);var Nt=new ne(n=>n.complete());function id(n){return n&&z(n.schedule)}function Yg(n){return n[n.length-1]}function sd(n){return z(Yg(n))?n.pop():void 0}function xn(n){return id(Yg(n))?n.pop():void 0}function _b(n,e){return typeof Yg(n)=="number"?n.pop():e}function Zg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ib(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function vb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ki(n){return this instanceof Ki?(this.v=n,this):new Ki(n)}function wb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,f)}}function a(y,w){r[y]&&(i[y]=function(N){return new Promise(function(R,F){s.push([y,N,R,F])>1||c(y,N)})},w&&(i[y]=w(i[y])))}function c(y,w){try{l(r[y](w))}catch(N){g(s[0][3],N)}}function l(y){y.value instanceof Ki?Promise.resolve(y.value.v).then(d,f):g(s[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function g(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Eb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vb=="function"?vb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var po=n=>n&&typeof n.length=="number"&&typeof n!="function";function od(n){return z(n?.then)}function ad(n){return z(n[ao])}function cd(n){return Symbol.asyncIterator&&z(n?.[Symbol.asyncIterator])}function ud(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ld=zO();function dd(n){return z(n?.[ld])}function hd(n){return wb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ki(t.read());if(i)return yield Ki(void 0);yield yield Ki(r)}}finally{t.releaseLock()}})}function fd(n){return z(n?.getReader)}function Se(n){if(n instanceof ne)return n;if(n!=null){if(ad(n))return WO(n);if(po(n))return KO(n);if(od(n))return QO(n);if(cd(n))return Cb(n);if(dd(n))return YO(n);if(fd(n))return ZO(n)}throw ud(n)}function WO(n){return new ne(e=>{let t=n[ao]();if(z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KO(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function QO(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zl)})}function YO(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Cb(n){return new ne(e=>{JO(n,e).catch(t=>e.error(t))})}function ZO(n){return Cb(hd(n))}function JO(n,e){var t,r,i,s;return Ib(this,void 0,void 0,function*(){try{for(t=Eb(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function kt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Xr(n,e=0){return ue((t,r)=>{t.subscribe(le(r,i=>kt(r,n,()=>r.next(i),e),()=>kt(r,n,()=>r.complete(),e),i=>kt(r,n,()=>r.error(i),e)))})}function ei(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Db(n,e){return Se(n).pipe(ei(e),Xr(e))}function bb(n,e){return Se(n).pipe(ei(e),Xr(e))}function Tb(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Sb(n,e){return new ne(t=>{let r;return kt(t,e,()=>{r=n[ld](),kt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function pd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{kt(t,e,()=>{let r=n[Symbol.asyncIterator]();kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ab(n,e){return pd(hd(n),e)}function Rb(n,e){if(n!=null){if(ad(n))return Db(n,e);if(po(n))return Tb(n,e);if(od(n))return bb(n,e);if(cd(n))return pd(n,e);if(dd(n))return Sb(n,e);if(fd(n))return Ab(n,e)}throw ud(n)}function Ae(n,e){return e?Rb(n,e):Se(n)}function Y(...n){let e=xn(n);return Ae(n,e)}function ti(n,e){let t=z(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function Jg(n){return!!n&&(n instanceof ne||z(n.lift)&&z(n.subscribe))}var fr=ro(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Nb(n){return n instanceof Date&&!isNaN(n)}function Z(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:XO}=Array;function e1(n,e){return XO(e)?n(...e):n(e)}function go(n){return Z(e=>e1(n,e))}var{isArray:t1}=Array,{getPrototypeOf:n1,prototype:r1,keys:i1}=Object;function gd(n){if(n.length===1){let e=n[0];if(t1(e))return{args:e,keys:null};if(s1(e)){let t=i1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function s1(n){return n&&typeof n=="object"&&n1(n)===r1}function md(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function _c(...n){let e=xn(n),t=sd(n),{args:r,keys:i}=gd(n);if(r.length===0)return Ae([],e);let s=new ne(o1(r,e,i?o=>md(i,o):qt));return t?s.pipe(go(t)):s}function o1(n,e,t=qt){return r=>{Mb(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Mb(e,()=>{let l=Ae(n[c],e),d=!1;l.subscribe(le(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Mb(n,e,t){n?kt(t,n,e):e()}function xb(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=N=>l<r?w(N):c.push(N),w=N=>{s&&e.next(N),l++;let R=!1;Se(t(N,d++)).subscribe(le(e,F=>{i?.(F),s?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let F=c.shift();o?kt(e,o,()=>w(F)):w(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(le(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Le(n,e,t=1/0){return z(e)?Le((r,i)=>Z((s,o)=>e(r,s,i,o))(Se(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>xb(r,i,n,t)))}function ni(n=1/0){return Le(qt,n)}function Pb(){return ni(1)}function Pn(...n){return Pb()(Ae(n,xn(n)))}function Qi(n){return new ne(e=>{Se(n()).subscribe(e)})}function Xg(...n){let e=sd(n),{args:t,keys:r}=gd(n),i=new ne(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Se(t[d]).subscribe(le(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?md(r,a):a),s.complete())}))}});return e?i.pipe(go(e)):i}var a1=["addListener","removeListener"],c1=["addEventListener","removeEventListener"],u1=["on","off"];function mo(n,e,t,r){if(z(t)&&(r=t,t=void 0),r)return mo(n,e,t).pipe(go(r));let[i,s]=h1(n)?c1.map(o=>a=>n[o](e,a,t)):l1(n)?a1.map(kb(n,e)):d1(n)?u1.map(kb(n,e)):[];if(!i&&po(n))return Le(o=>mo(o,e,t))(Se(n));if(!i)throw new TypeError("Invalid event target");return new ne(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function kb(n,e){return t=>r=>n[t](e,r)}function l1(n){return z(n.addListener)&&z(n.removeListener)}function d1(n){return z(n.on)&&z(n.off)}function h1(n){return z(n.addEventListener)&&z(n.removeEventListener)}function Ob(n=0,e,t=Kg){let r=-1;return e!=null&&(id(e)?t=e:r=e),new ne(i=>{let s=Nb(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function yd(...n){let e=xn(n),t=_b(n,1/0),r=n;return r.length?r.length===1?Se(r[0]):ni(t)(Ae(r,e)):Nt}var Yi=new ne(hr);function ot(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ri(n){return ue((e,t)=>{let r=null,i=!1,s;r=e.subscribe(le(t,void 0,void 0,o=>{s=Se(n(o,ri(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Fb(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(le(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Zi(n,e){return z(e)?Le(n,e,1):Le(n,1)}function Lb(n){return new ne(e=>n.subscribe(e))}var f1={connector:()=>new $e};function _d(n,e=f1){let{connector:t}=e;return ue((r,i)=>{let s=t();Se(n(Lb(s))).subscribe(i),i.add(r.subscribe(s))})}function ii(n){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function it(n){return n<=0?()=>Nt:ue((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vb(){return ue((n,e)=>{n.subscribe(le(e,hr))})}function vc(n){return Z(()=>n)}function em(n,e){return e?t=>Pn(e.pipe(it(1),Vb()),t.pipe(em(n))):Le((t,r)=>Se(n(t,r)).pipe(it(1),vc(t)))}function tm(n,e=fo){let t=Ob(n,e);return em(()=>t)}function vd(n=p1){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function p1(){return new fr}function Ic(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function kn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,s)=>n(i,s,r)):qt,it(1),t?ii(e):vd(()=>new fr))}function yo(n){return n<=0?()=>Nt:ue((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function nm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,s)=>n(i,s,r)):qt,yo(1),t?ii(e):vd(()=>new fr))}function Ub(n,e){let t=z(n)?n:()=>n;return z(e)?_d(e,{connector:t}):r=>new Jr(r,t)}function rm(n){return n?e=>_d(n)(e):e=>Ub(new $e)(e)}function Id(n,e){return ue(Fb(n,e,arguments.length>=2,!0))}function wd(...n){let e=xn(n);return ue((t,r)=>{(e?Pn(n,t,e):Pn(n,t)).subscribe(r)})}function pt(n,e){return ue((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(le(r,c=>{i?.unsubscribe();let l=0,d=s++;Se(n(c,d)).subscribe(i=le(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function im(n){return ue((e,t)=>{Se(n).subscribe(le(t,()=>t.complete(),hr)),!t.closed&&e.subscribe(t)})}function Ye(n,e,t){let r=z(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(le(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):qt}var g1="https://g.co/ng/security#xss",H=class extends Error{constructor(e,t){super(fy(e,t)),this.code=e}};function fy(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Nc(n){return{toString:n}.toString()}var Ed="__parameters__";function m1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function bT(n,e,t){return Nc(()=>{let r=m1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Ed)?c[Ed]:Object.defineProperty(c,Ed,{value:[]})[Ed];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var wc=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function y1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(xt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function jb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var _1=Me({__forward_ref__:Me});function $n(n){return n.__forward_ref__=$n,n.toString=function(){return xt(this())},n}function Mt(n){return TT(n)?n():n}function TT(n){return typeof n=="function"&&n.hasOwnProperty(_1)&&n.__forward_ref__===$n}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function th(n){return Bb(n,AT)||Bb(n,RT)}function ST(n){return th(n)!==null}function Bb(n,e){return n.hasOwnProperty(e)?n[e]:null}function v1(n){let e=n&&(n[AT]||n[RT]);return e||null}function $b(n){return n&&(n.hasOwnProperty(Hb)||n.hasOwnProperty(I1))?n[Hb]:null}var AT=Me({\u0275prov:Me}),Hb=Me({\u0275inj:Me}),RT=Me({ngInjectableDef:Me}),I1=Me({ngInjectorDef:Me}),B=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NT(n){return n&&!!n.\u0275providers}var w1=Me({\u0275cmp:Me}),E1=Me({\u0275dir:Me}),C1=Me({\u0275pipe:Me}),D1=Me({\u0275mod:Me}),Md=Me({\u0275fac:Me}),Cc=Me({__NG_ELEMENT_ID__:Me}),qb=Me({__NG_ENV_ID__:Me});function py(n){return typeof n=="string"?n:n==null?"":String(n)}function b1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():py(n)}function T1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new H(-200,n)}function gy(n,e){throw new H(-201,!1)}var ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ce||{}),vm;function MT(){return vm}function Ot(n){let e=vm;return vm=n,e}function xT(n,e,t){let r=th(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ce.Optional)return null;if(e!==void 0)return e;gy(n,"Injector")}var S1={},Dc=S1,Im="__NG_DI_FLAG__",xd="ngTempTokenPath",A1="ngTokenPath",R1=/\n/gm,N1="\u0275",Gb="__source",Eo;function M1(){return Eo}function si(n){let e=Eo;return Eo=n,e}function x1(n,e=ce.Default){if(Eo===void 0)throw new H(-203,!1);return Eo===null?xT(n,void 0,e):Eo.get(n,e&ce.Optional?null:void 0,e)}function K(n,e=ce.Default){return(MT()||x1)(Mt(n),e)}function O(n,e=ce.Default){return K(n,nh(e))}function nh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function wm(n){let e=[];for(let t=0;t<n.length;t++){let r=Mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ce.Default;for(let o=0;o<r.length;o++){let a=r[o],c=P1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(K(i,s))}else e.push(K(r))}return e}function PT(n,e){return n[Im]=e,n.prototype[Im]=e,n}function P1(n){return n[Im]}function k1(n,e,t,r){let i=n[xd];throw e[Gb]&&i.unshift(e[Gb]),n.message=O1(`
`+n.message,i,t,r),n[A1]=i,n[xd]=null,n}function O1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==N1?n.slice(2):n;let i=xt(e);if(Array.isArray(e))i=e.map(xt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):xt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(R1,`
  `)}`}var We=PT(bT("Optional"),8);var rh=PT(bT("SkipSelf"),4);function es(n,e){let t=n.hasOwnProperty(Md);return t?n[Md]:null}function my(n,e){n.forEach(t=>Array.isArray(t)?my(t,e):e(t))}function kT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function F1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function L1(n,e,t){let r=Mc(n,e);return r>=0?n[r|1]=t:(r=~r,F1(n,r,e,t)),r}function sm(n,e){let t=Mc(n,e);if(t>=0)return n[t|1]}function Mc(n,e){return V1(n,e,1)}function V1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Do={},tn=[],bo=new B(""),OT=new B("",-1),FT=new B(""),kd=class{get(e,t=Dc){if(t===Dc){let r=new Error(`NullInjectorError: No provider for ${xt(e)}!`);throw r.name="NullInjectorError",r}return t}},LT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LT||{}),Ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ln||{}),ci=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ci||{});function U1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Em(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];B1(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function j1(n){return n===3||n===4||n===6}function B1(n){return n.charCodeAt(0)===64}function bc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zb(n,t,i,null,e[++r]):zb(n,t,i,null,null))}}return n}function zb(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var VT="ng-template";function $1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&U1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(yy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function yy(n){return n.type===4&&n.value!==VT}function H1(n,e,t){let r=n.type===4&&!t?VT:n.value;return e===r}function q1(n,e,t){let r=4,i=n.attrs,s=i!==null?W1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!mn(r)&&!mn(c))return!1;if(o&&mn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!H1(n,c,t)||c===""&&e.length===1){if(mn(r))return!1;o=!0}}else if(r&8){if(i===null||!$1(n,i,c,t)){if(mn(r))return!1;o=!0}}else{let l=e[++a],d=G1(c,i,yy(n),t);if(d===-1){if(mn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(mn(r))return!1;o=!0}}}}return mn(r)||o}function mn(n){return(n&1)===0}function G1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return K1(e,n)}function z1(n,e,t=!1){for(let r=0;r<e.length;r++)if(q1(n,e[r],t))return!0;return!1}function W1(n){for(let e=0;e<n.length;e++){let t=n[e];if(j1(t))return e}return n.length}function K1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Wb(n,e){return n?":not("+e.trim()+")":e}function Q1(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!mn(o)&&(e+=Wb(s,i),i=""),r=o,s=s||!mn(r);t++}return i!==""&&(e+=Wb(s,i)),e}function Y1(n){return n.map(Q1).join(",")}function Z1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!mn(i))break;i=s}r++}return{attrs:e,classes:t}}function sn(n){return Nc(()=>{let e=qT(n),t=pe(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ln.Emulated,styles:n.styles||tn,_:null,schemas:n.schemas||null,tView:null,id:""});GT(t);let r=n.dependencies;return t.directiveDefs=Qb(r,!1),t.pipeDefs=Qb(r,!0),t.id=eF(t),t})}function J1(n){return ui(n)||jT(n)}function X1(n){return n!==null}function _r(n){return Nc(()=>({type:n.type,bootstrap:n.bootstrap||tn,declarations:n.declarations||tn,imports:n.imports||tn,exports:n.exports||tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Kb(n,e){if(n==null)return Do;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=ci.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ci.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ke(n){return Nc(()=>{let e=qT(n);return GT(e),e})}function UT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ui(n){return n[w1]||null}function jT(n){return n[E1]||null}function BT(n){return n[C1]||null}function $T(n){let e=ui(n)||jT(n)||BT(n);return e!==null?e.standalone:!1}function HT(n,e){let t=n[D1]||null;if(!t&&e===!0)throw new Error(`Type ${xt(n)} does not have '\u0275mod' property.`);return t}function qT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Do,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||tn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kb(n.inputs,e),outputs:Kb(n.outputs),debugInfo:null}}function GT(n){n.features?.forEach(e=>e(n))}function Qb(n,e){if(!n)return null;let t=e?BT:J1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(X1)}function eF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ft(n){return{\u0275providers:n}}function tF(...n){return{\u0275providers:zT(!0,n),\u0275fromNgModule:!0}}function zT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return my(e,o=>{let a=o;Cm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WT(i,s),t}function WT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_y(i,s=>{e(s,r)})}}function Cm(n,e,t,r){if(n=Mt(n),!n)return!1;let i=null,s=$b(n),o=!s&&ui(n);if(!s&&!o){let c=n.ngModule;if(s=$b(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Cm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{my(s.imports,d=>{Cm(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&WT(l,e)}if(!a){let l=es(i)||(()=>new i);e({provide:i,useFactory:l,deps:tn},i),e({provide:FT,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>K(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;_y(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _y(n,e){for(let t of n)NT(t)&&(t=t.\u0275providers),Array.isArray(t)?_y(t,e):e(t)}var nF=Me({provide:String,useValue:Me});function KT(n){return n!==null&&typeof n=="object"&&nF in n}function rF(n){return!!(n&&n.useExisting)}function iF(n){return!!(n&&n.useFactory)}function To(n){return typeof n=="function"}function sF(n){return!!n.useClass}var ih=new B(""),Td={},oF={},om;function vy(){return om===void 0&&(om=new kd),om}var Gt=class{},Tc=class extends Gt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bm(e,o=>this.processProvider(o)),this.records.set(OT,_o(void 0,this)),i.has("environment")&&this.records.set(Gt,_o(void 0,this));let s=this.records.get(ih);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(FT,tn,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=si(this),r=Ot(void 0),i;try{return e()}finally{si(t),Ot(r)}}get(e,t=Dc,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qb))return e[qb](this);r=nh(r);let i,s=si(this),o=Ot(void 0);try{if(!(r&ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dF(e)&&th(e);l&&this.injectableDefInScope(l)?c=_o(Dm(e),Td):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ce.Self?vy():this.parent;return t=r&ce.Optional&&t===Dc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[xd]=a[xd]||[]).unshift(xt(e)),s)throw a;return k1(a,e,"R3InjectorError",this.source)}else throw a}finally{Ot(o),si(s)}}resolveInjectorInitializers(){let e=Ee(null),t=si(this),r=Ot(void 0),i;try{let s=this.get(bo,tn,ce.Self);for(let o of s)o()}finally{si(t),Ot(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=Mt(e);let t=To(e)?e:Mt(e&&e.provide),r=cF(e);if(!To(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,Td,!0),i.factory=()=>wm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ee(null);try{return t.value===Td&&(t.value=oF,t.value=t.factory()),typeof t.value=="object"&&t.value&&lF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dm(n){let e=th(n),t=e!==null?e.factory:es(n);if(t!==null)return t;if(n instanceof B)throw new H(204,!1);if(n instanceof Function)return aF(n);throw new H(204,!1)}function aF(n){if(n.length>0)throw new H(204,!1);let t=v1(n);return t!==null?()=>t.factory(n):()=>new n}function cF(n){if(KT(n))return _o(void 0,n.useValue);{let e=QT(n);return _o(e,Td)}}function QT(n,e,t){let r;if(To(n)){let i=Mt(n);return es(i)||Dm(i)}else if(KT(n))r=()=>Mt(n.useValue);else if(iF(n))r=()=>n.useFactory(...wm(n.deps||[]));else if(rF(n))r=()=>K(Mt(n.useExisting));else{let i=Mt(n&&(n.useClass||n.provide));if(uF(n))r=()=>new i(...wm(n.deps));else return es(i)||Dm(i)}return r}function _o(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uF(n){return!!n.deps}function lF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dF(n){return typeof n=="function"||typeof n=="object"&&n instanceof B}function bm(n,e){for(let t of n)Array.isArray(t)?bm(t,e):t&&NT(t)?bm(t.\u0275providers,e):e(t)}function Hn(n,e){n instanceof Tc&&n.assertNotDestroyed();let t,r=si(n),i=Ot(void 0);try{return e()}finally{si(r),Ot(i)}}function YT(){return MT()!==void 0||M1()!=null}function hF(n){if(!YT())throw new H(-203,!1)}function fF(n){return typeof n=="function"}var vr=0,he=1,ee=2,Pt=3,yn=4,vn=5,Od=6,Fd=7,_n=8,So=9,pr=10,st=11,Sc=12,Yb=13,Fo=14,Vn=15,Ao=16,vo=17,Ro=18,sh=19,ZT=20,oi=21,am=22,nn=23,Un=25,JT=1;var ts=7,Ld=8,Vd=9,rn=10,Ud=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ud||{});function ai(n){return Array.isArray(n)&&typeof n[JT]=="object"}function Ir(n){return Array.isArray(n)&&n[JT]===!0}function XT(n){return(n.flags&4)!==0}function oh(n){return n.componentOffset>-1}function Iy(n){return(n.flags&1)===1}function li(n){return!!n.template}function Tm(n){return(n[ee]&512)!==0}var Sm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function eS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function cs(){return tS}function tS(n){return n.type.prototype.ngOnChanges&&(n.setInput=gF),pF}cs.ngInherit=!0;function pF(){let n=rS(this),e=n?.current;if(e){let t=n.previous;if(t===Do)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gF(n,e,t,r,i){let s=this.declaredInputs[r],o=rS(n)||mF(n,{previous:Do,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Sm(l&&l.currentValue,t,c===Do),eS(n,e,i,t)}var nS="__ngSimpleChanges__";function rS(n){return n[nS]||null}function mF(n,e){return n[nS]=e}var Zb=null;var On=function(n,e,t){Zb?.(n,e,t)},yF="svg",_F="math";function jn(n){for(;Array.isArray(n);)n=n[vr];return n}function iS(n,e){return jn(e[n])}function on(n,e){return jn(e[n.index])}function sS(n,e){return n.data[e]}function vF(n,e){return n[e]}function fi(n,e){let t=e[n];return ai(t)?t:t[vr]}function wy(n){return(n[ee]&128)===128}function IF(n){return Ir(n[Pt])}function jd(n,e){return e==null?null:n[e]}function oS(n){n[vo]=0}function aS(n){n[ee]&1024||(n[ee]|=1024,wy(n)&&ch(n))}function wF(n,e){for(;n>0;)e=e[Fo],n--;return e}function ah(n){return!!(n[ee]&9216||n[nn]?.dirty)}function Am(n){n[pr].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),ah(n)&&ch(n)}function ch(n){n[pr].changeDetectionScheduler?.notify(0);let e=ns(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!wy(e)));)e=ns(e)}function cS(n,e){if((n[ee]&256)===256)throw new H(911,!1);n[oi]===null&&(n[oi]=[]),n[oi].push(e)}function EF(n,e){if(n[oi]===null)return;let t=n[oi].indexOf(e);t!==-1&&n[oi].splice(t,1)}function ns(n){let e=n[Pt];return Ir(e)?e[Pt]:e}var fe={lFrame:_S(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var uS=!1;function CF(){return fe.lFrame.elementDepthCount}function DF(){fe.lFrame.elementDepthCount++}function bF(){fe.lFrame.elementDepthCount--}function lS(){return fe.bindingsEnabled}function TF(){return fe.skipHydrationRootTNode!==null}function SF(n){return fe.skipHydrationRootTNode===n}function AF(){fe.skipHydrationRootTNode=null}function xe(){return fe.lFrame.lView}function Lt(){return fe.lFrame.tView}function pi(n){return fe.lFrame.contextLView=n,n[_n]}function gi(n){return fe.lFrame.contextLView=null,n}function Vt(){let n=dS();for(;n!==null&&n.type===64;)n=n.parent;return n}function dS(){return fe.lFrame.currentTNode}function RF(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xc(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function hS(){return fe.lFrame.isParent}function NF(){fe.lFrame.isParent=!1}function fS(){return uS}function Jb(n){uS=n}function pS(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MF(n){return fe.lFrame.bindingIndex=n}function uh(){return fe.lFrame.bindingIndex++}function xF(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PF(){return fe.lFrame.inI18n}function kF(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rm(e)}function OF(){return fe.lFrame.currentDirectiveIndex}function Rm(n){fe.lFrame.currentDirectiveIndex=n}function FF(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gS(n){fe.lFrame.currentQueryIndex=n}function LF(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function mS(n,e,t){if(t&ce.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ce.Host);)if(i=LF(s),i===null||(s=s[Fo],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=fe.lFrame=yS();return r.currentTNode=e,r.lView=n,!0}function Ey(n){let e=yS(),t=n[he];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yS(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?_S(n):e}function _S(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vS(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var IS=vS;function Cy(){let n=vS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function VF(n){return(fe.lFrame.contextLView=wF(n,fe.lFrame.contextLView))[_n]}function Lo(){return fe.lFrame.selectedIndex}function rs(n){fe.lFrame.selectedIndex=n}function Dy(){let n=fe.lFrame;return sS(n.tView,n.selectedIndex)}function UF(){return fe.lFrame.currentNamespace}var wS=!0;function by(){return wS}function Ty(n){wS=n}function jF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=tS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Sy(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Sd(n,e,t){ES(n,e,3,t)}function Ad(n,e,t,r){(n[ee]&3)===t&&ES(n,e,t,r)}function cm(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function ES(n,e,t,r){let i=r!==void 0?n[vo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vo]+=65536),(a<s||s==-1)&&(BF(n,t,e,c),n[vo]=(n[vo]&4294901760)+c+2),c++}function Xb(n,e){On(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),On(5,n,e)}}function BF(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ee]>>14<n[vo]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,Xb(a,s)):Xb(a,s)}var Co=-1,is=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function $F(n){return n instanceof is}function HF(n){return(n.flags&8)!==0}function qF(n){return(n.flags&16)!==0}var um={},Nm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=nh(r);let i=this.injector.get(e,um,r);return i!==um||t===um?i:this.parentInjector.get(e,t,r)}};function CS(n){return n!==Co}function Bd(n){return n&32767}function GF(n){return n>>16}function $d(n,e){let t=GF(n),r=e;for(;t>0;)r=r[Fo],t--;return r}var Mm=!0;function Hd(n){let e=Mm;return Mm=n,e}var zF=256,DS=zF-1,bS=5,WF=0,Fn={};function KF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Cc)&&(r=t[Cc]),r==null&&(r=t[Cc]=WF++);let i=r&DS,s=1<<i;e.data[n+(i>>bS)]|=s}function qd(n,e){let t=TS(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,lm(r.data,n),lm(e,null),lm(r.blueprint,null));let i=Ay(n,e),s=n.injectorIndex;if(CS(i)){let o=Bd(i),a=$d(i,e),c=a[he].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function lm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ay(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=MS(i),r===null)return Co;if(t++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function xm(n,e,t){KF(n,e,t)}function SS(n,e,t){if(t&ce.Optional||n!==void 0)return n;gy(e,"NodeInjector")}function AS(n,e,t,r){if(t&ce.Optional&&r===void 0&&(r=null),!(t&(ce.Self|ce.Host))){let i=n[So],s=Ot(void 0);try{return i?i.get(e,r,t&ce.Optional):xT(e,r,t&ce.Optional)}finally{Ot(s)}}return SS(r,e,t)}function RS(n,e,t,r=ce.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ce.Self)){let o=XF(n,e,t,r,Fn);if(o!==Fn)return o}let s=NS(n,e,t,r,Fn);if(s!==Fn)return s}return AS(e,t,r,i)}function NS(n,e,t,r,i){let s=ZF(t);if(typeof s=="function"){if(!mS(e,n,r))return r&ce.Host?SS(i,t,r):AS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ce.Optional))gy(t);else return o}finally{IS()}}else if(typeof s=="number"){let o=null,a=TS(n,e),c=Co,l=r&ce.Host?e[Vn][vn]:null;for((a===-1||r&ce.SkipSelf)&&(c=a===-1?Ay(n,e):e[a+8],c===Co||!tT(r,!1)?a=-1:(o=e[he],a=Bd(c),e=$d(c,e)));a!==-1;){let d=e[he];if(eT(s,a,d.data)){let f=QF(a,e,t,o,r,l);if(f!==Fn)return f}c=e[a+8],c!==Co&&tT(r,e[he].data[a+8]===l)&&eT(s,a,e)?(o=d,a=Bd(c),e=$d(c,e)):a=-1}}return i}function QF(n,e,t,r,i,s){let o=e[he],a=o.data[n+8],c=r==null?oh(a)&&Mm:r!=o&&(a.type&3)!==0,l=i&ce.Host&&s===a,d=YF(a,o,t,c,l);return d!==null?No(e,o,d,a):Fn}function YF(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let w=o[y];if(y<c&&t===w||y>=c&&w.type===t)return y}if(i){let y=o[c];if(y&&li(y)&&y.type===t)return c}return null}function No(n,e,t,r){let i=n[t],s=e.data;if($F(i)){let o=i;o.resolving&&T1(b1(s[t]));let a=Hd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ot(o.injectImpl):null,d=mS(n,r,ce.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&jF(t,s[t],e)}finally{l!==null&&Ot(l),Hd(a),o.resolving=!1,IS()}}return i}function ZF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Cc)?n[Cc]:void 0;return typeof e=="number"?e>=0?e&DS:JF:e}function eT(n,e,t){let r=1<<n;return!!(t[e+(n>>bS)]&r)}function tT(n,e){return!(n&ce.Self)&&!(n&ce.Host&&e)}var Xi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return RS(this._tNode,this._lView,e,nh(r),t)}};function JF(){return new Xi(Vt(),xe())}function wr(n){return Nc(()=>{let e=n.prototype.constructor,t=e[Md]||Pm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Md]||Pm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Pm(n){return TT(n)?()=>{let e=Pm(Mt(n));return e&&e()}:es(n)}function XF(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=NS(s,o,t,r|ce.Self,Fn);if(a!==Fn)return a;let c=s.parent;if(!c){let l=o[ZT];if(l){let d=l.get(t,Fn,r);if(d!==Fn)return d}c=MS(o),o=o[Fo]}s=c}return i}function MS(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function nT(n,e=null,t=null,r){let i=xS(n,e,t,r);return i.resolveInjectorInitializers(),i}function xS(n,e=null,t=null,r,i=new Set){let s=[t||tn,tF(n)];return r=r||(typeof n=="object"?void 0:xt(n)),new Tc(s,e||vy(),r||null,i)}var Ze=class n{static{this.THROW_IF_NOT_FOUND=Dc}static{this.NULL=new kd}static create(e,t){if(Array.isArray(e))return nT({name:""},t,e,"");{let r=e.name??"";return nT({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>K(OT)})}static{this.__NG_ELEMENT_ID__=-1}};var eL=new B("");eL.__NG_ELEMENT_ID__=n=>{let e=Vt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&ce.Optional)return null;throw new H(204,!1)};var tL="ngOriginalError";function dm(n){return n[tL]}var PS=!0,Ry=(()=>{class n{static{this.__NG_ELEMENT_ID__=nL}static{this.__NG_ENV_ID__=t=>t}}return n})(),km=class extends Ry{constructor(e){super(),this._lView=e}onDestroy(e){return cS(this._lView,e),()=>EF(this._lView,e)}};function nL(){return new km(xe())}var Vo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Om=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,YT()&&(this.destroyRef=O(Ry,{optional:!0})??void 0,this.pendingTasks=O(Vo,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=Om;function Gd(...n){}function kS(n){let e,t;function r(){n=Gd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rT(n){return queueMicrotask(()=>n()),()=>{n=Gd}}var Ny="isAngularZone",zd=Ny+"_ID",rL=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=PS}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,oL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,iL,Gd,Gd);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iL={};function My(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){kS(()=>{n.callbackScheduled=!1,Fm(n),n.isCheckStableRunning=!0,My(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Fm(n)}function oL(n){let e=()=>{sL(n)},t=rL++;n._inner=n._inner.fork({name:"angular",properties:{[Ny]:!0,[zd]:t,[zd+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(aL(c))return r.invokeTask(s,o,a,c);try{return iT(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sT(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return iT(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cL(c)&&e(),sT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Fm(n),My(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Fm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sT(n){n._nesting--,My(n)}var Lm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aL(n){return OS(n,"__ignore_ng_zone__")}function cL(n){return OS(n,"__scheduler_tick__")}function OS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var gr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&dm(e);for(;t&&dm(t);)t=dm(t);return t||null}},uL=new B("",{providedIn:"root",factory:()=>{let n=O(_e),e=O(gr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function lL(){return lh(Vt(),xe())}function lh(n,e){return new qn(on(n,e))}var qn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lL}}return n})();function FS(n){return(n.flags&128)===128}var LS=new Map,dL=0;function hL(){return dL++}function fL(n){LS.set(n[sh],n)}function Vm(n){LS.delete(n[sh])}var oT="__ngContext__";function ss(n,e){ai(e)?(n[oT]=e[sh],fL(e)):n[oT]=e}function VS(n){return jS(n[Sc])}function US(n){return jS(n[yn])}function jS(n){for(;n!==null&&!Ir(n);)n=n[yn];return n}var Um;function BS(n){Um=n}function pL(){if(Um!==void 0)return Um;if(typeof document<"u")return document;throw new H(210,!1)}var xy=new B("",{providedIn:"root",factory:()=>gL}),gL="ng",Py=new B(""),zt=new B("",{providedIn:"platform",factory:()=>"unknown"});var ky=new B("",{providedIn:"root",factory:()=>pL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mL="h",yL="b";var _L=()=>null;function Oy(n,e,t=!1){return _L(n,e,t)}var $S=!1,vL=new B("",{providedIn:"root",factory:()=>$S});var jm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${g1})`}};function Fy(n){return n instanceof jm?n.changingThisBreaksApplicationSecurity:n}function HS(n){return n instanceof Function?n():n}function IL(n){return(n??O(Ze)).get(zt)==="browser"}var Bn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Bn||{}),wL;function Ly(n,e){return wL(n,e)}function Io(n,e,t,r,i){if(r!=null){let s,o=!1;Ir(r)?s=r:ai(r)&&(o=!0,r=r[vr]);let a=jn(r);n===0&&t!==null?i==null?KS(e,t,a):Wd(e,t,a,i||null,!0):n===1&&t!==null?Wd(e,t,a,i||null,!0):n===2?FL(e,a,o):n===3&&e.destroyNode(a),s!=null&&VL(e,n,s,t,i)}}function EL(n,e){return n.createText(e)}function CL(n,e,t){n.setValue(e,t)}function qS(n,e,t){return n.createElement(e,t)}function DL(n,e){GS(n,e),e[vr]=null,e[vn]=null}function bL(n,e,t,r,i,s){r[vr]=i,r[vn]=e,dh(n,r,t,1,i,s)}function GS(n,e){e[pr].changeDetectionScheduler?.notify(9),dh(n,e,e[st],2,null,null)}function TL(n){let e=n[Sc];if(!e)return hm(n[he],n);for(;e;){let t=null;if(ai(e))t=e[Sc];else{let r=e[rn];r&&(t=r)}if(!t){for(;e&&!e[yn]&&e!==n;)ai(e)&&hm(e[he],e),e=e[Pt];e===null&&(e=n),ai(e)&&hm(e[he],e),t=e&&e[yn]}e=t}}function SL(n,e,t,r){let i=rn+r,s=t.length;r>0&&(t[i-1][yn]=e),r<s-rn?(e[yn]=t[i],kT(t,rn+r,e)):(t.push(e),e[yn]=null),e[Pt]=t;let o=e[Ao];o!==null&&t!==o&&zS(o,e);let a=e[Ro];a!==null&&a.insertView(n),Am(e),e[ee]|=128}function zS(n,e){let t=n[Vd],r=e[Pt];if(ai(r))n[ee]|=Ud.HasTransplantedViews;else{let i=r[Pt][Vn];e[Vn]!==i&&(n[ee]|=Ud.HasTransplantedViews)}t===null?n[Vd]=[e]:t.push(e)}function Vy(n,e){let t=n[Vd],r=t.indexOf(e);t.splice(r,1)}function Bm(n,e){if(n.length<=rn)return;let t=rn+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&Vy(i,r),e>0&&(n[t-1][yn]=r[yn]);let s=Pd(n,rn+e);DL(r[he],r);let o=s[Ro];o!==null&&o.detachView(s[he]),r[Pt]=null,r[yn]=null,r[ee]&=-129}return r}function WS(n,e){if(!(e[ee]&256)){let t=e[st];t.destroyNode&&dh(n,e,t,3,null,null),TL(e)}}function hm(n,e){if(e[ee]&256)return;let t=Ee(null);try{e[ee]&=-129,e[ee]|=256,e[nn]&&Lg(e[nn]),RL(n,e),AL(n,e),e[he].type===1&&e[st].destroy();let r=e[Ao];if(r!==null&&Ir(e[Pt])){r!==e[Pt]&&Vy(r,e);let i=e[Ro];i!==null&&i.detachView(n)}Vm(e)}finally{Ee(t)}}function AL(n,e){let t=n.cleanup,r=e[Fd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Fd]=null);let i=e[oi];if(i!==null){e[oi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function RL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof is)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];On(4,a,c);try{c.call(a)}finally{On(5,a,c)}}else{On(4,i,s);try{s.call(i)}finally{On(5,i,s)}}}}}function NL(n,e,t){return ML(n,e.parent,t)}function ML(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[vr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ln.None||s===Ln.Emulated)return null}return on(r,t)}}function Wd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KS(n,e,t){n.appendChild(e,t)}function aT(n,e,t,r,i){r!==null?Wd(n,e,t,r,i):KS(n,e,t)}function QS(n,e){return n.parentNode(e)}function xL(n,e){return n.nextSibling(e)}function PL(n,e,t){return OL(n,e,t)}function kL(n,e,t){return n.type&40?on(n,t):null}var OL=kL,cT;function Uy(n,e,t,r){let i=NL(n,r,e),s=e[st],o=r.parent||e[vn],a=PL(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)aT(s,i,t[c],a,!1);else aT(s,i,t,a,!1);cT!==void 0&&cT(s,r,e,t,i)}function Ec(n,e){if(e!==null){let t=e.type;if(t&3)return on(e,n);if(t&4)return $m(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ec(n,r);{let i=n[e.index];return Ir(i)?$m(-1,i):jn(i)}}else{if(t&128)return Ec(n,e.next);if(t&32)return Ly(e,n)()||jn(n[e.index]);{let r=YS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ns(n[Vn]);return Ec(i,r)}else return Ec(n,e.next)}}}return null}function YS(n,e){if(e!==null){let r=n[Vn][vn],i=e.projection;return r.projection[i]}return null}function $m(n,e){let t=rn+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return Ec(r,i)}return e[ts]}function FL(n,e,t){n.removeChild(null,e,t)}function jy(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&ss(jn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)jy(n,e,t.child,r,i,s,!1),Io(e,n,i,a,s);else if(c&32){let l=Ly(t,r),d;for(;d=l();)Io(e,n,i,d,s);Io(e,n,i,a,s)}else c&16?LL(n,e,r,t,i,s):Io(e,n,i,a,s);t=o?t.projectionNext:t.next}}function dh(n,e,t,r,i,s){jy(t,r,n.firstChild,e,i,s,!1)}function LL(n,e,t,r,i,s){let o=t[Vn],c=o[vn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Io(e,n,i,d,s)}else{let l=c,d=o[Pt];FS(r)&&(l.flags|=128),jy(n,e,l,d,i,s,!0)}}function VL(n,e,t,r,i){let s=t[ts],o=jn(t);s!==o&&Io(e,n,r,s,i);for(let a=rn;a<t.length;a++){let c=t[a];dh(c[he],c,n,e,r,s)}}function UL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Bn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Bn.Important),n.setStyle(t,r,i,s))}}function jL(n,e,t){n.setAttribute(e,"style",t)}function ZS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function JS(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Em(n,e,r),i!==null&&ZS(n,e,i),s!==null&&jL(n,e,s)}var us={};function Ve(n=1){XS(Lt(),xe(),Lo()+n,!1)}function XS(n,e,t,r){if(!r)if((e[ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Sd(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Ad(e,s,0,t)}rs(t)}function W(n,e=ce.Default){let t=xe();if(t===null)return K(n,e);let r=Vt();return RS(r,t,Mt(n),e)}function e0(){let n="invalid";throw new Error(n)}function t0(n,e,t,r,i,s){let o=Ee(null);try{let a=null;i&ci.SignalBased&&(a=e[r][dr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ci.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):eS(e,a,r,s)}finally{Ee(o)}}function BL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)rs(~i);else{let s=i,o=t[++r],a=t[++r];kF(o,s);let c=e[s];a(2,c)}}}finally{rs(-1)}}function hh(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[vr]=i,f[ee]=r|4|128|8|64,(l!==null||n&&n[ee]&2048)&&(f[ee]|=2048),oS(f),f[Pt]=f[Fo]=n,f[_n]=t,f[pr]=o||n&&n[pr],f[st]=a||n&&n[st],f[So]=c||n&&n[So]||null,f[vn]=s,f[sh]=hL(),f[Od]=d,f[ZT]=l,f[Vn]=e.type==2?n[Vn]:f,f}function fh(n,e,t,r,i){let s=n.data[e];if(s===null)s=$L(n,e,t,r,i),PF()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=RF();s.injectorIndex=o===null?-1:o.injectorIndex}return xc(s,!0),s}function $L(n,e,t,r,i){let s=dS(),o=hS(),a=o?s:s&&s.parent,c=n.data[e]=WL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function n0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function r0(n,e,t,r,i){let s=Lo(),o=r&2;try{rs(-1),o&&e.length>Un&&XS(n,e,Un,!1),On(o?2:0,i),t(r,i)}finally{rs(s),On(o?3:1,i)}}function i0(n,e,t){if(XT(e)){let r=Ee(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ee(r)}}}function s0(n,e,t){lS()&&(XL(n,e,t,on(t,e)),(t.flags&64)===64&&d0(n,e,t))}function o0(n,e,t=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function a0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=By(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function By(n,e,t,r,i,s,o,a,c,l,d){let f=Un+r,g=f+i,y=HL(f,g),w=typeof l=="function"?l():l;return y[he]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function HL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:us);return t}function qL(n,e,t,r){let s=r.get(vL,$S)||t===Ln.ShadowDom,o=n.selectRootElement(e,s);return GL(o),o}function GL(n){zL(n)}var zL=()=>null;function WL(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return TF()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ci.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?lT(r,t,l,a,c):lT(r,t,l,a)}return r}function lT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function KL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,y=g?g.inputs:null,w=g?g.outputs:null;c=uT(0,f.inputs,d,c,y),l=uT(1,f.outputs,d,l,w);let N=c!==null&&o!==null&&!yy(e)?lV(c,d,o):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function c0(n,e,t,r,i,s,o,a){let c=on(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?($y(n,t,d,r,i),oh(e)&&YL(t,e.index)):e.type&3?(r=QL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function YL(n,e){let t=fi(e,n);t[ee]&16||(t[ee]|=64)}function u0(n,e,t,r){if(lS()){let i=r===null?null:{"":-1},s=tV(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&l0(n,e,t,o,i,a),i&&nV(t,r,i)}t.mergedAttrs=bc(t.mergedAttrs,t.attrs)}function l0(n,e,t,r,i,s){for(let l=0;l<r.length;l++)xm(qd(t,e),n,r[l].type);iV(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=n0(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=bc(t.mergedAttrs,d.hostAttrs),sV(n,t,e,c,d),rV(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KL(n,t,s)}function ZL(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;JL(o)!=a&&o.push(a),o.push(t,r,s)}}function JL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XL(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;oh(t)&&oV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qd(t,e),ss(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=No(e,n,a,t);if(ss(l,e),o!==null&&uV(e,a-i,l,c,t,o),li(c)){let d=fi(t.index,e);d[_n]=No(e,n,a,t)}}}function d0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=OF();try{rs(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Rm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eV(c,l)}}finally{rs(-1),Rm(o)}}function eV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tV(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(z1(e,o.selectors,!1))if(r||(r=[]),li(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Hm(n,e,c)}else r.unshift(o),Hm(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Hm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nV(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function rV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;li(e)&&(t[""]=n)}}function iV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sV(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=es(i.type,!0)),o=new is(s,li(i),W);n.blueprint[r]=o,t[r]=o,ZL(n,e,r,n0(n,t,i.hostVars,us),i)}function oV(n,e,t){let r=on(e,n),i=a0(t),s=n[pr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=ph(n,hh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function aV(n,e,t,r,i,s){let o=on(n,e);cV(e[st],o,s,n.value,t,r,i)}function cV(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?py(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function uV(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];t0(r,t,c,l,d,f)}}function lV(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function h0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function f0(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];gS(s),a.contentQueries(2,e[o],o)}}}finally{Ee(r)}}}function ph(n,e){return n[Sc]?n[Yb][yn]=e:n[Sc]=e,n[Yb]=e,e}function qm(n,e,t){gS(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function dV(n){return n[Fd]??=[]}function hV(n){return n.cleanup??=[]}function p0(n,e){let t=n[So],r=t?t.get(gr,null):null;r&&r.handleError(e)}function $y(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];t0(d,l,r,a,c,i)}}function fV(n,e,t){let r=iS(e,n);CL(n[st],r,t)}function pV(n,e){let t=fi(e,n),r=t[he];gV(r,t);let i=t[vr];i!==null&&t[Od]===null&&(t[Od]=Oy(i,t[So])),Hy(r,t,t[_n])}function gV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hy(n,e,t){Ey(e);try{let r=n.viewQuery;r!==null&&qm(1,r,t);let i=n.template;i!==null&&r0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ro]?.finishViewCreation(n),n.staticContentQueries&&f0(n,e),n.staticViewQueries&&qm(2,n.viewQuery,t);let s=n.components;s!==null&&mV(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Cy()}}function mV(n,e){for(let t=0;t<e.length;t++)pV(n,e[t])}function yV(n,e,t,r){let i=Ee(null);try{let s=e.tView,a=n[ee]&4096?4096:16,c=hh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ao]=l;let d=n[Ro];return d!==null&&(c[Ro]=d.createEmbeddedView(s)),Hy(s,c,t),c}finally{Ee(i)}}function dT(n,e){return!e||e.firstChild===null||FS(n)}function _V(n,e,t,r=!0){let i=e[he];if(SL(i,e,n,t),r){let o=$m(t,n),a=e[st],c=QS(a,n[ts]);c!==null&&bL(i,n[vn],a,e,c,o)}let s=e[Od];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Kd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(jn(s)),Ir(s)&&vV(s,r);let o=t.type;if(o&8)Kd(n,e,t.child,r);else if(o&32){let a=Ly(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=YS(e,t);if(Array.isArray(a))r.push(...a);else{let c=ns(e[Vn]);Kd(c[he],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vV(n,e){for(let t=rn;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Kd(r[he],r,i,e)}n[ts]!==n[vr]&&e.push(n[ts])}var g0=[];function IV(n){return n[nn]??wV(n)}function wV(n){let e=g0.pop()??Object.create(CV);return e.lView=n,e}function EV(n){n.lView[nn]!==n&&(n.lView=null,g0.push(n))}var CV=pe(P({},mc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ch(n.lView)},consumerOnSignalRead(){this.lView[nn]=this}});function DV(n){let e=n[nn]??Object.create(bV);return e.lView=n,e}var bV=pe(P({},mc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ns(n.lView);for(;e&&!m0(e[he]);)e=ns(e);e&&aS(e)},consumerOnSignalRead(){this.lView[nn]=this}});function m0(n){return n.type!==2}var TV=100;function y0(n,e=!0,t=0){let r=n[pr],i=r.rendererFactory,s=!1;s||i.begin?.();try{SV(n,t)}catch(o){throw e&&p0(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function SV(n,e){let t=fS();try{Jb(!0),Gm(n,e);let r=0;for(;ah(n);){if(r===TV)throw new H(103,!1);r++,Gm(n,1)}}finally{Jb(t)}}function AV(n,e,t,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[pr].inlineEffectRunner?.flush(),Ey(e);let a=!0,c=null,l=null;s||(m0(n)?(l=IV(e),c=zl(l)):ZD()===null?(a=!1,l=DV(e),c=zl(l)):e[nn]&&(Lg(e[nn]),e[nn]=null));try{oS(e),MF(n.bindingStartIndex),t!==null&&r0(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let y=n.preOrderCheckHooks;y!==null&&Sd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Ad(e,y,0,null),cm(e,0)}if(o||RV(e),_0(e,0),n.contentQueries!==null&&f0(n,e),!s)if(d){let y=n.contentCheckHooks;y!==null&&Sd(e,y)}else{let y=n.contentHooks;y!==null&&Ad(e,y,1),cm(e,1)}BL(n,e);let f=n.components;f!==null&&I0(e,f,0);let g=n.viewQuery;if(g!==null&&qm(2,g,r),!s)if(d){let y=n.viewCheckHooks;y!==null&&Sd(e,y)}else{let y=n.viewHooks;y!==null&&Ad(e,y,2),cm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[am]){for(let y of e[am])y();e[am]=null}s||(e[ee]&=-73)}catch(d){throw s||ch(e),d}finally{l!==null&&(Og(l,c),a&&EV(l)),Cy()}}function _0(n,e){for(let t=VS(n);t!==null;t=US(t))for(let r=rn;r<t.length;r++){let i=t[r];v0(i,e)}}function RV(n){for(let e=VS(n);e!==null;e=US(e)){if(!(e[ee]&Ud.HasTransplantedViews))continue;let t=e[Vd];for(let r=0;r<t.length;r++){let i=t[r];aS(i)}}}function NV(n,e,t){let r=fi(e,n);v0(r,t)}function v0(n,e){wy(n)&&Gm(n,e)}function Gm(n,e){let r=n[he],i=n[ee],s=n[nn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Fg(s)),o||=!1,s&&(s.dirty=!1),n[ee]&=-9217,o)AV(r,n,r.template,n[_n]);else if(i&8192){_0(n,1);let a=r.components;a!==null&&I0(n,a,1)}}function I0(n,e,t){for(let r=0;r<e.length;r++)NV(n,e[r],t)}function qy(n,e){let t=fS()?64:1088;for(n[pr].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=ns(n);if(Tm(n)&&!r)return n;n=r}return null}var os=class{get rootNodes(){let e=this._lView,t=e[he];return Kd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(Ir(e)){let t=e[Ld],r=t?t.indexOf(this):-1;r>-1&&(Bm(e,r),Pd(t,r))}this._attachedToViewContainer=!1}WS(this._lView[he],this._lView)}onDestroy(e){cS(this._lView,e)}markForCheck(){qy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Am(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,y0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Tm(this._lView),t=this._lView[Ao];t!==null&&!e&&Vy(t,this._lView),GS(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=Tm(this._lView),r=this._lView[Ao];r!==null&&!t&&zS(r,this._lView),Am(this._lView)}},gh=(()=>{class n{static{this.__NG_ELEMENT_ID__=PV}}return n})(),MV=gh,xV=class extends MV{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new os(i)}};function PV(){return kV(Vt(),xe())}function kV(n,e){return n.type&4?new xV(e,n,lh(n,e)):null}var LZ=new RegExp(`^(\\d+)*(${yL}|${mL})*(.*)`);var OV=()=>null;function hT(n,e){return OV(n,e)}var Mo=class{},mh=new B("",{providedIn:"root",factory:()=>!1});var w0=new B(""),E0=new B(""),zm=class{},Qd=class{};function FV(n){let e=Error(`No component factory found for ${xt(n)}.`);return e[LV]=n,e}var LV="ngComponent";var Wm=class{resolveComponentFactory(e){throw FV(e)}},xo=class{static{this.NULL=new Wm}},Po=class{},Er=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>VV()}}return n})();function VV(){let n=xe(),e=Vt(),t=fi(e.index,n);return(ai(t)?t:n)[st]}var UV=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})();function Km(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jb(i,a);else if(s==2){let c=a,l=e[++o];r=jb(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Yd=class extends xo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ui(e);return new ko(t,this.ngModule)}};function fT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ci.None;e?t.push({propName:o,templateName:r,isSignal:(a&ci.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function jV(n){let e=n.toLowerCase();return e==="svg"?yF:e==="math"?_F:null}var ko=class extends Qd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=fT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return fT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Y1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ee(null);try{i=i||this.ngModule;let o=i instanceof Gt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Nm(e,o):e,c=a.get(Po,null);if(c===null)throw new H(407,!1);let l=a.get(UV,null),d=a.get(Mo,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",w=r?qL(g,r,this.componentDef.encapsulation,a):qS(g,y,jV(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;w!==null&&(R=Oy(w,a,!0));let F=By(0,null,null,1,0,null,null,null,null,null,null),U=hh(null,F,null,N,null,null,f,g,a,null,R);Ey(U);let q,ie,ke=null;try{let se=this.componentDef,D,_=null;se.findHostDirectiveDefs?(D=[],_=new Map,se.findHostDirectiveDefs(se,D,_),D.push(se)):D=[se];let v=BV(U,w);ke=$V(v,w,se,D,U,f,g),ie=sS(F,Un),w&&GV(g,se,w,r),t!==void 0&&zV(ie,this.ngContentSelectors,t),q=qV(ke,se,D,_,U,[WV]),Hy(F,U,null)}catch(se){throw ke!==null&&Vm(ke),Vm(U),se}finally{Cy()}return new Qm(this.componentType,q,lh(ie,U),U,ie)}finally{Ee(s)}}},Qm=class extends zm{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new os(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;$y(s[he],s,i,e,t),this.previousInputValues.set(e,t);let o=fi(this._tNode.index,s);qy(o,1)}}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BV(n,e){let t=n[he],r=Un;return n[r]=e,fh(t,r,2,"#host",null)}function $V(n,e,t,r,i,s,o){let a=i[he];HV(r,n,e,o);let c=null;e!==null&&(c=Oy(e,i[So]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=hh(i,a0(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Hm(a,n,r.length-1),ph(i,f),i[n.index]=f}function HV(n,e,t,r){for(let i of n)e.mergedAttrs=bc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Km(e,e.mergedAttrs,!0),t!==null&&JS(r,t,e))}function qV(n,e,t,r,i,s){let o=Vt(),a=i[he],c=on(o,i);l0(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=No(i,a,f,o);ss(g,i)}d0(a,i,o),c&&ss(c,i);let l=No(i,a,o.directiveStart+o.componentOffset,o);if(n[_n]=i[_n]=l,s!==null)for(let d of s)d(l,e);return i0(a,o,i),l}function GV(n,e,t,r){if(r)Em(n,t,["ng-version","18.2.11"]);else{let{attrs:i,classes:s}=Z1(e.selectors[0]);i&&Em(n,t,i),s&&s.length>0&&ZS(n,t,s.join(" "))}}function zV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function WV(){let n=Vt();Sy(xe()[he],n)}var Uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=KV}}return n})();function KV(){let n=Vt();return YV(n,xe())}var QV=Uo,C0=class extends QV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ay(this._hostTNode,this._hostLView);if(CS(e)){let t=$d(e,this._hostLView),r=Bd(e),i=t[he].data[r+8];return new Xi(i,t)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=hT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,dT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!fF(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new ko(ui(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let N=(o?l:this.parentInjector).get(Gt,null);N&&(s=N)}let d=ui(c.componentType??{}),f=hT(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,dT(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Pt],l=new C0(c,c[vn],c[Pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return _V(o,i,s,r),e.attachToViewContainerRef(),kT(fm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bm(this._lContainer,t);r&&(Pd(fm(this._lContainer),t),WS(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bm(this._lContainer,t);return r&&Pd(fm(this._lContainer),t)!=null?new os(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pT(n){return n[Ld]}function fm(n){return n[Ld]||(n[Ld]=[])}function YV(n,e){let t,r=e[n.index];return Ir(r)?t=r:(t=h0(r,e,null,n),e[n.index]=t,ph(e,t)),JV(t,e,n,r),new C0(t,n,e)}function ZV(n,e){let t=n[st],r=t.createComment(""),i=on(e,n),s=QS(t,i);return Wd(t,s,r,xL(t,i),!1),r}var JV=tU,XV=()=>!1;function eU(n,e,t){return XV(n,e,t)}function tU(n,e,t,r){if(n[ts])return;let i;t.type&8?i=jn(r):i=ZV(e,t),n[ts]=i}var gT=new Set;function jo(n){gT.has(n)||(gT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function nU(n){return typeof n=="function"&&n[dr]!==void 0}function Pc(n,e){jo("NgSignals");let t=cb(n),r=t[dr];return e?.equal&&(r.equal=e.equal),t.set=i=>Vg(r,i),t.update=i=>ub(r,i),t.asReadonly=rU.bind(t),t}function rU(){let n=this[dr];if(n.readonlyFn===void 0){let e=()=>this();e[dr]=n,n.readonlyFn=e}return n.readonlyFn}function D0(n){return nU(n)&&typeof n.set=="function"}function iU(n){return Object.getPrototypeOf(n.prototype).constructor}function an(n){let e=iU(n.type),t=!0,r=[n];for(;e;){let i;if(li(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Cd(n.inputs),o.inputTransforms=Cd(n.inputTransforms),o.declaredInputs=Cd(n.declaredInputs),o.outputs=Cd(n.outputs);let a=i.hostBindings;a&&uU(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&aU(n,c),l&&cU(n,l),sU(n,i),y1(n.outputs,i.outputs),li(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===an&&(t=!1)}}e=Object.getPrototypeOf(e)}oU(r)}function sU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function oU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bc(i.hostAttrs,t=bc(t,i.hostAttrs))}}function Cd(n){return n===Do?{}:n===tn?[]:n}function aU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function cU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function uU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var di=class{},Ac=class{};var Ym=class extends di{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yd(this);let s=HT(e);this._bootstrapComponents=HS(s.bootstrap),this._r3Injector=xS(e,t,[{provide:di,useValue:this},{provide:xo,useValue:this.componentFactoryResolver},...r],xt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zm=class extends Ac{constructor(e){super(),this.moduleType=e}create(e){return new Ym(this.moduleType,e,[])}};var Zd=class extends di{constructor(e){super(),this.componentFactoryResolver=new Yd(this),this.instance=null;let t=new Tc([...e.providers,{provide:di,useValue:this},{provide:xo,useValue:this.componentFactoryResolver}],e.parent||vy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yh(n,e,t=null){return new Zd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function b0(n){return Gy(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function lU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Gy(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function T0(n,e,t){return n[e]=t}function hi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dU(n,e,t,r){let i=hi(n,e,t);return hi(n,e+1,r)||i}function hU(n){return(n.flags&32)===32}function fU(n,e,t,r,i,s,o,a,c){let l=e.consts,d=fh(e,n,4,o||null,a||null);u0(e,t,d,jd(l,c)),Sy(e,d);let f=d.tView=By(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function pU(n,e,t,r,i,s,o,a,c,l){let d=t+Un,f=e.firstCreatePass?fU(d,e,n,r,i,s,o,a,c):e.data[d];xc(f,!1);let g=gU(e,n,f,t);by()&&Uy(e,n,g,f),ss(g,n);let y=h0(g,n,g,f);return n[d]=y,ph(n,y),eU(y,f,n),Iy(f)&&s0(e,n,f),c!=null&&o0(n,f,l),f}function In(n,e,t,r,i,s,o,a){let c=xe(),l=Lt(),d=jd(l.consts,s);return pU(c,l,n,e,t,r,i,d,o,a),In}var gU=mU;function mU(n,e,t,r){return Ty(!0),e[st].createComment("")}var wo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(wo||{}),S0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Jm=class n{constructor(){this.ngZone=O(_e),this.scheduler=O(Mo),this.errorHandler=O(gr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[wo.EarlyRead,wo.Write,wo.MixedReadWrite,wo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}},Xm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function zy(n,e){!e?.injector&&hF(zy);let t=e?.injector??O(Ze);return IL(t)?(jo("NgAfterNextRender"),_U(n,t,e,!0)):vU}function yU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _U(n,e,t,r){let i=e.get(S0);i.impl??=e.get(Jm);let s=t?.phase??wo.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(Ry):null,a=new Xm(i.impl,yU(n,s),r,o);return i.impl.register(a),a}var vU={destroy(){}};function _h(n,e,t,r){let i=xe(),s=uh();if(hi(i,s,e)){let o=Lt(),a=Dy();aV(a,i,n,e,t,r)}return _h}function IU(n,e,t,r){return hi(n,uh(),t)?e+py(t)+r:us}function Dd(n,e){return n<<17|e<<2}function as(n){return n>>17&32767}function wU(n){return(n&2)==2}function EU(n,e){return n&131071|e<<17}function ey(n){return n|2}function Oo(n){return(n&131068)>>2}function pm(n,e){return n&-131069|e<<2}function CU(n){return(n&1)===1}function ty(n){return n|1}function DU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=as(o),c=Oo(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Mc(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=as(n[a+1]);n[r+1]=Dd(g,a),g!==0&&(n[g+1]=pm(n[g+1],r)),n[a+1]=EU(n[a+1],r)}else n[r+1]=Dd(a,0),a!==0&&(n[a+1]=pm(n[a+1],r)),a=r;else n[r+1]=Dd(c,0),a===0?a=r:n[c+1]=pm(n[c+1],r),c=r;l&&(n[r+1]=ey(n[r+1])),mT(n,d,r,!0),mT(n,d,r,!1),bU(e,d,n,r,s),o=Dd(a,c),s?e.classBindings=o:e.styleBindings=o}function bU(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Mc(s,e)>=0&&(t[r+1]=ty(t[r+1]))}function mT(n,e,t,r){let i=n[t+1],s=e===null,o=r?as(i):Oo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];TU(c,e)&&(a=!0,n[o+1]=r?ty(l):ey(l)),o=r?as(l):Oo(l)}a&&(n[t+1]=r?ey(i):ty(i))}function TU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Mc(n,e)>=0:!1}function Wt(n,e,t){let r=xe(),i=uh();if(hi(r,i,e)){let s=Lt(),o=Dy();c0(s,o,r,n,e,r[st],t,!1)}return Wt}function yT(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";$y(n,t,s[o],o,r)}function mi(n,e,t){return A0(n,e,t,!1),mi}function vh(n,e){return A0(n,e,null,!0),vh}function A0(n,e,t,r){let i=xe(),s=Lt(),o=xF(2);if(s.firstUpdatePass&&AU(s,n,o,r),e!==us&&hi(i,o,e)){let a=s.data[Lo()];PU(s,a,i,i[st],n,i[o+1]=kU(e,t),r,o)}}function SU(n,e){return e>=n.expandoStartIndex}function AU(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Lo()],o=SU(n,t);OU(s,r)&&e===null&&!o&&(e=!1),e=RU(i,s,e,r),DU(i,s,e,t,o,r)}}function RU(n,e,t,r){let i=FF(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gm(null,n,e,t,r),t=Rc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=gm(i,n,e,t,r),s===null){let c=NU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=gm(null,n,e,c[1],r),c=Rc(c,e.attrs,r),MU(n,e,r,c))}else s=xU(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function NU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Oo(r)!==0)return n[as(r)]}function MU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[as(i)]=r}function xU(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Rc(r,o,t)}return Rc(r,e.attrs,t)}function gm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Rc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Rc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),L1(n,o,t?!0:e[++s]))}return n===void 0?null:n}function PU(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=CU(l)?_T(c,e,t,i,Oo(l),o):void 0;if(!Jd(d)){Jd(s)||wU(l)&&(s=_T(c,null,t,i,a,o));let f=iS(Lo(),t);UL(r,o,f,i,s)}}function _T(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===us&&(g=f?tn:void 0);let y=f?sm(g,r):d===r?g:void 0;if(l&&!Jd(y)&&(y=sm(c,r)),Jd(y)&&(a=y,o))return a;let w=n[i+1];i=o?as(w):Oo(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=sm(c,r))}return a}function Jd(n){return n!==void 0}function kU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=xt(Fy(n)))),n}function OU(n,e){return(n.flags&(e?8:16))!==0}function FU(n,e,t,r,i,s){let o=e.consts,a=jd(o,i),c=fh(e,n,2,r,a);return u0(e,t,c,jd(o,s)),c.attrs!==null&&Km(c,c.attrs,!1),c.mergedAttrs!==null&&Km(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(n,e,t,r){let i=xe(),s=Lt(),o=Un+n,a=i[st],c=s.firstCreatePass?FU(o,s,i,e,t,r):s.data[o],l=LU(s,i,c,a,e,n);i[o]=l;let d=Iy(c);return xc(c,!0),JS(a,l,c),!hU(c)&&by()&&Uy(s,i,l,c),CF()===0&&ss(l,i),DF(),d&&(s0(s,i,c),i0(s,c,i)),r!==null&&o0(i,c),G}function J(){let n=Vt();hS()?NF():(n=n.parent,xc(n,!1));let e=n;SF(e)&&AF(),bF();let t=Lt();return t.firstCreatePass&&(Sy(t,n),XT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&HF(e)&&yT(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qF(e)&&yT(t,e,xe(),e.stylesWithoutHost,!1),J}function ls(n,e,t,r){return G(n,e,t,r),J(),ls}var LU=(n,e,t,r,i,s)=>(Ty(!0),qS(r,i,UF()));function yi(){return xe()}var Ji=void 0;function VU(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var UU=["en",[["a","p"],["AM","PM"],Ji],[["AM","PM"],Ji,Ji],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ji,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ji,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ji,"{1} 'at' {0}",Ji],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",VU],mm={};function Wy(n){let e=jU(n),t=vT(e);if(t)return t;let r=e.split("-")[0];if(t=vT(r),t)return t;if(r==="en")return UU;throw new H(701,!1)}function vT(n){return n in mm||(mm[n]=wc.ng&&wc.ng.common&&wc.ng.common.locales&&wc.ng.common.locales[n]),mm[n]}var Bo=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bo||{});function jU(n){return n.toLowerCase().replace(/_/g,"-")}var Xd="en-US";var BU=Xd;function $U(n){typeof n=="string"&&(BU=n.toLowerCase().replace(/_/g,"-"))}var HU=(n,e,t)=>{};function Ue(n,e,t,r){let i=xe(),s=Lt(),o=Vt();return R0(s,i,i[st],o,n,e,r),Ue}function qU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Fd],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function R0(n,e,t,r,i,s,o){let a=Iy(r),l=n.firstCreatePass&&hV(n),d=e[_n],f=dV(e),g=!0;if(r.type&3||o){let N=on(r,e),R=o?o(N):N,F=f.length,U=o?ie=>o(jn(ie[r.index])):r.index,q=null;if(!o&&a&&(q=qU(n,e,i,r.index)),q!==null){let ie=q.__ngLastListenerFn__||q;ie.__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,g=!1}else{s=wT(r,e,d,s),HU(N,i,s);let ie=t.listen(R,i,s);f.push(s,ie),l&&l.push(i,U,F,F+1)}}else s=wT(r,e,d,s);let y=r.outputs,w;if(g&&y!==null&&(w=y[i])){let N=w.length;if(N)for(let R=0;R<N;R+=2){let F=w[R],U=w[R+1],ke=e[F][U].subscribe(s),se=f.length;f.push(s,ke),l&&l.push(i,r.index,se,-(se+1))}}}function IT(n,e,t,r){let i=Ee(null);try{return On(6,e,t),t(r)!==!1}catch(s){return p0(n,s),!1}finally{On(7,e,t),Ee(i)}}function wT(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?fi(n.index,e):e;qy(o,5);let a=IT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=IT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Cr(n=1){return VF(n)}function GU(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function me(n,e=""){let t=xe(),r=Lt(),i=n+Un,s=r.firstCreatePass?fh(r,i,1,e,null):r.data[i],o=zU(r,t,s,e,n);t[i]=o,by()&&Uy(r,t,o,s),xc(s,!1)}var zU=(n,e,t,r,i)=>(Ty(!0),EL(e[st],r));function _i(n){return ds("",n,""),_i}function ds(n,e,t){let r=xe(),i=IU(r,n,e,t);return i!==us&&fV(r,Lo(),i),ds}function wn(n,e,t){D0(e)&&(e=e());let r=xe(),i=uh();if(hi(r,i,e)){let s=Lt(),o=Dy();c0(s,o,r,n,e,r[st],t,!1)}return wn}function Gn(n,e){let t=D0(n);return t&&n.set(e),t}function En(n,e){let t=xe(),r=Lt(),i=Vt();return R0(r,t,t[st],i,n,e),En}function WU(n,e,t){let r=Lt();if(r.firstCreatePass){let i=li(n);ny(t,r.data,r.blueprint,i,!0),ny(e,r.data,r.blueprint,i,!1)}}function ny(n,e,t,r,i){if(n=Mt(n),Array.isArray(n))for(let s=0;s<n.length;s++)ny(n[s],e,t,r,i);else{let s=Lt(),o=xe(),a=Vt(),c=To(n)?n:Mt(n.provide),l=QT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(To(n)||!n.multi){let y=new is(l,i,W),w=_m(c,e,i?d:d+g,f);w===-1?(xm(qd(a,o),s,c),ym(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[w]=y,o[w]=y)}else{let y=_m(c,e,d+g,f),w=_m(c,e,d,d+g),N=y>=0&&t[y],R=w>=0&&t[w];if(i&&!R||!i&&!N){xm(qd(a,o),s,c);let F=YU(i?QU:KU,t.length,i,r,l);!i&&R&&(t[w].providerFactory=F),ym(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),o.push(F)}else{let F=N0(t[i?w:y],l,!i&&r);ym(s,n,y>-1?y:w,F)}!i&&r&&R&&t[w].componentProviders++}}}function ym(n,e,t,r){let i=To(e),s=sF(e);if(i||s){let c=(s?Mt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function N0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _m(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function KU(n,e,t,r){return ry(this.multi,[])}function QU(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=No(t,t[he],this.providerFactory.index,r);s=a.slice(0,o),ry(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],ry(i,s);return s}function ry(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function YU(n,e,t,r,i){let s=new is(n,t,W);return s.multi=[],s.index=e,s.componentProviders=0,N0(s,i,r&&!t),s}function vi(n,e=[]){return t=>{t.providersResolver=(r,i)=>WU(r,i?i(n):n,e)}}var ZU=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zT(!1,t.type),i=r.length>0?yh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(K(Gt))})}}return n})();function cn(n){jo("NgStandalone"),n.getStandaloneInjector=e=>e.get(ZU).getOrCreateStandaloneInjector(n)}function M0(n,e,t,r){return JU(xe(),pS(),n,e,t,r)}function x0(n,e){let t=n[e];return t===us?void 0:t}function JU(n,e,t,r,i,s){let o=e+t;return hi(n,o,i)?T0(n,o+1,s?r.call(s,i):r(i)):x0(n,o+1)}function XU(n,e,t,r,i,s,o){let a=e+t;return dU(n,a,i,s)?T0(n,a+2,o?r.call(o,i,s):r(i,s)):x0(n,a+2)}function Ky(n,e){let t=Lt(),r,i=n+Un;t.firstCreatePass?(r=ej(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=es(r.type,!0)),o,a=Ot(W);try{let c=Hd(!1),l=s();return Hd(c),GU(t,xe(),i,l),l}finally{Ot(a)}}function ej(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qy(n,e,t,r){let i=n+Un,s=xe(),o=vF(s,i);return tj(s,i)?XU(s,pS(),e,o.transform,t,r,o):o.transform(t,r)}function tj(n,e){return n[he].data[e].pure}var mr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},P0=new mr("18.2.11");var Ih=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var k0=new B("");function hs(n){return!!n&&typeof n.then=="function"}function O0(n){return!!n&&typeof n.subscribe=="function"}var $o=new B(""),F0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O($o,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(hs(s))t.push(s);else if(O0(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wh=new B("");function nj(){ab(()=>{throw new H(600,!1)})}function rj(n){return n.isBoundToModule}var ij=10;function sj(n,e,t){try{let r=t();return hs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var zn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(uL),this.afterRenderManager=O(S0),this.zonelessEnabled=O(mh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=O(Vo).hasPendingTasks.pipe(Z(t=>!t)),this._injector=O(Gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Qd;if(!this._injector.get(F0).done){let g=!i&&$T(t),y=!1;throw new H(405,y)}let o;i?o=t:o=this._injector.get(xo).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=rj(o)?void 0:this._injector.get(di),c=r||o.selector,l=o.create(Ze.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(k0,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Rd(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new H(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Po,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<ij;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)oj(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ah(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Rd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(wh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oj(n,e,t,r){if(!t&&!ah(n))return;y0(n,e,t&&!r?0:1)}var iy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Eh=(()=>{class n{compileModuleSync(t){return new Zm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=HT(t),s=HS(i.declarations).reduce((o,a)=>{let c=ui(a);return c&&o.push(new ko(c)),o},[]);return new iy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aj=(()=>{class n{constructor(){this.zone=O(_e),this.changeDetectionScheduler=O(Mo),this.applicationRef=O(zn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cj=new B("",{factory:()=>!1});function L0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(pe(P({},U0()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:bo,multi:!0,useFactory:()=>{let r=O(aj,{optional:!0});return()=>r.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let r=O(uj);return()=>{r.initialize()}}},e===!0?{provide:w0,useValue:!0}:[],{provide:E0,useValue:t??PS}]}function V0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=L0({ngZoneFactory:()=>{let i=U0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&jo("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ft([{provide:cj,useValue:!0},{provide:mh,useValue:!1},r])}function U0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uj=(()=>{class n{constructor(){this.subscription=new ze,this.initialized=!1,this.zone=O(_e),this.pendingTasks=O(Vo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lj=(()=>{class n{constructor(){this.appRef=O(zn),this.taskService=O(Vo),this.ngZone=O(_e),this.zonelessEnabled=O(mh),this.disableScheduling=O(w0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ze,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(E0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rT:kS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dj(){return typeof $localize<"u"&&$localize.locale||Xd}var Ch=new B("",{providedIn:"root",factory:()=>O(Ch,ce.Optional|ce.SkipSelf)||dj()});var sy=new B("");function bd(n){return!n.moduleRef}function hj(n){let e=bd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{bd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(gr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),bd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(sy);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(sy);o.add(s),n.moduleRef.onDestroy(()=>{Rd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return sj(r,t,()=>{let s=e.get(F0);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Ch,Xd);if($U(o||Xd),bd(n)){let a=e.get(zn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return fj(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fj(n,e){let t=n.injector.get(zn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new H(-403,!1);e.push(n)}var Nd=null;function pj(n=[],e){return Ze.create({name:e,providers:[{provide:ih,useValue:"platform"},{provide:sy,useValue:new Set([()=>Nd=null])},...n]})}function gj(n=[]){if(Nd)return Nd;let e=pj(n);return Nd=e,nj(),mj(e),e}function mj(n){n.get(Py,null)?.forEach(t=>t())}function j0(){return!1}var fs=(()=>{class n{static{this.__NG_ELEMENT_ID__=yj}}return n})();function yj(n){return _j(Vt(),xe(),(n&16)===16)}function _j(n,e,t){if(oh(n)&&!t){let r=fi(n.index,e);return new os(r,r)}else if(n.type&175){let r=e[Vn];return new os(r,e)}return null}var oy=class{constructor(){}supports(e){return b0(e)}create(e){return new ay(e)}},vj=(n,e)=>e,ay=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||vj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ET(r,i,s)?t:r,a=ET(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,w=y+g;d<=w&&w<l&&(s[g]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!b0(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,lU(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new cy(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new eh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new eh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},cy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},uy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},eh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new uy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ET(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var ly=class{constructor(){}supports(e){return e instanceof Map||Gy(e)}create(){return new dy}},dy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Gy(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new hy(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},hy=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function CT(){return new Yy([new oy])}var Yy=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:CT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CT()),deps:[[n,new rh,new We]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new H(901,!1)}}return n})();function DT(){return new Zy([new ly])}var Zy=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:DT})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||DT()),deps:[[n,new rh,new We]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new H(901,!1)}}return n})();function B0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=gj(r),s=[L0({}),{provide:Mo,useExisting:lj},...t||[]],o=new Zd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return hj({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function kc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Oc(n,e){jo("NgSignals");let t=ib(n);return e?.equal&&(t[dr].equal=e.equal),t}function Dr(n){let e=Ee(null);try{return n()}finally{Ee(e)}}function $0(n){let e=ui(n);if(!e)return null;let t=new ko(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var K0=null;function Sr(){return K0}function Q0(n){K0??=n}var Dh=class{};var Ut=new B(""),i_=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(Ej),providedIn:"platform"})}}return n})(),Y0=new B(""),Ej=(()=>{class n extends i_{constructor(){super(),this._doc=O(Ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sr().getBaseHref(this._doc)}onPopState(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function s_(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function H0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function br(n){return n&&n[0]!=="?"?"?"+n:n}var ps=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(o_),providedIn:"root"})}}return n})(),Z0=new B(""),o_=(()=>{class n extends ps{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return s_(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+br(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+br(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+br(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(i_),K(Z0,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),J0=(()=>{class n extends ps{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=s_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+br(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+br(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(i_),K(Z0,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Ho=(()=>{class n{constructor(t){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bj(H0(q0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+br(r))}normalize(t){return n.stripTrailingSlash(Dj(this._basePath,q0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=br}static{this.joinWithSlash=s_}static{this.stripTrailingSlash=H0}static{this.\u0275fac=function(r){return new(r||n)(K(ps))}}static{this.\u0275prov=$({token:n,factory:()=>Cj(),providedIn:"root"})}}return n})();function Cj(){return new Ho(K(ps))}function Dj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function q0(n){return n.replace(/\/index.html$/,"")}function bj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var X0=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(X0||{});var Tr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fc(n,e){let t=Wy(n),r=t[Bo.NumberSymbols][e];if(typeof r>"u"){if(e===Tr.CurrencyDecimal)return t[Bo.NumberSymbols][Tr.Decimal];if(e===Tr.CurrencyGroup)return t[Bo.NumberSymbols][Tr.Group]}return r}function Tj(n,e){return Wy(n)[Bo.NumberFormats][e]}var Sj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,G0=22,bh=".",Lc="0",Aj=";",Rj=",",Jy="#";function Nj(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=Fc(t,Tr.Infinity);else{let l=kj(n);o&&(l=Pj(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(s){let U=s.match(Sj);if(U===null)throw new Error(`${s} is not a valid digit info`);let q=U[1],ie=U[3],ke=U[5];q!=null&&(d=Xy(q)),ie!=null&&(f=Xy(ie)),ke!=null?g=Xy(ke):ie!=null&&f>g&&(g=f)}Oj(l,f,g);let y=l.digits,w=l.integerLen,N=l.exponent,R=[];for(c=y.every(U=>!U);w<d;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?R=y.splice(w,y.length):(R=y,y=[0]);let F=[];for(y.length>=e.lgSize&&F.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)F.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&F.unshift(y.join("")),a=F.join(Fc(t,r)),R.length&&(a+=Fc(t,i)+R.join("")),N&&(a+=Fc(t,Tr.Exponential)+"+"+N)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Mj(n,e,t){let r=Tj(e,X0.Decimal),i=xj(r,Fc(e,Tr.MinusSign));return Nj(n,i,e,Tr.Group,Tr.Decimal,t)}function xj(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Aj),i=r[0],s=r[1],o=i.indexOf(bh)!==-1?i.split(bh):[i.substring(0,i.lastIndexOf(Lc)+1),i.substring(i.lastIndexOf(Lc)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(Jy));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Lc?t.minFrac=t.maxFrac=d+1:f===Jy?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(Rj);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(Jy);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Pj(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function kj(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(bh))>-1&&(e=e.replace(bh,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Lc;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Lc;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>G0&&(r=r.splice(0,G0-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function Oj(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,y,w){return g=g+f,w[y]=g<10?g:g-10,c&&(w[y]===0&&y>=l?w.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Xy(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function eA(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var e_=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ii=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new e_(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),z0(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);z0(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(Uo),W(gh),W(Yy))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function z0(n,e){n.context.$implicit=e.item}var Sh=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new t_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){W0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){W0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(Uo),W(gh))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),t_=class{constructor(){this.$implicit=null,this.ngIf=null}};function W0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${xt(e)}'.`)}var tA=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:Bn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(W(qn),W(Zy),W(Er))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function Fj(n,e){return new H(2100,!1)}var nA=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!Lj(t))return null;i||=this._locale;try{let s=Vj(t);return Mj(s,i,r)}catch(s){throw Fj(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(W(Ch,16))}}static{this.\u0275pipe=UT({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function Lj(n){return!(n==null||n===""||n!==n)}function Vj(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Cn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({})}}return n})(),a_="browser",Uj="server";function Ah(n){return n===a_}function c_(n){return n===Uj}var rA=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>Ah(O(zt))?new n_(O(Ut),window):new r_})}}return n})(),n_=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=jj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function jj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var r_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Th=class{};var d_=class extends Dh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},h_=class n extends d_{static makeCurrent(){Q0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Bj();return t==null?null:$j(t)}resetBaseElement(){Vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eA(document.cookie,e)}},Vc=null;function Bj(){return Vc=Vc||document.querySelector("base"),Vc?Vc.getAttribute("href"):null}function $j(n){return new URL(n,document.baseURI).pathname}var Hj=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),f_=new B(""),aA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(K(f_),K(_e))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Nh=class{constructor(e){this._doc=e}},u_="ng-app-id",cA=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=c_(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${u_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(u_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(u_,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(K(Ut),K(xy),K(ky,8),K(zt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),l_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},g_=/%COMP%/g,uA="%COMP%",qj=`_nghost-${uA}`,Gj=`_ngcontent-${uA}`,zj=!0,Wj=new B("",{providedIn:"root",factory:()=>zj});function Kj(n){return Gj.replace(g_,n)}function Qj(n){return qj.replace(g_,n)}function lA(n,e){return e.map(t=>t.replace(g_,n))}var iA=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=c_(a),this.defaultRenderer=new Uc(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ln.ShadowDom&&(r=pe(P({},r),{encapsulation:Ln.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Mh?i.applyToHost(t):i instanceof jc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Ln.Emulated:s=new Mh(c,l,r,this.appId,d,o,a,f);break;case Ln.ShadowDom:return new p_(c,l,t,r,o,a,this.nonce,f);default:s=new jc(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(K(aA),K(cA),K(xy),K(Wj),K(Ut),K(zt),K(_e),K(ky))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Uc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(l_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=l_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=l_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Bn.DashCase|Bn.Important)?e.style.setProperty(t,r,i&Bn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Bn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function sA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var p_=class extends Uc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=lA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jc=class extends Uc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?lA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Mh=class extends jc{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=Kj(l),this.hostAttr=Qj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Yj=(()=>{class n extends Nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(K(Ut))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),oA=["alt","control","meta","shift"],Zj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Xj=(()=>{class n extends Nh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),oA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Zj[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),oA.forEach(o=>{if(o!==i){let a=Jj[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(K(Ut))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function dA(n,e){return B0(P({rootComponent:n},e2(e)))}function e2(n){return{appProviders:[...s2,...n?.providers??[]],platformProviders:i2}}function t2(){h_.makeCurrent()}function n2(){return new gr}function r2(){return BS(document),document}var i2=[{provide:zt,useValue:a_},{provide:Py,useValue:t2,multi:!0},{provide:Ut,useFactory:r2,deps:[]}];var s2=[{provide:ih,useValue:"root"},{provide:gr,useFactory:n2,deps:[]},{provide:f_,useClass:Yj,multi:!0,deps:[Ut,_e,zt]},{provide:f_,useClass:Xj,multi:!0,deps:[Ut]},iA,cA,aA,{provide:Po,useExisting:iA},{provide:Th,useClass:Hj,deps:[]},[]];var hA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(K(Ut))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae="primary",nu=Symbol("RouteTitle"),I_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new I_(n)}function a2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function c2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wn(n[t],e[t]))return!1;return!0}function Wn(n,e){let t=n?w_(n):void 0,r=e?w_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!CA(n[i],e[i]))return!1;return!0}function w_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function DA(n){return n.length>0?n[n.length-1]:null}function Ei(n){return Jg(n)?n:hs(n)?Ae(Promise.resolve(n)):Y(n)}var u2={exact:TA,subset:SA},bA={exact:l2,subset:d2,ignored:()=>!0};function fA(n,e,t){return u2[t.paths](n.root,e.root,t.matrixParams)&&bA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function l2(n,e){return Wn(n,e)}function TA(n,e,t){if(!ms(n.segments,e.segments)||!kh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!TA(n.children[r],e.children[r],t))return!1;return!0}function d2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CA(n[t],e[t]))}function SA(n,e,t){return AA(n,e,e.segments,t)}function AA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ms(i,t)||e.hasChildren()||!kh(i,t,r))}else if(n.segments.length===t.length){if(!ms(n.segments,t)||!kh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ms(n.segments,i)||!kh(n.segments,i,r)||!n.children[ae]?!1:AA(n.children[ae],e,s,r)}}function kh(n,e,t){return e.every((r,i)=>bA[t](n[i].parameters,r.parameters))}var Rr=class{constructor(e=new be([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return p2.serialize(this)}},be=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}},gs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return NA(this)}};function h2(n,e){return ms(n,e)&&n.every((t,r)=>Wn(t.parameters,e[r].parameters))}function ms(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function f2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var ru=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new Yo,providedIn:"root"})}}return n})(),Yo=class{parse(e){let t=new C_(e);return new Rr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bc(e.root,!0)}`,r=y2(e.queryParams),i=typeof e.fragment=="string"?`#${g2(e.fragment)}`:"";return`${t}${r}${i}`}},p2=new Yo;function Oh(n){return n.segments.map(e=>NA(e)).join("/")}function Bc(n,e){if(!n.hasChildren())return Oh(n);if(e){let t=n.children[ae]?Bc(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ae&&r.push(`${i}:${Bc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=f2(n,(r,i)=>i===ae?[Bc(n.children[ae],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function RA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xh(n){return RA(n).replace(/%3B/gi,";")}function g2(n){return encodeURI(n)}function E_(n){return RA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fh(n){return decodeURIComponent(n)}function pA(n){return Fh(n.replace(/\+/g,"%20"))}function NA(n){return`${E_(n.path)}${m2(n.parameters)}`}function m2(n){return Object.entries(n).map(([e,t])=>`;${E_(e)}=${E_(t)}`).join("")}function y2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xh(t)}=${xh(i)}`).join("&"):`${xh(t)}=${xh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _2=/^[^\/()?;#]+/;function m_(n){let e=n.match(_2);return e?e[0]:""}var v2=/^[^\/()?;=#]+/;function I2(n){let e=n.match(v2);return e?e[0]:""}var w2=/^[^=?&#]+/;function E2(n){let e=n.match(w2);return e?e[0]:""}var C2=/^[^&#]+/;function D2(n){let e=n.match(C2);return e?e[0]:""}var C_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new be(e,t)),r}parseSegment(){let e=m_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new gs(Fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=I2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=m_(this.remaining);i&&(r=i,this.capture(r))}e[Fh(t)]=Fh(r)}parseQueryParam(e){let t=E2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=D2(this.remaining);o&&(r=o,this.capture(r))}let i=pA(t),s=pA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=m_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ae);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ae]:new be([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function MA(n){return n.segments.length>0?new be([],{[ae]:n}):n}function xA(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=xA(i);if(r===ae&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new be(n.segments,e);return b2(t)}function b2(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new be(n.segments.concat(e.segments),e.children)}return n}function Wc(n){return n instanceof Rr}function T2(n,e,t=null,r=null){let i=PA(n);return kA(i,e,t,r)}function PA(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new be(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=MA(r);return e??i}function kA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return y_(i,i,i,t,r);let s=S2(e);if(s.toRoot())return y_(i,i,new be([],{}),t,r);let o=A2(s,i,n),a=o.processChildren?qc(o.segmentGroup,o.index,s.commands):FA(o.segmentGroup,o.index,s.commands);return y_(i,o.segmentGroup,a,t,r)}function Lh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kc(n){return typeof n=="object"&&n!=null&&n.outlets}function y_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=OA(n,e,t);let a=MA(xA(o));return new Rr(a,s,i)}function OA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=OA(s,e,t)}),new be(n.segments,r)}var Vh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lh(r[0]))throw new H(4003,!1);let i=r.find(Kc);if(i&&i!==DA(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Vh(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Vh(t,e,r)}var zo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function A2(n,e,t){if(n.isAbsolute)return new zo(e,!0,0);if(!t)return new zo(e,!1,NaN);if(t.parent===null)return new zo(t,!0,0);let r=Lh(n.commands[0])?0:1,i=t.segments.length-1+r;return R2(t,i,n.numberOfDoubleDots)}function R2(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new zo(r,!1,i-s)}function N2(n){return Kc(n[0])?n[0].outlets:{[ae]:n}}function FA(n,e,t){if(n??=new be([],{}),n.segments.length===0&&n.hasChildren())return qc(n,e,t);let r=M2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new be(n.segments.slice(0,r.pathIndex),{});return s.children[ae]=new be(n.segments.slice(r.pathIndex),n.children),qc(s,0,i)}else return r.match&&i.length===0?new be(n.segments,{}):r.match&&!n.hasChildren()?D_(n,e,t):r.match?qc(n,0,i):D_(n,e,t)}function qc(n,e,t){if(t.length===0)return new be(n.segments,{});{let r=N2(t),i={};if(Object.keys(r).some(s=>s!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let s=qc(n.children[ae],e,t);return new be(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=FA(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new be(n.segments,i)}}function M2(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Kc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!mA(c,l,o))return s;r+=2}else{if(!mA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function D_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Kc(s)){let c=x2(s.outlets);return new be(r,c)}if(i===0&&Lh(t[0])){let c=n.segments[e];r.push(new gs(c.path,gA(t[0]))),i++;continue}let o=Kc(s)?s.outlets[ae]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Lh(a)?(r.push(new gs(o,gA(a))),i+=2):(r.push(new gs(o,{})),i++)}return new be(r,{})}function x2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=D_(new be([],{}),0,r))}),e}function gA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function mA(n,e,t){return n==t.path&&Wn(e,t.parameters)}var Gc="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),un=class{constructor(e,t){this.id=e,this.url=t}},Zo=class extends un{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nr=class extends un{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yt||{}),Uh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Uh||{}),Ar=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wi=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},Qc=class extends un{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jh=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T_=class extends un{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},S_=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A_=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R_=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},N_=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},M_=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},P_=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k_=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Yc=class{},Jo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function P2(n,e){return n.providers&&!n._injector&&(n._injector=yh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dn(n){return n.outlet||ae}function k2(n,e){let t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}function iu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var O_=class{get injector(){return iu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new su(this.rootInjector),this.attachRef=null}},su=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new O_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(K(Gt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$h=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=F_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=F_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=L_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return L_(e,this._root).map(t=>t.value)}};function F_(n,e){if(n===e.value)return e;for(let t of e.children){let r=F_(n,t);if(r)return r}return null}function L_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=L_(n,t);if(r.length)return r.unshift(e),r}return[]}var Qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Go(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Hh=class extends $h{constructor(e,t){super(e),this.snapshot=t,z_(this,e)}toString(){return this.snapshot.toString()}};function LA(n){let e=O2(n),t=new ft([new gs("",{})]),r=new ft({}),i=new ft({}),s=new ft({}),o=new ft(""),a=new bn(t,r,s,o,i,ae,n,e.root);return a.snapshot=e.root,new Hh(new Qt(a,[]),e)}function O2(n){let e={},t={},r={},i="",s=new Wo([],e,r,i,t,ae,n,null,{});return new Gh("",new Qt(s,[]))}var bn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[nu]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&UA(i)&&(r.resolve[nu]=i.title),r}var Wo=class{get title(){return this.data?.[nu]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gh=class extends $h{constructor(e,t){super(t),this.url=e,z_(this,t)}toString(){return VA(this._root)}};function z_(n,e){e.value._routerState=n,e.children.forEach(t=>z_(n,t))}function VA(n){let e=n.children.length>0?` { ${n.children.map(VA).join(", ")} } `:"";return`${n.value}${e}`}function __(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wn(e.params,t.params)||n.paramsSubject.next(t.params),c2(e.url,t.url)||n.urlSubject.next(t.url),Wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function V_(n,e){let t=Wn(n.params,e.params)&&h2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||V_(n.parent,e.parent))}function UA(n){return typeof n.title=="string"||n.title===null}var W_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=O(su),this.location=O(Uo),this.changeDetector=O(fs),this.inputBinder=O(Qh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new U_(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[cs]})}}return n})(),U_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bn?this.route:e===su?this.childContexts:this.parent.get(e,t)}},Qh=new B(""),yA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=_c([r.queryParams,r.params,r.data]).pipe(pt(([s,o,a],c)=>(a=P(P(P({},s),o),a),c===0?Y(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=$0(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function F2(n,e,t){let r=Zc(n,e._root,t?t._root:void 0);return new Hh(r,e)}function Zc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=L2(n,e,t);return new Qt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zc(n,a)),o}}let r=V2(e.value),i=e.children.map(s=>Zc(n,s));return new Qt(r,i)}}function L2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zc(n,r,i);return Zc(n,r)})}function V2(n){return new bn(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Jc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jA="ngNavigationCancelingError";function zh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BA(!1,Yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jA]=!0,t.cancellationCode=e,t}function U2(n){return $A(n)&&Wc(n.url)}function $A(n){return!!n&&n[jA]}var j2=(n,e,t,r)=>Z(i=>(new j_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),j_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),__(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Go(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Go(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Go(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Go(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new k_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new x_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(__(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),__(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Wh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ko=class{constructor(e,t){this.component=e,this.route=t}};function B2(n,e,t){let r=n._root,i=e?e._root:null;return $c(r,i,t,[r.value])}function $2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ST(n)?n:e.get(n):r}function $c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Go(e);return n.children.forEach(o=>{H2(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>zc(a,t.getContext(o),i)),i}function H2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=q2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?$c(n,e,a?a.children:null,r,i):$c(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ko(a.outlet.component,o))}else o&&zc(e,a,i),i.canActivateChecks.push(new Wh(r)),s.component?$c(n,null,a?a.children:null,r,i):$c(n,null,t,r,i);return i}function q2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ms(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ms(n.url,e.url)||!Wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!V_(n,e)||!Wn(n.queryParams,e.queryParams);case"paramsChange":default:return!V_(n,e)}}function zc(n,e,t){let r=Go(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?zc(o,e.children.getContext(s),t):zc(o,null,t):zc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ko(e.outlet.component,i)):t.canDeactivateChecks.push(new Ko(null,i)):t.canDeactivateChecks.push(new Ko(null,i))}function ou(n){return typeof n=="function"}function G2(n){return typeof n=="boolean"}function z2(n){return n&&ou(n.canLoad)}function W2(n){return n&&ou(n.canActivate)}function K2(n){return n&&ou(n.canActivateChild)}function Q2(n){return n&&ou(n.canDeactivate)}function Y2(n){return n&&ou(n.canMatch)}function HA(n){return n instanceof fr||n?.name==="EmptyError"}var Ph=Symbol("INITIAL_VALUE");function Xo(){return pt(n=>_c(n.map(e=>e.pipe(it(1),wd(Ph)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===Ph)return Ph;if(t===!1||Z2(t))return t}return!0}),ot(e=>e!==Ph),it(1)))}function Z2(n){return Wc(n)||n instanceof Jc}function J2(n,e){return Le(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Y(pe(P({},t),{guardsResult:!0})):X2(o,r,i,n).pipe(Le(a=>a&&G2(a)?eB(r,s,n,e):Y(a)),Z(a=>pe(P({},t),{guardsResult:a})))})}function X2(n,e,t,r){return Ae(n).pipe(Le(i=>sB(i.component,i.route,t,e,r)),kn(i=>i!==!0,!0))}function eB(n,e,t,r){return Ae(e).pipe(Zi(i=>Pn(nB(i.route.parent,r),tB(i.route,r),iB(n,i.path,t),rB(n,i.route,t))),kn(i=>i!==!0,!0))}function tB(n,e){return n!==null&&e&&e(new P_(n)),Y(!0)}function nB(n,e){return n!==null&&e&&e(new M_(n)),Y(!0)}function rB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>Qi(()=>{let o=iu(e)??t,a=ea(s,o),c=W2(a)?a.canActivate(e,n):Hn(o,()=>a(e,n));return Ei(c).pipe(kn())}));return Y(i).pipe(Xo())}function iB(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>$2(o)).filter(o=>o!==null).map(o=>Qi(()=>{let a=o.guards.map(c=>{let l=iu(o.node)??t,d=ea(c,l),f=K2(d)?d.canActivateChild(r,n):Hn(l,()=>d(r,n));return Ei(f).pipe(kn())});return Y(a).pipe(Xo())}));return Y(s).pipe(Xo())}function sB(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(a=>{let c=iu(e)??i,l=ea(a,c),d=Q2(l)?l.canDeactivate(n,e,t,r):Hn(c,()=>l(n,e,t,r));return Ei(d).pipe(kn())});return Y(o).pipe(Xo())}function oB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let a=ea(o,n),c=z2(a)?a.canLoad(e,t):Hn(n,()=>a(e,t));return Ei(c)});return Y(s).pipe(Xo(),qA(r))}function qA(n){return Xl(Ye(e=>{if(typeof e!="boolean")throw zh(n,e)}),Z(e=>e===!0))}function aB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let a=ea(o,n),c=Y2(a)?a.canMatch(e,t):Hn(n,()=>a(e,t));return Ei(c)});return Y(s).pipe(Xo(),qA(r))}var Xc=class{constructor(e){this.segmentGroup=e||null}},eu=class extends Error{constructor(e){super(),this.urlTree=e}};function qo(n){return ti(new Xc(n))}function cB(n){return ti(new H(4e3,!1))}function uB(n){return ti(BA(!1,Yt.GuardRejected))}var B_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ae])return cB(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:w,title:N}=i,R=Hn(s,()=>a({params:y,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:N}));if(R instanceof Rr)throw new eu(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new eu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Rr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new be(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},$_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lB(n,e,t,r,i){let s=GA(n,e,t);return s.matched?(r=P2(e,r),aB(r,e,t,i).pipe(Z(o=>o===!0?s:P({},$_)))):Y(s)}function GA(n,e,t){if(e.path==="**")return dB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},$_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||a2)(t,n,e);if(!i)return P({},$_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?P(P({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function dB(n){return{matched:!0,parameters:n.length>0?DA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _A(n,e,t,r){return t.length>0&&pB(n,t,r)?{segmentGroup:new be(e,fB(r,new be(t,n.children))),slicedSegments:[]}:t.length===0&&gB(n,t,r)?{segmentGroup:new be(n.segments,hB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new be(n.segments,n.children),slicedSegments:t}}function hB(n,e,t,r){let i={};for(let s of t)if(Yh(n,e,s)&&!r[Dn(s)]){let o=new be([],{});i[Dn(s)]=o}return P(P({},r),i)}function fB(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&Dn(r)!==ae){let i=new be([],{});t[Dn(r)]=i}return t}function pB(n,e,t){return t.some(r=>Yh(n,e,r)&&Dn(r)!==ae)}function gB(n,e,t){return t.some(r=>Yh(n,e,r))}function Yh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mB(n,e,t){return e.length===0&&!n.children[t]}var H_=class{};function yB(n,e,t,r,i,s,o="emptyOnly"){return new q_(n,e,t,r,i,o,s).recognize()}var _B=31,q_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new B_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=_A(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:t,rootSnapshot:r})=>{let i=new Qt(r,t),s=new Gh("",i),o=T2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Wo([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(Z(r=>({children:r,rootSnapshot:t})),ri(r=>{if(r instanceof eu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Z(o=>o instanceof Qt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ae(s).pipe(Zi(o=>{let a=r.children[o],c=k2(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Id((o,a)=>(o.push(...a),o)),ii(null),nm(),Le(o=>{if(o===null)return qo(r);let a=zA(o);return vB(a),Y(a)}))}processSegment(e,t,r,i,s,o,a){return Ae(t).pipe(Zi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ri(l=>{if(l instanceof Xc)return Y(null);throw l}))),kn(c=>!!c),ri(c=>{if(HA(c))return mB(r,i,s)?Y(new H_):qo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Dn(r)!==o&&(o===ae||!Yh(i,s,r))?qo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):qo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=GA(t,i,s);if(!c)return qo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_B&&(this.allowRedirects=!1));let y=new Wo(s,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,vA(i),Dn(i),i.component??i._loadedComponent??null,i,IA(i)),w=qh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let N=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Le(R=>this.processSegment(e,r,t,R.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=lB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(pt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,w=new Wo(g,f,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,vA(r),Dn(r),r.component??r._loadedComponent??null,r,IA(r)),N=qh(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:F}=_A(t,g,y,l);if(F.length===0&&R.hasChildren())return this.processChildren(d,l,R,w).pipe(Z(q=>new Qt(w,q)));if(l.length===0&&F.length===0)return Y(new Qt(w,[]));let U=Dn(r)===s;return this.processSegment(d,l,R,F,U?ae:s,!0,w).pipe(Z(q=>new Qt(w,q instanceof Qt?[q]:[])))}))):qo(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):oB(e,t,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,t).pipe(Ye(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):uB(t))):Y({routes:[],injector:e})}};function vB(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function IB(n){let e=n.value.routeConfig;return e&&e.path===""}function zA(n){let e=[],t=new Set;for(let r of n){if(!IB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zA(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!t.has(r))}function vA(n){return n.data||{}}function IA(n){return n.resolve||{}}function wB(n,e,t,r,i,s){return Le(o=>yB(n,e,t,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:c})=>pe(P({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function EB(n,e){return Le(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of WA(c))o.add(l);let a=0;return Ae(o).pipe(Zi(c=>s.has(c)?CB(c,r,n,e):(c.data=qh(c,c.parent,n).resolve,Y(void 0))),Ye(()=>a++),yo(1),Le(c=>a===o.size?Y(t):Nt))})}function WA(n){let e=n.children.map(t=>WA(t)).flat();return[n,...e]}function CB(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!UA(i)&&(s[nu]=i.title),DB(s,n,e,r).pipe(Z(o=>(n._resolvedData=o,n.data=qh(n,n.parent,t).resolve,null)))}function DB(n,e,t,r){let i=w_(n);if(i.length===0)return Y({});let s={};return Ae(i).pipe(Le(o=>bB(n[o],e,t,r).pipe(kn(),Ye(a=>{if(a instanceof Jc)throw zh(new Yo,a);s[o]=a}))),yo(1),vc(s),ri(o=>HA(o)?Nt:ti(o)))}function bB(n,e,t,r){let i=iu(e)??r,s=ea(n,i),o=s.resolve?s.resolve(e,t):Hn(i,()=>s(e,t));return Ei(o)}function v_(n){return pt(e=>{let t=n(e);return t?Ae(t).pipe(Z(()=>e)):Y(e)})}var KA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[nu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(TB),providedIn:"root"})}}return n})(),TB=(()=>{class n extends KA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(K(hA))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),au=new B("",{providedIn:"root",factory:()=>({})}),SB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=sn({type:n,selectors:[["ng-component"]],standalone:!0,features:[cn],decls:1,vars:0,template:function(r,i){r&1&&ls(0,"router-outlet")},dependencies:[W_],encapsulation:2})}}return n})();function K_(n){let e=n.children&&n.children.map(K_),t=e?pe(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=SB),t}var tu=new B(""),Q_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Eh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ei(t.loadComponent()).pipe(Z(QA),Ye(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ic(()=>{this.componentLoaders.delete(t)})),i=new Jr(r,()=>new $e).pipe(co());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=AB(r,this.compiler,t,this.onLoadEndListener).pipe(Ic(()=>{this.childrenLoaders.delete(r)})),o=new Jr(s,()=>new $e).pipe(co());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AB(n,e,t,r){return Ei(n.loadChildren()).pipe(Z(QA),Le(i=>i instanceof Ac||Array.isArray(i)?Y(i):Ae(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(tu,[],{optional:!0,self:!0}).flat()),{routes:o.map(K_),injector:s}}))}function RB(n){return n&&typeof n=="object"&&"default"in n}function QA(n){return RB(n)?n.default:n}var Y_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(NB),providedIn:"root"})}}return n})(),NB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YA=new B(""),ZA=new B("");function MB(n,e,t){let r=n.get(ZA),i=n.get(Ut);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),xB(n))),{onViewTransitionCreated:c}=r;return c&&Hn(n,()=>c({transition:a,from:e,to:t})),o})}function xB(n){return new Promise(e=>{zy({read:()=>setTimeout(e)},{injector:n})})}var PB=new B(""),Z_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=O(Q_),this.environmentInjector=O(Gt),this.urlSerializer=O(ru),this.rootContexts=O(su),this.location=O(Ho),this.inputBindingEnabled=O(Qh,{optional:!0})!==null,this.titleStrategy=O(KA),this.options=O(au,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Y_),this.createViewTransition=O(YA,{optional:!0}),this.navigationErrorHandler=O(PB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=i=>this.events.next(new R_(i)),r=i=>this.events.next(new N_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Gc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ot(s=>s.id!==0),Z(s=>pe(P({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),pt(s=>{let o=!1,a=!1;return Y(s).pipe(pt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Yt.SupersededByNewNavigation),Nt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.rawUrl),f,Uh.IgnoredSameUrlNavigation)),c.resolve(!1),Nt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Y(c).pipe(pt(f=>{let g=this.transitions?.getValue();return this.events.next(new Zo(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Nt:Promise.resolve(f)}),wB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=pe(P({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new jh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:w,extras:N}=c,R=new Zo(f,this.urlSerializer.serialize(g),y,w);this.events.next(R);let F=LA(this.rootComponentType).snapshot;return this.currentTransition=s=pe(P({},c),{targetSnapshot:F,urlAfterRedirects:g,extras:pe(P({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Y(s)}else{let f="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Uh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Nt}}),Ye(c=>{let l=new b_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Z(c=>(this.currentTransition=s=pe(P({},c),{guards:B2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),J2(this.environmentInjector,c=>this.events.next(c)),Ye(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw zh(this.urlSerializer,c.guardsResult);let l=new T_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ot(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Yt.GuardRejected),!1)),v_(c=>{if(c.guards.canActivateChecks.length)return Y(c).pipe(Ye(l=>{let d=new S_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),pt(l=>{let d=!1;return Y(l).pipe(EB(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Yt.NoDataFromResolver)}}))}),Ye(l=>{let d=new A_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),v_(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ye(g=>{d.component=g}),Z(()=>{})));for(let g of d.children)f.push(...l(g));return f};return _c(l(c.targetSnapshot.root)).pipe(ii(null),it(1))}),v_(()=>this.afterPreactivation()),pt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Ae(d).pipe(Z(()=>s)):Y(s)}),Z(c=>{let l=F2(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=pe(P({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ye(()=>{this.events.next(new Yc)}),j2(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),it(1),Ye({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),im(this.transitionAbortSubject.pipe(Ye(c=>{throw c}))),Ic(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ri(c=>{if(a=!0,$A(c))this.events.next(new Ar(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),U2(c)?this.events.next(new Jo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Qc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Hn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Jc){let{message:f,cancellationCode:g}=zh(this.urlSerializer,d);this.events.next(new Ar(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Jo(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Nt}))}))}cancelNavigationTransition(t,r,i){let s=new Ar(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kB(n){return n!==Gc}var OB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(FB),providedIn:"root"})}}return n})(),G_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},FB=(()=>{class n extends G_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>O(LB),providedIn:"root"})}}return n})(),LB=(()=>{class n extends JA{constructor(){super(...arguments),this.location=O(Ho),this.urlSerializer=O(ru),this.options=O(au,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Y_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=LA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Zo)this.stateMemento=this.createStateMemento();else if(t instanceof wi)this.rawUrlTree=r.initialUrl;else if(t instanceof jh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Yc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ar&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Qc?this.restoreHistory(r,!0):t instanceof Nr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Rr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=P(P({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hc||{});function XA(n,e){n.events.pipe(ot(t=>t instanceof Nr||t instanceof Ar||t instanceof Qc||t instanceof wi),Z(t=>t instanceof Nr||t instanceof wi?Hc.COMPLETE:(t instanceof Ar?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?Hc.REDIRECTING:Hc.FAILED),ot(t=>t!==Hc.REDIRECTING),it(1)).subscribe(()=>{e()})}function VB(n){throw n}var UB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ih),this.stateManager=O(JA),this.options=O(au,{optional:!0})||{},this.pendingTasks=O(Vo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Z_),this.urlSerializer=O(ru),this.location=O(Ho),this.urlHandlingStrategy=O(Y_),this._events=new $e,this.errorHandler=this.options.errorHandler||VB,this.navigated=!1,this.routeReuseStrategy=O(OB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(tu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Qh,{optional:!0}),this.eventsSubscription=new ze,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ar&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nr)this.navigated=!0;else if(r instanceof Jo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kB(i.source)},o);this.scheduleNavigation(a,Gc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$B(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=P({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(K_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=P(P({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=PA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return kA(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Wc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Gc,null,r)}navigate(t,r={skipLocationChange:!1}){return BB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},UB):r===!1?i=P({},jB):i=r,Wc(t))return fA(this.currentUrlTree,t,i);let s=this.parseUrl(t);return fA(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return XA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}function $B(n){return!(n instanceof Yc)&&!(n instanceof Jo)}var Kh=class{};var HB=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ot(t=>t instanceof Nr),Zi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=yh(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ae(i).pipe(ni())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let s=i.pipe(Le(o=>o===null?Y(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ae([s,o]).pipe(ni())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(K(wt),K(Eh),K(Gt),K(Kh),K(Q_))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eR=new B(""),qB=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wi&&t.code===Uh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){e0()}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function tR(n,...e){return Ft([{provide:tu,multi:!0,useValue:n},[],{provide:bn,useFactory:nR,deps:[wt]},{provide:wh,multi:!0,useFactory:rR},e.map(t=>t.\u0275providers)])}function nR(n){return n.routerState.root}function cu(n,e){return{\u0275kind:n,\u0275providers:e}}function rR(){let n=O(Ze);return e=>{let t=n.get(zn);if(e!==t.components[0])return;let r=n.get(wt),i=n.get(iR);n.get(J_)===1&&r.initialNavigation(),n.get(sR,null,ce.Optional)?.setUpPreloading(),n.get(eR,null,ce.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iR=new B("",{factory:()=>new $e}),J_=new B("",{providedIn:"root",factory:()=>1});function GB(){return cu(2,[{provide:J_,useValue:0},{provide:$o,multi:!0,deps:[Ze],useFactory:e=>{let t=e.get(Y0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(wt),s=e.get(iR);XA(i,()=>{r(!0)}),e.get(Z_).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))}}])}function zB(){return cu(3,[{provide:$o,multi:!0,useFactory:()=>{let e=O(wt);return()=>{e.setUpLocationChangeListener()}}},{provide:J_,useValue:2}])}var sR=new B("");function WB(n){return cu(0,[{provide:sR,useExisting:HB},{provide:Kh,useExisting:n}])}function KB(){return cu(8,[yA,{provide:Qh,useExisting:yA}])}function QB(n){let e=[{provide:YA,useValue:MB},{provide:ZA,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return cu(9,e)}var wA=new B("ROUTER_FORROOT_GUARD"),YB=[Ho,{provide:ru,useClass:Yo},wt,su,{provide:bn,useFactory:nR,deps:[wt]},Q_,[]],Zh=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[YB,[],{provide:tu,multi:!0,useValue:t},{provide:wA,useFactory:e$,deps:[[wt,new We,new rh]]},{provide:au,useValue:r||{}},r?.useHash?JB():XB(),ZB(),r?.preloadingStrategy?WB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?t$(r):[],r?.bindToComponentInputs?KB().\u0275providers:[],r?.enableViewTransitions?QB().\u0275providers:[],n$()]}}static forChild(t){return{ngModule:n,providers:[{provide:tu,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(K(wA,8))}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({})}}return n})();function ZB(){return{provide:eR,useFactory:()=>{let n=O(rA),e=O(_e),t=O(au),r=O(Z_),i=O(ru);return t.scrollOffset&&n.setOffset(t.scrollOffset),new qB(i,r,n,e,t)}}}function JB(){return{provide:ps,useClass:J0}}function XB(){return{provide:ps,useClass:o_}}function e$(n){return"guarded"}function t$(n){return[n.initialNavigation==="disabled"?zB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?GB().\u0275providers:[]]}var EA=new B("");function n$(){return[{provide:EA,useFactory:rR},{provide:wh,multi:!0,useExisting:EA}]}var ev={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var L=function(n,e){if(!n)throw _s(e)},_s=function(n){return new Error("Firebase Database ("+ev.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var aR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ef={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(g=64)),r.push(t[d],t[f],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new tv;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let w=l<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rv=function(n){let e=aR(n);return ef.encodeByteArray(e,!0)},uu=function(n){return rv(n).replace(/\./g,"")},lu=function(n){try{return ef.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cR(n){return uR(void 0,n)}function uR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!i$(t)||(n[t]=uR(n[t],e[t]));return n}function i$(n){return n!=="__proto__"}function s$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var o$=()=>s$().__FIREBASE_DEFAULTS__,a$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},c$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&lu(n[1]);return e&&JSON.parse(e)},tf=()=>{try{return o$()||a$()||c$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iv=n=>{var e,t;return(t=(e=tf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},nf=n=>{let e=iv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sv=()=>{var n;return(n=tf())===null||n===void 0?void 0:n.config},ov=n=>{var e;return(e=tf())===null||e===void 0?void 0:e[`_${n}`]};var ys=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function rf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[uu(JSON.stringify(t)),uu(JSON.stringify(o)),""].join(".")}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function du(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function u$(){var n;let e=(n=tf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){let n=ct();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Kn(){return ev.NODE_CLIENT===!0||ev.NODE_ADMIN===!0}function fR(){return!u$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function av(){try{return typeof indexedDB=="object"}catch{return!1}}function pR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var l$="FirebaseError",Zt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=l$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}},Mr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?d$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zt(i,a,r)}};function d$(n,e){return n.replace(h$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var h$=/\{\$([^}]+)}/g;function ta(n){return JSON.parse(n)}function ut(n){return JSON.stringify(n)}var gR=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=ta(lu(s[0])||""),t=ta(lu(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var mR=function(n){let e=gR(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},yR=function(n){let e=gR(n).claims;return typeof e=="object"&&e.admin===!0};function Qn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function vs(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function hu(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fu(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Is(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(oR(s)&&oR(o)){if(!Is(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oR(n){return n!==null&&typeof n=="object"}function ws(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Xh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)r[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){let g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):f<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let g=(i<<5|i>>>27)+l+c+d+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function _R(n,e){let t=new nv(n,e);return t.subscribe.bind(t)}var nv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");f$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=X_),i.error===void 0&&(i.error=X_),i.complete===void 0&&(i.complete=X_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function f$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function X_(){}function vR(n,e){return`${n} failed: ${e} argument `}var IR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,L(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pu=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var tX=4*60*60*1e3;function Je(n){return n&&n._delegate?n._delegate:n}var jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Es="[DEFAULT]";var of=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ys;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g$(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:p$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function p$(n){return n===Es?void 0:n}function g$(n){return n.instantiationMode==="EAGER"}var gu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new of(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var m$=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),y$={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},_$=de.INFO,v$={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},I$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=v$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=_$,this._logHandler=I$,this._userLogHandler=null,m$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var w$=(n,e)=>e.some(t=>n instanceof t),wR,ER;function E$(){return wR||(wR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C$(){return ER||(ER=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CR=new WeakMap,uv=new WeakMap,DR=new WeakMap,cv=new WeakMap,dv=new WeakMap;function D$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Zn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&CR.set(t,n)}).catch(()=>{}),dv.set(e,n),e}function b$(n){if(uv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});uv.set(n,e)}var lv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bR(n){lv=n(lv)}function T$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(af(this),e,...t);return DR.set(r,e.sort?e.sort():[e]),Zn(r)}:C$().includes(n)?function(...e){return n.apply(af(this),e),Zn(CR.get(this))}:function(...e){return Zn(n.apply(af(this),e))}}function S$(n){return typeof n=="function"?T$(n):(n instanceof IDBTransaction&&b$(n),w$(n,E$())?new Proxy(n,lv):n)}function Zn(n){if(n instanceof IDBRequest)return D$(n);if(cv.has(n))return cv.get(n);let e=S$(n);return e!==n&&(cv.set(n,e),dv.set(e,n)),e}var af=n=>dv.get(n);function SR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Zn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Zn(o.result),c.oldVersion,c.newVersion,Zn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var A$=["get","getKey","getAll","getAllKeys","count"],R$=["put","add","delete","clear"],hv=new Map;function TR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hv.get(e))return hv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=R$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||A$.includes(t)))return;let s=function(o,...a){return E(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return hv.set(e,s),s}bR(n=>pe(P({},n),{get:(e,t,r)=>TR(e,t)||n.get(e,t,r),has:(e,t)=>!!TR(e,t)||n.has(e,t)}));var pv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function N$(n){let e=n.getComponent();return e?.type==="VERSION"}var gv="@firebase/app",AR="0.10.13";var xr=new Yn("@firebase/app"),M$="@firebase/app-compat",x$="@firebase/analytics-compat",P$="@firebase/analytics",k$="@firebase/app-check-compat",O$="@firebase/app-check",F$="@firebase/auth",L$="@firebase/auth-compat",V$="@firebase/database",U$="@firebase/data-connect",j$="@firebase/database-compat",B$="@firebase/functions",$$="@firebase/functions-compat",H$="@firebase/installations",q$="@firebase/installations-compat",G$="@firebase/messaging",z$="@firebase/messaging-compat",W$="@firebase/performance",K$="@firebase/performance-compat",Q$="@firebase/remote-config",Y$="@firebase/remote-config-compat",Z$="@firebase/storage",J$="@firebase/storage-compat",X$="@firebase/firestore",eH="@firebase/vertexai-preview",tH="@firebase/firestore-compat",nH="firebase",rH="10.14.1";var mv="[DEFAULT]",iH={[gv]:"fire-core",[M$]:"fire-core-compat",[P$]:"fire-analytics",[x$]:"fire-analytics-compat",[O$]:"fire-app-check",[k$]:"fire-app-check-compat",[F$]:"fire-auth",[L$]:"fire-auth-compat",[V$]:"fire-rtdb",[U$]:"fire-data-connect",[j$]:"fire-rtdb-compat",[B$]:"fire-fn",[$$]:"fire-fn-compat",[H$]:"fire-iid",[q$]:"fire-iid-compat",[G$]:"fire-fcm",[z$]:"fire-fcm-compat",[W$]:"fire-perf",[K$]:"fire-perf-compat",[Q$]:"fire-rc",[Y$]:"fire-rc-compat",[Z$]:"fire-gcs",[J$]:"fire-gcs-compat",[X$]:"fire-fst",[tH]:"fire-fst-compat",[eH]:"fire-vertex","fire-js":"fire-js",[nH]:"fire-js-all"};var mu=new Map,sH=new Map,yv=new Map;function RR(n,e){try{n.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jn(n){let e=n.name;if(yv.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;yv.set(e,n);for(let t of mu.values())RR(t,n);for(let t of sH.values())RR(t,n);return!0}function Cs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pr(n){return n.settings!==void 0}var oH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new Mr("app","Firebase",oH);var _v=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}};var Xn=rH;function wv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ci.create("bad-app-name",{appName:String(i)});if(t||(t=sv()),!t)throw Ci.create("no-options");let s=mu.get(i);if(s){if(Is(t,s.options)&&Is(r,s.config))return s;throw Ci.create("duplicate-app",{appName:i})}let o=new gu(i);for(let c of yv.values())o.addComponent(c);let a=new _v(t,r,o);return mu.set(i,a),a}function Di(n=mv){let e=mu.get(n);if(!e&&n===mv&&sv())return wv();if(!e)throw Ci.create("no-app",{appName:n});return e}function cf(){return Array.from(mu.values())}function je(n,e,t){var r;let i=(r=iH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(a.join(" "));return}Jn(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var aH="firebase-heartbeat-database",cH=1,yu="firebase-heartbeat-store",fv=null;function PR(){return fv||(fv=SR(aH,cH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ci.create("idb-open",{originalErrorMessage:n.message})})),fv}function uH(n){return E(this,null,function*(){try{let t=(yield PR()).transaction(yu),r=yield t.objectStore(yu).get(kR(n));return yield t.done,r}catch(e){if(e instanceof Zt)xr.warn(e.message);else{let t=Ci.create("idb-get",{originalErrorMessage:e?.message});xr.warn(t.message)}}})}function NR(n,e){return E(this,null,function*(){try{let r=(yield PR()).transaction(yu,"readwrite");yield r.objectStore(yu).put(e,kR(n)),yield r.done}catch(t){if(t instanceof Zt)xr.warn(t.message);else{let r=Ci.create("idb-set",{originalErrorMessage:t?.message});xr.warn(r.message)}}})}function kR(n){return`${n.name}!${n.options.appId}`}var lH=1024,dH=30*24*60*60*1e3,vv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Iv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=MR();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=dH}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xr.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=MR(),{heartbeatsToSend:r,unsentEntries:i}=hH(this._heartbeatsCache.heartbeats),s=uu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return xr.warn(t),""}})}};function MR(){return new Date().toISOString().substring(0,10)}function hH(n,e=lH){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Iv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return av()?pR().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield uH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xR(n){return uu(JSON.stringify({version:2,heartbeats:n})).length}function fH(n){Jn(new jt("platform-logger",e=>new pv(e),"PRIVATE")),Jn(new jt("heartbeat",e=>new vv(e),"PRIVATE")),je(gv,AR,n),je(gv,AR,"esm2017"),je("fire-js","")}fH("");var pH="firebase",gH="10.14.1";je(pH,gH,"app");var kr=new mr("ANGULARFIRE2_VERSION");function ra(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var bs=(n,e)=>{let t=e?[e]:cf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},bi=class{constructor(){return bs(mH)}},mH="app-check";function na(){}var uf=class{zone;delegate;constructor(e,t=Qg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Ev=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na)),t.pipe(Ye({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ti=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new uf(Zone.current)),this.insideAngular=t.run(()=>new uf(Zone.current,fo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(K(_e))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function yH(n){return lf().ngZone.runOutsideAngular(()=>n())}function Ds(n){return lf().ngZone.run(()=>n())}function _H(n){return vH(lf())(n)}function vH(n){return function(t){return t=t.lift(new Ev(n.ngZone)),t.pipe(ei(n.outsideAngular),Xr(n.insideAngular))}}var IH=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ds(()=>n.apply(void 0,r))},gt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Ds(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na))),r[s]=IH(r[s],t));let i=yH(()=>n.apply(this,r));if(!e)if(i instanceof ne){let s=lf();return i.pipe(ei(s.outsideAngular),Xr(s.insideAngular))}else return Ds(()=>i);return i instanceof ne?i.pipe(_H):i instanceof Promise?Ds(()=>new Promise((s,o)=>i.then(a=>Ds(()=>s(a)),a=>Ds(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Ds(()=>i)};var Tn=class{constructor(e){return e}},Or=class{constructor(){return cf()}};function wH(n){return n&&n.length===1?n[0]:new Tn(Di())}var Cv=new B("angularfire2._apps"),EH={provide:Tn,useFactory:wH,deps:[[new We,Cv]]},CH={provide:Or,deps:[[new We,Cv]]};function DH(n){return(e,t)=>{let r=t.get(zt);je("angularfire",kr.full,"core"),je("angularfire",kr.full,"app"),je("angular",P0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tn(i)}}function OR(n,...e){return Ft([EH,CH,{provide:Cv,useFactory:DH(n),multi:!0,deps:[_e,Ze,Ti,...e]}])}var FR=gt(wv,!0);function ZR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JR=ZR,XR=new Mr("auth","Firebase",ZR());var mf=new Yn("@firebase/auth");function bH(n,...e){mf.logLevel<=de.WARN&&mf.warn(`Auth (${Xn}): ${n}`,...e)}function hf(n,...e){mf.logLevel<=de.ERROR&&mf.error(`Auth (${Xn}): ${n}`,...e)}function Ai(n,...e){throw Hv(n,...e)}function Ss(n,...e){return Hv(n,...e)}function eN(n,e,t){let r=Object.assign(Object.assign({},JR()),{[e]:t});return new Mr("auth","Firebase",r).create(e,{appName:n.name})}function Ts(n){return eN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XR.create(n,...e)}function te(n,e,...t){if(!n)throw Hv(e,...t)}function Fr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw hf(e),new Error(e)}function Ri(n,e){n||Fr(e)}function Sv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function TH(){return LR()==="http:"||LR()==="https:"}function LR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function SH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TH()||dR()||"connection"in navigator)?navigator.onLine:!0}function AH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var As=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=du()||sf()}get(){return SH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qv(n,e){Ri(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var RH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var NH=new As(3e4,6e4);function Gv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function sa(s,o,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return tN(n,i,()=>E(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=ws(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return lR()||(y.referrerPolicy="no-referrer"),yf.fetch()(nN(n,n.config.apiHost,t,f),y)}))})}function tN(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},RH),e);try{let i=new Av(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw df(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw df(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw df(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eN(n,d,l);Ai(n,d)}}catch(i){if(i instanceof Zt)throw i;Ai(n,"network-request-failed",{message:String(i)})}})}function MH(s,o,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let l=yield sa(n,e,t,r,i);return"mfaPendingCredential"in l&&Ai(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function nN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?qv(n.config,i):`${n.config.apiScheme}://${i}`}var Av=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),NH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function df(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ss(n,e,r);return i.customData._tokenResponse=t,i}function xH(n,e){return E(this,null,function*(){return sa(n,"POST","/v1/accounts:delete",e)})}function rN(n,e){return E(this,null,function*(){return sa(n,"POST","/v1/accounts:lookup",e)})}function _u(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zv(n,e=!1){return E(this,null,function*(){let t=Je(n),r=yield t.getIdToken(e),i=Wv(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:_u(Dv(i.auth_time)),issuedAtTime:_u(Dv(i.iat)),expirationTime:_u(Dv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Dv(n){return Number(n)*1e3}function Wv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{let i=lu(t);return i?JSON.parse(i):(hf("Failed to decode base64 JWT payload"),null)}catch(i){return hf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VR(n){let e=Wv(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Iu(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Zt&&PH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function PH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Rv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _f(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Iu(n,rN(t,{idToken:r}));te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iN(s.providerUserInfo):[],a=kH(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Kv(n){return E(this,null,function*(){let e=Je(n);yield _f(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function kH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iN(n){return n.map(e=>{var{providerId:t}=e,r=Zg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function OH(n,e){return E(this,null,function*(){let t=yield tN(n,{},()=>E(this,null,function*(){let r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=nN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function FH(n,e){return E(this,null,function*(){return sa(n,"POST","/v2/accounts:revokeToken",Gv(n,e))})}var vu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=VR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield OH(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Fr("not implemented")}};function Si(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ia=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Iu(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return zv(this,e)}reload(){return Kv(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield _f(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Pr(this.auth.app))return Promise.reject(Ts(this.auth));let e=yield this.getIdToken();return yield Iu(this,xH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=t.createdAt)!==null&&l!==void 0?l:void 0,U=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:q,emailVerified:ie,isAnonymous:ke,providerData:se,stsTokenManager:D}=t;te(q&&D,e,"internal-error");let _=vu.fromJSON(this.name,D);te(typeof q=="string",e,"internal-error"),Si(f,e.name),Si(g,e.name),te(typeof ie=="boolean",e,"internal-error"),te(typeof ke=="boolean",e,"internal-error"),Si(y,e.name),Si(w,e.name),Si(N,e.name),Si(R,e.name),Si(F,e.name),Si(U,e.name);let v=new n({uid:q,auth:e,email:g,emailVerified:ie,displayName:f,isAnonymous:ke,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:F,lastLoginAt:U});return se&&Array.isArray(se)&&(v.providerData=se.map(C=>Object.assign({},C))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new vu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield _f(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?iN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new vu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var UR=new Map;function Lr(n){Ri(n instanceof Function,"Expected a class definition");let e=UR.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UR.set(n,e),e)}var LH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Nv=LH;function ff(n,e,t){return`firebase:${n}:${e}:${t}`}var vf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ff(this.userKey,i.apiKey,s),this.fullPersistenceKey=ff("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ia._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Lr(Nv),e,r);let i=(yield Promise.all(t.map(l=>E(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Lr(Nv),o=ff(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let f=ia._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>E(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function jR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lN(e))return"Blackberry";if(dN(e))return"Webos";if(oN(e))return"Safari";if((e.includes("chrome/")||aN(e))&&!e.includes("edge/"))return"Chrome";if(uN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sN(n=ct()){return/firefox\//i.test(n)}function oN(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aN(n=ct()){return/crios\//i.test(n)}function cN(n=ct()){return/iemobile/i.test(n)}function uN(n=ct()){return/android/i.test(n)}function lN(n=ct()){return/blackberry/i.test(n)}function dN(n=ct()){return/webos/i.test(n)}function Qv(n=ct()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VH(n=ct()){var e;return Qv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UH(){return hR()&&document.documentMode===10}function hN(n=ct()){return Qv(n)||uN(n)||dN(n)||lN(n)||/windows phone/i.test(n)||cN(n)}function fN(n,e=[]){let t;switch(n){case"Browser":t=jR(ct());break;case"Worker":t=`${jR(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xn}/${r}`}var Mv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jH(t){return E(this,arguments,function*(n,e={}){return sa(n,"GET","/v2/passwordPolicy",Gv(n,e))})}var BH=6,xv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:BH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Pv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new If(this),this.idTokenSubscription=new If(this),this.beforeStateQueue=new Mv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield rN(this,{idToken:e}),r=yield ia._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Pr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield _f(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=AH()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Pr(this.app))return Promise.reject(Ts(this));let t=e?Je(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Pr(this.app)?Promise.reject(Ts(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Pr(this.app)?Promise.reject(Ts(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield jH(this),t=new xv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield FH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Lr(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield vf.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&bH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Yv(n){return Je(n)}var If=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $H(n){Zv=n}function HH(n){return Zv.loadJS(n)}function qH(){return Zv.gapiScript}function pN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Jv(n,e){let t=Cs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Is(s,e??{}))return i;Ai(i,"already-initialized")}return t.initialize({options:e})}function GH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Xv(n,e,t){let r=Yv(n);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=gN(e),{host:o,port:a}=zH(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||WH()}function gN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zH(n){let e=gN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:BR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:BR(o)}}}function BR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function WH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}};function bv(n,e){return E(this,null,function*(){return MH(n,"POST","/v1/accounts:signInWithIdp",Gv(n,e))})}var Ef=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kv=class extends Ef{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Eu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield ia._fromIdTokenResponse(e,r,i),o=$R(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$R(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $R(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ov=class n extends Zt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function mN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ov._fromErrorAndOperation(n,s,e,r):s})}function KH(n,e,t=!1){return E(this,null,function*(){let r=yield Iu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Eu._forOperation(n,"link",r)})}function QH(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Pr(r.app))return Promise.reject(Ts(r));let i="reauthenticate";try{let s=yield Iu(n,mN(r,i,e,n),t);te(s.idToken,r,"internal-error");let o=Wv(s.idToken);te(o,r,"internal-error");let{sub:a}=o;return te(n.uid===a,r,"user-mismatch"),Eu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ai(r,"user-mismatch"),s}})}function YH(n,e,t=!1){return E(this,null,function*(){if(Pr(n.app))return Promise.reject(Ts(n));let r="signIn",i=yield mN(n,r,e),s=yield Eu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function eI(n,e,t,r){return Je(n).onIdTokenChanged(e,t,r)}function tI(n,e,t){return Je(n).beforeAuthStateChanged(e,t)}var Cf="__sak";var Df=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ZH=1e3,JH=10,XH=(()=>{class n extends Df{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);UH()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,JH):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},ZH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Zr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Zr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Zr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),yN=XH;var eq=(()=>{class n extends Df{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),nI=eq;function tq(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var nq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>E(this,null,function*(){return d(r.origin,o)})),l=yield tq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function _N(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Fv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=_N("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function er(){return window}function rq(n){er().location.href=n}function vN(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}function iq(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function sq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function oq(){return vN()?self:null}var IN="firebaseLocalStorageDb",aq=1,bf="firebaseLocalStorage",wN="fbase_key",Rs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Sf(n,e){return n.transaction([bf],e?"readwrite":"readonly").objectStore(bf)}function cq(){let n=indexedDB.deleteDatabase(IN);return new Rs(n).toPromise()}function Lv(){let n=indexedDB.open(IN,aq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(bf,{keyPath:wN})}catch(i){t(i)}}),n.addEventListener("success",()=>E(this,null,function*(){let r=n.result;r.objectStoreNames.contains(bf)?e(r):(r.close(),yield cq(),e(yield Lv()))}))})}function HR(n,e,t){return E(this,null,function*(){let r=Sf(n,!0).put({[wN]:e,value:t});return new Rs(r).toPromise()})}function uq(n,e){return E(this,null,function*(){let t=Sf(n,!1).get(e),r=yield new Rs(t).toPromise();return r===void 0?null:r.value})}function qR(n,e){let t=Sf(n,!0).delete(e);return new Rs(t).toPromise()}var lq=800,dq=3,hq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Lv(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>dq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return vN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=nq._getInstance(oq()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield iq(),!this.activeServiceWorker)return;this.sender=new Fv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||sq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Lv();return yield HR(t,Cf,"1"),yield qR(t,Cf),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>HR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>uq(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>qR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=Sf(s,!1).getAll();return new Rs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),lq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),EN=hq;var YX=pN("rcb"),ZX=new As(3e4,6e4);function fq(n,e){return e?Lr(e):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Cu=class extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bv(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function pq(n){return YH(n.auth,new Cu(n),n.bypassAuthState)}function gq(n){let{auth:e,user:t}=n;return te(t,e,"internal-error"),QH(t,new Cu(n),n.bypassAuthState)}function mq(n){return E(this,null,function*(){let{auth:e,user:t}=n;return te(t,e,"internal-error"),KH(t,new Cu(n),n.bypassAuthState)})}var Vv=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pq;case"linkViaPopup":case"linkViaRedirect":return mq;case"reauthViaPopup":case"reauthViaRedirect":return gq;default:Ai(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var JX=new As(2e3,1e4);var yq="pendingRedirect",pf=new Map,Uv=class n extends Vv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=pf.get(this.auth._key());if(!e){try{let r=(yield _q(this.resolver,this.auth))?yield Zr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Zr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Zr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function _q(n,e){return E(this,null,function*(){let t=wq(e),r=Iq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function vq(n,e){pf.set(n._key(),e)}function Iq(n){return Lr(n._redirectPersistence)}function wq(n){return ff(yq,n.config.apiKey,n.name)}function Eq(n,e,t=!1){return E(this,null,function*(){if(Pr(n.app))return Promise.reject(Ts(n));let r=Yv(n),i=fq(r,e),o=yield new Uv(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Cq=10*60*1e3,jv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!CN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ss(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cq&&this.cachedEventUids.clear(),this.cachedEventUids.has(GR(e))}saveEventToCache(e){this.cachedEventUids.add(GR(e)),this.lastProcessedEventTime=Date.now()}};function GR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Dq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CN(n);default:return!1}}function bq(t){return E(this,arguments,function*(n,e={}){return sa(n,"GET","/v1/projects",e)})}var Tq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sq=/^https?/;function Aq(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield bq(n);for(let t of e)try{if(Rq(t))return}catch{}Ai(n,"unauthorized-domain")})}function Rq(n){let e=Sv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Sq.test(t))return!1;if(Tq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Nq=new As(3e4,6e4);function zR(){let n=er().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Mq(n){return new Promise((e,t)=>{var r,i,s;function o(){zR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zR(),t(Ss(n,"network-request-failed"))},timeout:Nq.get()})}if(!((i=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=er().gapi)===null||s===void 0)&&s.load)o();else{let a=pN("iframefcb");return er()[a]=()=>{gapi.load?o():t(Ss(n,"network-request-failed"))},HH(`${qH()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw gf=null,e})}var gf=null;function xq(n){return gf=gf||Mq(n),gf}var Pq=new As(5e3,15e3),kq="__/auth/iframe",Oq="emulator/auth/iframe",Fq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vq(n){let e=n.config;te(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qv(e,Oq):`https://${n.config.authDomain}/${kq}`,r={apiKey:e.apiKey,appName:n.name,v:Xn},i=Lq.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ws(r).slice(1)}`}function Uq(n){return E(this,null,function*(){let e=yield xq(n),t=er().gapi;return te(t,n,"internal-error"),e.open({where:document.body,url:Vq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fq,dontclear:!0},r=>new Promise((i,s)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Ss(n,"network-request-failed"),a=er().setTimeout(()=>{s(o)},Pq.get());function c(){er().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var jq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bq=500,$q=600,Hq="_blank",qq="http://localhost",Tf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Gq(n,e,t,r=Bq,i=$q){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},jq),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ct().toLowerCase();t&&(a=aN(l)?Hq:t),sN(l)&&(e=e||qq,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(VH(l)&&a!=="_self")return zq(e||"",a),new Tf(null);let f=window.open(e||"",a,d);te(f,n,"popup-blocked");try{f.focus()}catch{}return new Tf(f)}function zq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Wq="__/auth/handler",Kq="emulator/auth/handler",Qq=encodeURIComponent("fac");function WR(n,e,t,r,i,s){return E(this,null,function*(){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xn,eventId:i};if(e instanceof Ef){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",hu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof kv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${Qq}=${encodeURIComponent(c)}`:"";return`${Yq(n)}?${ws(a).slice(1)}${l}`})}function Yq({config:n}){return n.emulator?qv(n,Kq):`https://${n.authDomain}/${Wq}`}var Tv="webStorageSupport",Bv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nI,this._completeRedirectFn=Eq,this._overrideRedirectResult=vq}_openPopup(e,t,r,i){return E(this,null,function*(){var s;Ri((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield WR(e,t,r,Sv(),i);return Gq(e,o,_N())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield WR(e,t,r,Sv(),i);return rq(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ri(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield Uq(e),r=new jv(e);return t.register("authEvent",i=>(te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tv,{type:Tv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Tv];o!==void 0&&t(!!o),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Aq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hN()||oN()||Qv()}},DN=Bv;var KR="@firebase/auth",QR="1.7.9";var $v=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Zq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jq(n){Jn(new jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fN(n)},l=new Pv(r,i,s,c);return GH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new jt("auth-internal",e=>{let t=Yv(e.getProvider("auth").getImmediate());return(r=>new $v(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(KR,QR,Zq(n)),je(KR,QR,"esm2017")}var Xq=5*60,eG=ov("authIdTokenMaxAge")||Xq,YR=null,tG=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>eG)return;let i=t?.token;YR!==i&&(YR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function rI(n=Di()){let e=Cs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Jv(n,{popupRedirectResolver:DN,persistence:[EN,yN,nI]}),r=ov("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=tG(s.toString());tI(t,o,()=>o(t.currentUser)),eI(t,a=>o(a))}}let i=iv("auth");return i&&Xv(t,`http://${i}`),t}function nG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$H({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Ss("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",nG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jq("Browser");var bN="auth",Du=class{constructor(e){return e}},Ns=class{constructor(){return bs(bN)}};var iI=new B("angularfire2.auth-instances");function YG(n,e){let t=ra(bN,n,e);return t&&new Du(t)}function ZG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Du(r)}}var JG={provide:Ns,deps:[[new We,iI]]},XG={provide:Du,useFactory:YG,deps:[[new We,iI],Tn]};function TN(n,...e){return je("angularfire",kr.full,"auth"),Ft([XG,JG,{provide:iI,useFactory:ZG(n),multi:!0,deps:[_e,Ze,Ti,Or,[new We,bi],...e]}])}var SN=gt(rI,!0);var AN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RN={};var Ni,sI;(function(){var n;function e(D,_){function v(){}v.prototype=_.prototype,D.D=_.prototype,D.prototype=new v,D.prototype.constructor=D,D.C=function(C,b,S){for(var I=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)I[cr-2]=arguments[cr];return _.prototype[b].apply(C,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,v){v||(v=0);var C=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)C[b]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(b=0;16>b;++b)C[b]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=D.g[0],v=D.g[1],b=D.g[2];var S=D.g[3],I=_+(S^v&(b^S))+C[0]+3614090360&4294967295;_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[3]+3250441966&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[4]+4118548399&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[7]+4249261313&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[8]+1770035416&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[11]+2304563134&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[12]+1804603682&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[15]+1236535329&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(b^S&(v^b))+C[1]+4129170786&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[0]+3921069994&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[5]+3593408605&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[4]+3889429448&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[9]+568446438&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[8]+1163531501&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[13]+2850285829&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[12]+2368359562&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(v^b^S)+C[5]+4294588738&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[14]+4259657740&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[1]+2763975236&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[10]+3200236656&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[13]+681279174&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[6]+76029189&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[9]+3654602809&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[2]+3299628645&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(b^(v|~S))+C[0]+4096336452&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[5]+4237533241&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[12]+1700485571&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[1]+2240044497&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[8]+1873313359&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[13]+1309151649&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[4]+4149444226&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var v=_-this.blockSize,C=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=v;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<_;)if(C[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<_;)if(C[b++]=D[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var v=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=v&255,v/=256;for(this.u(D),D=Array(16),_=v=0;4>_;++_)for(var C=0;32>C;C+=8)D[v++]=this.g[_]>>>C&255;return D};function s(D,_){var v=a;return Object.prototype.hasOwnProperty.call(v,D)?v[D]:v[D]=_(D)}function o(D,_){this.h=_;for(var v=[],C=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;C&&S==_||(v[b]=S,C=!1)}this.g=v}var a={};function c(D){return-128<=D&&128>D?s(D,function(_){return new o([_|0],0>_?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return R(l(-D));for(var _=[],v=1,C=0;D>=v;C++)_[C]=D/v|0,v*=4294967296;return new o(_,0)}function d(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return R(d(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(_,8)),C=f,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),C=C.j(S).add(l(I))):(C=C.j(v),C=C.add(l(I)))}return C}var f=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-R(this).m();for(var D=0,_=1,v=0;v<this.g.length;v++){var C=this.i(v);D+=(0<=C?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var _=l(Math.pow(D,6)),v=this,C="";;){var b=ie(v,_).g;v=F(v,b.j(_));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(D);if(v=b,w(v))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=F(this,D),N(D)?-1:w(D)?0:1};function R(D){for(var _=D.g.length,v=[],C=0;C<_;C++)v[C]=~D.g[C];return new o(v,~D.h).add(g)}n.abs=function(){return N(this)?R(this):this},n.add=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0,b=0;b<=_;b++){var S=C+(this.i(b)&65535)+(D.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);C=I>>>16,S&=65535,I&=65535,v[b]=I<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function F(D,_){return D.add(R(_))}n.j=function(D){if(w(this)||w(D))return f;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var _=this.g.length+D.g.length,v=[],C=0;C<2*_;C++)v[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<D.g.length;b++){var S=this.i(C)>>>16,I=this.i(C)&65535,cr=D.i(b)>>>16,Ya=D.i(b)&65535;v[2*C+2*b]+=I*Ya,U(v,2*C+2*b),v[2*C+2*b+1]+=S*Ya,U(v,2*C+2*b+1),v[2*C+2*b+1]+=I*cr,U(v,2*C+2*b+1),v[2*C+2*b+2]+=S*cr,U(v,2*C+2*b+2)}for(C=0;C<_;C++)v[C]=v[2*C+1]<<16|v[2*C];for(C=_;C<2*_;C++)v[C]=0;return new o(v,0)};function U(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function q(D,_){this.g=D,this.h=_}function ie(D,_){if(w(_))throw Error("division by zero");if(w(D))return new q(f,f);if(N(D))return _=ie(R(D),_),new q(R(_.g),R(_.h));if(N(_))return _=ie(D,R(_)),new q(R(_.g),_.h);if(30<D.g.length){if(N(D)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var v=g,C=_;0>=C.l(D);)v=ke(v),C=ke(C);var b=se(v,1),S=se(C,1);for(C=se(C,2),v=se(v,2);!w(C);){var I=S.add(C);0>=I.l(D)&&(b=b.add(v),S=I),C=se(C,1),v=se(v,1)}return _=F(D,b.j(_)),new q(b,_)}for(b=f;0<=D.l(_);){for(v=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(v)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(v),I=S.j(_);N(I)||0<I.l(D);)v-=C,S=l(v),I=S.j(_);w(S)&&(S=g),b=b.add(S),D=F(D,I)}return new q(b,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)&D.i(C);return new o(v,this.h&D.h)},n.or=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)|D.i(C);return new o(v,this.h|D.h)},n.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)^D.i(C);return new o(v,this.h^D.h)};function ke(D){for(var _=D.g.length+1,v=[],C=0;C<_;C++)v[C]=D.i(C)<<1|D.i(C-1)>>>31;return new o(v,D.h)}function se(D,_){var v=_>>5;_%=32;for(var C=D.g.length-v,b=[],S=0;S<C;S++)b[S]=0<_?D.i(S+v)>>>_|D.i(S+v+1)<<32-_:D.i(S+v);return new o(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sI=RN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Ni=RN.Integer=o}).apply(typeof AN<"u"?AN:typeof self<"u"?self:typeof window<"u"?window:{});var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={};var oI,ez,oa,aI,bu,Rf,cI,uI,lI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Af=="object"&&Af];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var T=u[m];if(!(T in p))break e;p=p[T]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,T={next:function(){if(!m&&p<u.length){var A=p++;return{value:h(A,u[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),u.apply(h,T)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,T,A){for(var k=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)k[Ne-2]=arguments[Ne];return h.prototype[T].apply(m,k)}}function N(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function R(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let T=u.length||0,A=m.length||0;u.length=T+A;for(let k=0;k<A;k++)u[T+k]=m[k]}else u.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ie(u){return ie[" "](u),u}ie[" "]=function(){};var ke=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function se(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function D(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)u[p]=m[p];for(let A=0;A<v.length;A++)p=v[A],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=ag;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class cr{constructor(){this.h=this.g=null}add(h,p){let m=Ya.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ya=new F(()=>new Kk,u=>u.reset());class Kk{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Za,Ja=!1,ag=new cr,WC=()=>{let u=a.Promise.resolve(void 0);Za=()=>{u.then(Qk)}};var Qk=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var h=Ya;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Ja=!1};function Wr(){this.s=this.s,this.C=this.C}Wr.prototype.s=!1,Wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var Yk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Xa(u,h){if(yt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ke){e:{try{ie(h.nodeName);var T=!0;break e}catch{}T=!1}T||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Zk[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Xa.aa.h.call(this)}}w(Xa,yt);var Zk={2:"touch",3:"pen",4:"mouse"};Xa.prototype.h=function(){Xa.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),Jk=0;function Xk(u,h,p,m,T){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=T,this.key=++Jk,this.da=this.fa=!1}function Tl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Sl(u){this.src=u,this.g={},this.h=0}Sl.prototype.add=function(u,h,p,m,T){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var k=ug(u,h,m,T);return-1<k?(h=u[k],p||(h.fa=!1)):(h=new Xk(h,this.src,A,!!m,T),h.fa=p,u.push(h)),h};function cg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],T=Array.prototype.indexOf.call(m,h,void 0),A;(A=0<=T)&&Array.prototype.splice.call(m,T,1),A&&(Tl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ug(u,h,p,m){for(var T=0;T<u.length;++T){var A=u[T];if(!A.da&&A.listener==h&&A.capture==!!p&&A.ha==m)return T}return-1}var lg="closure_lm_"+(1e6*Math.random()|0),dg={};function KC(u,h,p,m,T){if(m&&m.once)return YC(u,h,p,m,T);if(Array.isArray(h)){for(var A=0;A<h.length;A++)KC(u,h[A],p,m,T);return null}return p=gg(p),u&&u[ec]?u.K(h,p,l(m)?!!m.capture:!!m,T):QC(u,h,p,!1,m,T)}function QC(u,h,p,m,T,A){if(!h)throw Error("Invalid event type");var k=l(T)?!!T.capture:!!T,Ne=fg(u);if(Ne||(u[lg]=Ne=new Sl(u)),p=Ne.add(h,p,m,k,A),p.proxy)return p;if(m=eO(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)Yk||(T=k),T===void 0&&(T=!1),u.addEventListener(h.toString(),m,T);else if(u.attachEvent)u.attachEvent(JC(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function eO(){function u(p){return h.call(u.src,u.listener,p)}let h=tO;return u}function YC(u,h,p,m,T){if(Array.isArray(h)){for(var A=0;A<h.length;A++)YC(u,h[A],p,m,T);return null}return p=gg(p),u&&u[ec]?u.L(h,p,l(m)?!!m.capture:!!m,T):QC(u,h,p,!0,m,T)}function ZC(u,h,p,m,T){if(Array.isArray(h))for(var A=0;A<h.length;A++)ZC(u,h[A],p,m,T);else m=l(m)?!!m.capture:!!m,p=gg(p),u&&u[ec]?(u=u.i,h=String(h).toString(),h in u.g&&(A=u.g[h],p=ug(A,p,m,T),-1<p&&(Tl(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[h],u.h--)))):u&&(u=fg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=ug(h,p,m,T)),(p=-1<u?h[u]:null)&&hg(p))}function hg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[ec])cg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(JC(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=fg(h))?(cg(p,u),p.h==0&&(p.src=null,h[lg]=null)):Tl(u)}}}function JC(u){return u in dg?dg[u]:dg[u]="on"+u}function tO(u,h){if(u.da)u=!0;else{h=new Xa(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&hg(u),u=p.call(m,h)}return u}function fg(u){return u=u[lg],u instanceof Sl?u:null}var pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function gg(u){return typeof u=="function"?u:(u[pg]||(u[pg]=function(h){return u.handleEvent(h)}),u[pg])}function _t(){Wr.call(this),this.i=new Sl(this),this.M=this,this.F=null}w(_t,Wr),_t.prototype[ec]=!0,_t.prototype.removeEventListener=function(u,h,p,m){ZC(this,u,h,p,m)};function At(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new yt(h,u);else if(h instanceof yt)h.target=h.target||u;else{var T=h;h=new yt(m,u),C(h,T)}if(T=!0,p)for(var A=p.length-1;0<=A;A--){var k=h.g=p[A];T=Al(k,m,!0,h)&&T}if(k=h.g=u,T=Al(k,m,!0,h)&&T,T=Al(k,m,!1,h)&&T,p)for(A=0;A<p.length;A++)k=h.g=p[A],T=Al(k,m,!1,h)&&T}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Tl(p[m]);delete u.g[h],u.h--}}this.F=null},_t.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},_t.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Al(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var T=!0,A=0;A<h.length;++A){var k=h[A];if(k&&!k.da&&k.capture==p){var Ne=k.listener,ht=k.ha||k.src;k.fa&&cg(u.i,k),T=Ne.call(ht,m)!==!1&&T}}return T&&!m.defaultPrevented}function XC(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function eD(u){u.g=XC(()=>{u.g=null,u.i&&(u.i=!1,eD(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class nO extends Wr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:eD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tc(u){Wr.call(this),this.h=u,this.g={}}w(tc,Wr);var tD=[];function nD(u){se(u.g,function(h,p){this.g.hasOwnProperty(p)&&hg(h)},u),u.g={}}tc.prototype.N=function(){tc.aa.N.call(this),nD(this)},tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mg=a.JSON.stringify,rO=a.JSON.parse,iO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function yg(){}yg.prototype.h=null;function rD(u){return u.h||(u.h=u.i())}function iD(){}var nc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _g(){yt.call(this,"d")}w(_g,yt);function vg(){yt.call(this,"c")}w(vg,yt);var Bi={},sD=null;function Rl(){return sD=sD||new _t}Bi.La="serverreachability";function oD(u){yt.call(this,Bi.La,u)}w(oD,yt);function rc(u){let h=Rl();At(h,new oD(h))}Bi.STAT_EVENT="statevent";function aD(u,h){yt.call(this,Bi.STAT_EVENT,u),this.stat=h}w(aD,yt);function Rt(u){let h=Rl();At(h,new aD(h,u))}Bi.Ma="timingevent";function cD(u,h){yt.call(this,Bi.Ma,u),this.size=h}w(cD,yt);function ic(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function sc(){this.g=!0}sc.prototype.xa=function(){this.g=!1};function sO(u,h,p,m,T,A){u.info(function(){if(u.g)if(A)for(var k="",Ne=A.split("&"),ht=0;ht<Ne.length;ht++){var Ce=Ne[ht].split("=");if(1<Ce.length){var vt=Ce[0];Ce=Ce[1];var It=vt.split("_");k=2<=It.length&&It[1]=="type"?k+(vt+"="+Ce+"&"):k+(vt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+h+`
`+p+`
`+k})}function oO(u,h,p,m,T,A,k){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+h+`
`+p+`
`+A+" "+k})}function Xs(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+cO(u,p)+(m?" "+m:"")})}function aO(u,h){u.info(function(){return"TIMEOUT: "+h})}sc.prototype.info=function(){};function cO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return mg(p)}catch{return h}}var Nl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ig;function Ml(){}w(Ml,yg),Ml.prototype.g=function(){return new XMLHttpRequest},Ml.prototype.i=function(){return{}},Ig=new Ml;function Kr(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new tc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lD}function lD(){this.i=null,this.g="",this.h=!1}var dD={},wg={};function Eg(u,h,p){u.L=1,u.v=Ol(ur(h)),u.m=p,u.P=!0,hD(u,null)}function hD(u,h){u.F=Date.now(),xl(u),u.A=ur(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),TD(p.i,"t",m),u.C=0,p=u.j.J,u.h=new lD,u.g=qD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new nO(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(tD[0]=T.toString()),T=tD);for(var A=0;A<T.length;A++){var k=KC(p,T[A],m||h.handleEvent,!1,h.h||h);if(!k)break;h.g[k.key]=k}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),rc(),sO(u.i,u.u,u.A,u.l,u.R,u.m)}Kr.prototype.ca=function(u){u=u.target;let h=this.M;h&&lr(u)==3?h.j():this.Y(u)},Kr.prototype.Y=function(u){try{if(u==this.g)e:{let It=lr(this.g);var h=this.g.Ba();let no=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||PD(this.g)))){this.J||It!=4||h==7||(h==8||0>=no?rc(3):rc(2)),Cg(this);var p=this.g.Z();this.X=p;t:if(fD(this)){var m=PD(this.g);u="";var T=m.length,A=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$i(this),oc(this);var k="";break t}this.h.i=new a.TextDecoder}for(h=0;h<T;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(A&&h==T-1)});m.length=0,this.h.g+=u,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=p==200,oO(this.i,this.u,this.A,this.l,this.R,It,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,ht=this.g;if((Ne=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ne)){var Ce=Ne;break t}}Ce=null}if(p=Ce)Xs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dg(this,p);else{this.o=!1,this.s=3,Rt(12),$i(this),oc(this);break e}}if(this.P){p=!0;let pn;for(;!this.J&&this.C<k.length;)if(pn=uO(this,k),pn==wg){It==4&&(this.s=4,Rt(14),p=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==dD){this.s=4,Rt(15),Xs(this.i,this.l,k,"[Invalid Chunk]"),p=!1;break}else Xs(this.i,this.l,pn,null),Dg(this,pn);if(fD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||k.length!=0||this.h.h||(this.s=1,Rt(16),p=!1),this.o=this.o&&p,!p)Xs(this.i,this.l,k,"[Invalid Chunked Response]"),$i(this),oc(this);else if(0<k.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Ng(vt),vt.M=!0,Rt(11))}}else Xs(this.i,this.l,k,null),Dg(this,k);It==4&&$i(this),this.o&&!this.J&&(It==4?jD(this.j,this):(this.o=!1,xl(this)))}else TO(this.g),p==400&&0<k.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),$i(this),oc(this)}}}catch{}finally{}};function fD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function uO(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?wg:(p=Number(h.substring(p,m)),isNaN(p)?dD:(m+=1,m+p>h.length?wg:(h=h.slice(m,m+p),u.C=m+p,h)))}Kr.prototype.cancel=function(){this.J=!0,$i(this)};function xl(u){u.S=Date.now()+u.I,pD(u,u.I)}function pD(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ic(g(u.ba,u),h)}function Cg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Kr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(aO(this.i,this.A),this.L!=2&&(rc(),Rt(17)),$i(this),this.s=2,oc(this)):pD(this,this.S-u)};function oc(u){u.j.G==0||u.J||jD(u.j,u)}function $i(u){Cg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,nD(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Dg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||bg(p.h,u))){if(!u.K&&bg(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)jl(p),Vl(p);else break e;Rg(p),Rt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=ic(g(p.Za,p),6e3));if(1>=yD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else qi(p,11)}else if((u.K||p.g==u)&&jl(p),!U(h))for(T=p.Da.g.parse(h),h=0;h<T.length;h++){let Ce=T[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let vt=Ce[3];vt!=null&&(p.la=vt,p.j.info("VER="+p.la));let It=Ce[4];It!=null&&(p.Aa=It,p.j.info("SVER="+p.Aa));let no=Ce[5];no!=null&&typeof no=="number"&&0<no&&(m=1.5*no,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let pn=u.g;if(pn){let $l=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var A=m.h;A.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Tg(A,A.h),A.h=null))}if(m.D){let Mg=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mg&&(m.ya=Mg,Oe(m.I,m.D,Mg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var k=u;if(m.qa=HD(m,m.J?m.ia:null,m.W),k.K){_D(m.h,k);var Ne=k,ht=m.L;ht&&(Ne.I=ht),Ne.B&&(Cg(Ne),xl(Ne)),m.g=k}else VD(m);0<p.i.length&&Ul(p)}else Ce[0]!="stop"&&Ce[0]!="close"||qi(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?qi(p,7):Ag(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}rc(4)}catch{}}var lO=class{constructor(u,h){this.g=u,this.map=h}};function gD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yD(u){return u.h?1:u.g?u.g.size:0}function bg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Tg(u,h){u.g?u.g.add(h):u.h=h}function _D(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}gD.prototype.cancel=function(){if(this.i=vD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function vD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return N(u.i)}function dO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function hO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function ID(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=hO(u),m=dO(u),T=m.length,A=0;A<T;A++)h.call(void 0,m[A],p&&p[A],u)}var wD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),T=null;if(0<=m){var A=u[p].substring(0,m);T=u[p].substring(m+1)}else A=u[p];h(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Hi){this.h=u.h,Pl(this,u.j),this.o=u.o,this.g=u.g,kl(this,u.s),this.l=u.l;var h=u.i,p=new uc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ED(this,p),this.m=u.m}else u&&(h=String(u).match(wD))?(this.h=!1,Pl(this,h[1]||"",!0),this.o=ac(h[2]||""),this.g=ac(h[3]||"",!0),kl(this,h[4]),this.l=ac(h[5]||"",!0),ED(this,h[6]||"",!0),this.m=ac(h[7]||"")):(this.h=!1,this.i=new uc(null,this.h))}Hi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(cc(h,CD,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(cc(h,CD,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(cc(p,p.charAt(0)=="/"?mO:gO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",cc(p,_O)),u.join("")};function ur(u){return new Hi(u)}function Pl(u,h,p){u.j=p?ac(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function kl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function ED(u,h,p){h instanceof uc?(u.i=h,vO(u.i,u.h)):(p||(h=cc(h,yO)),u.i=new uc(h,u.h))}function Oe(u,h,p){u.i.set(h,p)}function Ol(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ac(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,pO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var CD=/[#\/\?@]/g,gO=/[#\?:]/g,mO=/[#\?]/g,yO=/[#\?@]/g,_O=/#/g;function uc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Qr(u){u.g||(u.g=new Map,u.h=0,u.i&&fO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=uc.prototype,n.add=function(u,h){Qr(this),this.i=null,u=eo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function DD(u,h){Qr(u),h=eo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function bD(u,h){return Qr(u),h=eo(u,h),u.g.has(h)}n.forEach=function(u,h){Qr(this),this.g.forEach(function(p,m){p.forEach(function(T){u.call(h,T,m,this)},this)},this)},n.na=function(){Qr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let T=u[m];for(let A=0;A<T.length;A++)p.push(h[m])}return p},n.V=function(u){Qr(this);let h=[];if(typeof u=="string")bD(this,u)&&(h=h.concat(this.g.get(eo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return Qr(this),this.i=null,u=eo(this,u),bD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function TD(u,h,p){DD(u,h),0<p.length&&(u.i=null,u.g.set(eo(u,h),N(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let A=encodeURIComponent(String(m)),k=this.V(m);for(m=0;m<k.length;m++){var T=A;k[m]!==""&&(T+="="+encodeURIComponent(String(k[m]))),u.push(T)}}return this.i=u.join("&")};function eo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function vO(u,h){h&&!u.j&&(Qr(u),u.i=null,u.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(DD(this,m),TD(this,T,p))},u)),u.j=h}function IO(u,h){let p=new sc;if(a.Image){let m=new Image;m.onload=y(Yr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Yr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Yr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Yr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function wO(u,h){let p=new sc,m=new AbortController,T=setTimeout(()=>{m.abort(),Yr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(A=>{clearTimeout(T),A.ok?Yr(p,"TestPingServer: ok",!0,h):Yr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(T),Yr(p,"TestPingServer: error",!1,h)})}function Yr(u,h,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function EO(){this.g=new iO}function CO(u,h,p){let m=p||"";try{ID(u,function(T,A){let k=T;l(T)&&(k=mg(T)),h.push(m+A+"="+encodeURIComponent(k))})}catch(T){throw h.push(m+"type="+encodeURIComponent("_badmap")),T}}function lc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(lc,yg),lc.prototype.g=function(){return new Fl(this.l,this.j)},lc.prototype.i=function(u){return function(){return u}}({});function Fl(u,h){_t.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Fl,_t),n=Fl.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,hc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hc(this)),this.g&&(this.readyState=3,hc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;SD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function SD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?dc(this):hc(this),this.readyState==3&&SD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,dc(this))},n.Qa=function(u){this.g&&(this.response=u,dc(this))},n.ga=function(){this.g&&dc(this)};function dc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,hc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function hc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function AD(u){let h="";return se(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Sg(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=AD(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Oe(u,h,p))}function Ge(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ge,_t);var DO=/^https?$/i,bO=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ig.g(),this.v=this.o?rD(this.o):rD(Ig),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(A){RD(this,A);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())p.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bO,h,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of p)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xD(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){RD(this,A)}};function RD(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,ND(u),Ll(u)}function ND(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,At(this,"complete"),At(this,"abort"),Ll(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ll(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?MD(this):this.bb())},n.bb=function(){MD(this)};function MD(u){if(u.h&&typeof o<"u"&&(!u.v[1]||lr(u)!=4||u.Z()!=2)){if(u.u&&lr(u)==4)XC(u.Ea,0,u);else if(At(u,"readystatechange"),lr(u)==4){u.h=!1;try{let k=u.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=k===0){var T=String(u.D).match(wD)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!DO.test(T?T.toLowerCase():"")}p=m}if(p)At(u,"complete"),At(u,"success");else{u.m=6;try{var A=2<lr(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",ND(u)}}finally{Ll(u)}}}}function Ll(u,h){if(u.g){xD(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||At(u,"ready");try{p.onreadystatechange=m}catch{}}}function xD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function lr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),rO(h)}};function PD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TO(u){let h={};u=(u.g&&2<=lr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(U(u[m]))continue;var p=b(u[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=h[T]||[];h[T]=A,A.push(p)}D(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function kD(u){this.Aa=0,this.i=[],this.j=new sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fc("baseRetryDelayMs",5e3,u),this.cb=fc("retryDelaySeedMs",1e4,u),this.Wa=fc("forwardChannelMaxRetries",2,u),this.wa=fc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gD(u&&u.concurrentRequestLimit),this.Da=new EO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kD.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){Rt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=HD(this,null,this.W),Ul(this)};function Ag(u){if(OD(u),u.G==3){var h=u.U++,p=ur(u.I);if(Oe(p,"SID",u.K),Oe(p,"RID",h),Oe(p,"TYPE","terminate"),pc(u,p),h=new Kr(u,u.j,h),h.L=2,h.v=Ol(ur(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=qD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),xl(h)}$D(u)}function Vl(u){u.g&&(Ng(u),u.g.cancel(),u.g=null)}function OD(u){Vl(u),u.u&&(a.clearTimeout(u.u),u.u=null),jl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ul(u){if(!mD(u.h)&&!u.s){u.s=!0;var h=u.Ga;Za||WC(),Ja||(Za(),Ja=!0),ag.add(h,u),u.B=0}}function SO(u,h){return yD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ic(g(u.Ga,u,h),BD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new Kr(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),C(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=LD(this,T,h),p=ur(this.I),Oe(p,"RID",u),Oe(p,"CVER",22),this.D&&Oe(p,"X-HTTP-Session-Id",this.D),pc(this,p),A&&(this.O?h="headers="+encodeURIComponent(String(AD(A)))+"&"+h:this.m&&Sg(p,this.m,A)),Tg(this.h,T),this.Ua&&Oe(p,"TYPE","init"),this.P?(Oe(p,"$req",h),Oe(p,"SID","null"),T.T=!0,Eg(T,p,null)):Eg(T,p,h),this.G=2}}else this.G==3&&(u?FD(this,u):this.i.length==0||mD(this.h)||FD(this))};function FD(u,h){var p;h?p=h.l:p=u.U++;let m=ur(u.I);Oe(m,"SID",u.K),Oe(m,"RID",p),Oe(m,"AID",u.T),pc(u,m),u.m&&u.o&&Sg(m,u.m,u.o),p=new Kr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=LD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tg(u.h,p),Eg(p,m,h)}function pc(u,h){u.H&&se(u.H,function(p,m){Oe(h,m,p)}),u.l&&ID({},function(p,m){Oe(h,m,p)})}function LD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var T=u.i;let A=-1;for(;;){let k=["count="+p];A==-1?0<p?(A=T[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ne=!0;for(let ht=0;ht<p;ht++){let Ce=T[ht].g,vt=T[ht].map;if(Ce-=A,0>Ce)A=Math.max(0,T[ht].g-100),Ne=!1;else try{CO(vt,k,"req"+Ce+"_")}catch{m&&m(vt)}}if(Ne){m=k.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function VD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Za||WC(),Ja||(Za(),Ja=!0),ag.add(h,u),u.v=0}}function Rg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ic(g(u.Fa,u),BD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,UD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ic(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Vl(this),UD(this))};function Ng(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function UD(u){u.g=new Kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=ur(u.qa);Oe(h,"RID","rpc"),Oe(h,"SID",u.K),Oe(h,"AID",u.T),Oe(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(h,"TO",u.ja),Oe(h,"TYPE","xmlhttp"),pc(u,h),u.m&&u.o&&Sg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Ol(ur(h)),p.m=null,p.P=!0,hD(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Vl(this),Rg(this),Rt(19))};function jl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function jD(u,h){var p=null;if(u.g==h){jl(u),Ng(u),u.g=null;var m=2}else if(bg(u.h,h))p=h.D,_D(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var T=u.B;m=Rl(),At(m,new cD(m,p)),Ul(u)}else VD(u);else if(T=h.s,T==3||T==0&&0<h.X||!(m==1&&SO(u,h)||m==2&&Rg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),T){case 1:qi(u,5);break;case 4:qi(u,10);break;case 3:qi(u,6);break;default:qi(u,2)}}}function BD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function qi(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let T=!m;m=new Hi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pl(m,"https"),Ol(m),T?IO(m.toString(),p):wO(m.toString(),p)}else Rt(2);u.G=0,u.l&&u.l.sa(h),$D(u),OD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function $D(u){if(u.G=0,u.ka=[],u.l){let h=vD(u.h);(h.length!=0||u.i.length!=0)&&(R(u.ka,h),R(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function HD(u,h,p){var m=p instanceof Hi?ur(p):new Hi(p);if(m.g!="")h&&(m.g=h+"."+m.g),kl(m,m.s);else{var T=a.location;m=T.protocol,h=h?h+"."+T.hostname:T.hostname,T=+T.port;var A=new Hi(null);m&&Pl(A,m),h&&(A.g=h),T&&kl(A,T),p&&(A.l=p),m=A}return p=u.D,h=u.ya,p&&h&&Oe(m,p,h),Oe(m,"VER",u.la),pc(u,m),m}function qD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ge(new lc({eb:p})):new Ge(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function GD(){}n=GD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Bl(){}Bl.prototype.g=function(u,h){return new Ht(u,h)};function Ht(u,h){_t.call(this),this.g=new kD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new to(this)}w(Ht,_t),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ag(this.g)},Ht.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=mg(u),u=p);h.i.push(new lO(h.Ya++,u)),h.G==3&&Ul(h)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ag(this.g),delete this.g,Ht.aa.N.call(this)};function zD(u){_g.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(zD,_g);function WD(){vg.call(this),this.status=1}w(WD,vg);function to(u){this.g=u}w(to,GD),to.prototype.ua=function(){At(this.g,"a")},to.prototype.ta=function(u){At(this.g,new zD(u))},to.prototype.sa=function(u){At(this.g,new WD)},to.prototype.ra=function(){At(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,lI=Vr.createWebChannelTransport=function(){return new Bl},uI=Vr.getStatEventTarget=function(){return Rl()},cI=Vr.Event=Bi,Rf=Vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nl.NO_ERROR=0,Nl.TIMEOUT=8,Nl.HTTP_ERROR=6,bu=Vr.ErrorCode=Nl,uD.COMPLETE="complete",aI=Vr.EventType=uD,iD.EventType=nc,nc.OPEN="a",nc.CLOSE="b",nc.ERROR="c",nc.MESSAGE="d",_t.prototype.listen=_t.prototype.K,oa=Vr.WebChannel=iD,ez=Vr.FetchXmlHttpFactory=lc,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,oI=Vr.XhrIo=Ge}).apply(typeof Af<"u"?Af:typeof self<"u"?self:typeof window<"u"?window:{});var NN="@firebase/firestore";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var Sa="10.14.0";var ks=new Yn("@firebase/firestore");function Tu(){return ks.logLevel}function j(n,...e){if(ks.logLevel<=de.DEBUG){let t=e.map(Qw);ks.debug(`Firestore (${Sa}): ${n}`,...t)}}function Br(n,...e){if(ks.logLevel<=de.ERROR){let t=e.map(Qw);ks.error(`Firestore (${Sa}): ${n}`,...t)}}function fa(n,...e){if(ks.logLevel<=de.WARN){let t=e.map(Qw);ks.warn(`Firestore (${Sa}): ${n}`,...t)}}function Qw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n="Unexpected state"){let e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function Te(n,e){n||X()}function re(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ur=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lt.UNAUTHENTICATED))}shutdown(){}},mI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yI=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ur)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new lt(e)}},_I=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},vI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _I(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},II=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Te(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new II(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function tz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=tz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function pa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var mt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new mt(0,0))}static max(){return new n(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ff=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},He=class n extends Ff{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},nz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class n extends Ff{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return nz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(He.fromString(e))}static fromName(e){return new n(He.fromString(e).popFirst(5))}static empty(){return new n(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new He(e.slice()))}};var EI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};EI.UNKNOWN_ID=-1;function rz(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new Os(i,Q.empty(),e)}function iz(n){return new Os(n.readTime,n.key,-1)}var Os=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(oe.min(),Q.empty(),-1)}static max(){return new n(oe.max(),Q.empty(),-1)}};function sz(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var oz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gu(n){return E(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==oz)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function az(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zu(n){return n.name==="IndexedDbTransactionError"}var hM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function dp(n){return n==null}function xu(n){return n===0&&1/n==-1/0}function cz(n){return typeof n=="number"&&Number.isInteger(n)&&!xu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var uz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zee=[...uz,"documentOverlays"],lz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dz=lz,hz=[...dz,"indexConfiguration","indexState","indexEntries"];var Jee=[...hz,"globals"];function MN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}},la=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ct=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lf(this.data.getIterator())}getIteratorFrom(e){return new Lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Lf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ln=class n{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ct(Xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Vf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vf("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var fz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(n){if(Te(!!n),typeof n=="string"){let e=0,t=fz.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(n.seconds),nanos:Be(n.nanos)}}function Be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pi(n){return typeof n=="string"?Dt.fromBase64String(n):Dt.fromUint8Array(n)}function Yw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zw(n){let e=n.mapValue.fields.__previous_value__;return Yw(e)?Zw(e):e}function Pu(n){let e=$r(n.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}var DI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Uf=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Nf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yw(n)?4:gM(n)?9007199254740991:pM(n)?10:11:X()}function sr(n,e){if(n===e)return!0;let t=Fs(n);if(t!==Fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pu(n).isEqual(Pu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=$r(i.timestampValue),a=$r(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Pi(i.bytesValue).isEqual(Pi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Be(i.doubleValue),a=Be(s.doubleValue);return o===a?xu(o)===xu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return pa(n.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(MN(o)!==MN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!sr(o[c],a[c])))return!1;return!0}(n,e);default:return X()}}function ku(n,e){return(n.values||[]).find(t=>sr(t,e))!==void 0}function ga(n,e){if(n===e)return 0;let t=Fs(n),r=Fs(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Be(s.integerValue||s.doubleValue),c=Be(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return xN(n.timestampValue,e.timestampValue);case 4:return xN(Pu(n),Pu(e));case 5:return De(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Pi(s),c=Pi(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=De(a[l],c[l]);if(d!==0)return d}return De(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=De(Be(s.latitude),Be(o.latitude));return a!==0?a:De(Be(s.longitude),Be(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PN(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,N=De(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:PN(y,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nf.mapValue&&o===Nf.mapValue)return 0;if(s===Nf.mapValue)return 1;if(o===Nf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=De(c[f],d[f]);if(g!==0)return g;let y=ga(a[c[f]],l[d[f]]);if(y!==0)return y}return De(c.length,d.length)}(n.mapValue,e.mapValue);default:throw X()}}function xN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=$r(n),r=$r(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function PN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ga(t[i],r[i]);if(s)return s}return De(t.length,r.length)}function ma(n){return bI(n)}function bI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=$r(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=bI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${bI(t.fields[o])}`;return i+"}"}(n.mapValue):X()}function kN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TI(n){return!!n&&"integerValue"in n}function Jw(n){return!!n&&"arrayValue"in n}function ON(n){return!!n&&"nullValue"in n}function FN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xf(n){return!!n&&"mapValue"in n}function pM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Bs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Au(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bs(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Au(this.value))}};function mM(n){let e=[];return Bs(n.fields,(t,r)=>{let i=new Xt([t]);if(xf(r)){let s=mM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}var Sn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ya=class{constructor(e,t){this.position=e,this.inclusive=t}};function LN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),t.key):r=ga(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sr(n.position[t],e.position[t]))return!1;return!0}var _a=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function pz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var jf=class{},nt=class n extends jf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AI(e,t,r):t==="array-contains"?new MI(e,r):t==="in"?new xI(e,r):t==="not-in"?new PI(e,r):t==="array-contains-any"?new kI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RI(e,r):new NI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ga(t,this.value)):t!==null&&Fs(this.value)===Fs(t)&&this.matchesComparison(ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},An=class n extends jf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return yM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function yM(n){return n.op==="and"}function _M(n){return gz(n)&&yM(n)}function gz(n){for(let e of n.filters)if(e instanceof An)return!1;return!0}function SI(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+ma(n.value);if(_M(n))return n.filters.map(e=>SI(e)).join(",");{let e=n.filters.map(t=>SI(t)).join(",");return`${n.op}(${e})`}}function vM(n,e){return n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)}(n,e):n instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vM(o,i.filters[a]),!0):!1}(n,e):void X()}function IM(n){return n instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${ma(t.value)}`}(n):n instanceof An?function(t){return t.op.toString()+" {"+t.getFilters().map(IM).join(" ,")+"}"}(n):"Filter"}var AI=class extends nt{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},RI=class extends nt{constructor(e,t){super(e,"in",t),this.keys=wM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},NI=class extends nt{constructor(e,t){super(e,"not-in",t),this.keys=wM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function wM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var MI=class extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jw(t)&&ku(t.arrayValue,this.value)}},xI=class extends nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ku(this.value.arrayValue,t)}},PI=class extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ku(this.value.arrayValue,t)}},kI=class extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}};var OI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function UN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new OI(n,e,t,r,i,s,o)}function Xw(n){let e=re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>SI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ma(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ma(r)).join(",")),e.ue=t}return e.ue}function eE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VN(n.startAt,e.startAt)&&VN(n.endAt,e.endAt)}function FI(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ls=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function mz(n,e,t,r,i,s,o,a){return new Ls(n,e,t,r,i,s,o,a)}function tE(n){return new Ls(n)}function jN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function EM(n){return n.collectionGroup!==null}function Ru(n){let e=re(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(Xt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new _a(s,r))}),t.has(Xt.keyField().canonicalString())||e.ce.push(new _a(Xt.keyField(),r))}return e.ce}function rr(n){let e=re(n);return e.le||(e.le=yz(e,Ru(n))),e.le}function yz(n,e){if(n.limitType==="F")return UN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new _a(i.field,s)});let t=n.endAt?new ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ya(n.startAt.position,n.startAt.inclusive):null;return UN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function LI(n,e){let t=n.filters.concat([e]);return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function VI(n,e,t){return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hp(n,e){return eE(rr(n),rr(e))&&n.limitType===e.limitType}function CM(n){return`${Xw(rr(n))}|lt:${n.limitType}`}function aa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IM(i)).join(", ")}]`),dp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ma(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ma(i)).join(",")),`Target(${r})`}(rr(n))}; limitType=${n.limitType})`}function fp(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ru(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=LN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ru(r),i)||r.endAt&&!function(o,a,c){let l=LN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ru(r),i))}(n,e)}function _z(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DM(n){return(e,t)=>{let r=!1;for(let i of Ru(n)){let s=vz(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vz(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ga(c,l):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var ki=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return fM(this.inner)}size(){return this.innerSize}};var Iz=new Qe(Q.comparator);function Hr(){return Iz}var bM=new Qe(Q.comparator);function Su(...n){let e=bM;for(let t of n)e=e.insert(t.key,t);return e}function TM(n){let e=bM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ms(){return Nu()}function SM(){return Nu()}function Nu(){return new ki(n=>n.toString(),(n,e)=>n.isEqual(e))}var wz=new Qe(Q.comparator),Ez=new Ct(Q.comparator);function ge(...n){let e=Ez;for(let t of n)e=e.add(t);return e}var Cz=new Ct(De);function Dz(){return Cz}function nE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(e)?"-0":e}}function AM(n){return{integerValue:""+n}}function bz(n,e){return cz(e)?AM(e):nE(n,e)}var va=class{constructor(){this._=void 0}};function Tz(n,e,t){return n instanceof Ia?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yw(s)&&(s=Zw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Vs?NM(n,e):n instanceof Us?MM(n,e):function(i,s){let o=RM(i,s),a=BN(o)+BN(i.Pe);return TI(o)&&TI(i.Pe)?AM(a):nE(i.serializer,a)}(n,e)}function Sz(n,e,t){return n instanceof Vs?NM(n,e):n instanceof Us?MM(n,e):t}function RM(n,e){return n instanceof wa?function(r){return TI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ia=class extends va{},Vs=class extends va{constructor(e){super(),this.elements=e}};function NM(n,e){let t=xM(e);for(let r of n.elements)t.some(i=>sr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Us=class extends va{constructor(e){super(),this.elements=e}};function MM(n,e){let t=xM(e);for(let r of n.elements)t=t.filter(i=>!sr(i,r));return{arrayValue:{values:t}}}var wa=class extends va{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BN(n){return Be(n.integerValue||n.doubleValue)}function xM(n){return Jw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Az(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vs&&i instanceof Vs||r instanceof Us&&i instanceof Us?pa(r.elements,i.elements,sr):r instanceof wa&&i instanceof wa?sr(r.Pe,i.Pe):r instanceof Ia&&i instanceof Ia}(n.transform,e.transform)}var UI=class{constructor(e,t){this.version=e,this.transformResults=t}},jr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ea=class{};function PM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ou(n.key,jr.none()):new js(n.key,n.data,jr.none());{let t=n.data,r=Jt.empty(),i=new Ct(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new or(n.key,r,new ln(i.toArray()),jr.none())}}function Rz(n,e,t){n instanceof js?function(i,s,o){let a=i.value.clone(),c=HN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof or?function(i,s,o){if(!Pf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=HN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(kM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Mu(n,e,t,r){return n instanceof js?function(s,o,a,c){if(!Pf(s.precondition,o))return a;let l=s.value.clone(),d=qN(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof or?function(s,o,a,c){if(!Pf(s.precondition,o))return a;let l=qN(s.fieldTransforms,c,o),d=o.data;return d.setAll(kM(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Pf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Nz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=RM(r.transform,i||null);s!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,s))}return t||null}function $N(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pa(r,i,(s,o)=>Az(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var js=class extends Ea{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},or=class extends Ea{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function kM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function HN(n,e,t){let r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Sz(o,a,t[i]))}return r}function qN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Tz(s,o,e))}return r}var Ou=class extends Ea{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},jI=class extends Ea{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var BI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Rz(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=PM(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(t,r)=>$N(t,r))&&pa(this.baseMutations,e.baseMutations,(t,r)=>$N(t,r))}},$I=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length);let i=function(){return wz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var HI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,ve;function Mz(n){switch(n){default:return X();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function OM(n){if(n===void 0)return Br("GRPC error has no .code"),M.UNKNOWN;switch(n){case et.OK:return M.OK;case et.CANCELLED:return M.CANCELLED;case et.UNKNOWN:return M.UNKNOWN;case et.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case et.INTERNAL:return M.INTERNAL;case et.UNAVAILABLE:return M.UNAVAILABLE;case et.UNAUTHENTICATED:return M.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case et.NOT_FOUND:return M.NOT_FOUND;case et.ALREADY_EXISTS:return M.ALREADY_EXISTS;case et.PERMISSION_DENIED:return M.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case et.ABORTED:return M.ABORTED;case et.OUT_OF_RANGE:return M.OUT_OF_RANGE;case et.UNIMPLEMENTED:return M.UNIMPLEMENTED;case et.DATA_LOSS:return M.DATA_LOSS;default:return X()}}(ve=et||(et={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var GN=null;function xz(){return new TextEncoder}var Pz=new Ni([4294967295,4294967295],0);function zN(n){let e=xz().encode(n),t=new sI;return t.update(e),new Uint8Array(t.digest())}function WN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ni([t,r],0),new Ni([i,s],0)]}var GI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xs(`Invalid padding: ${t}`);if(r<0)throw new xs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ni.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ni.fromNumber(r)));return i.compare(Pz)===1&&(i=new Ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=zN(e),[r,i]=WN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=zN(e),[r,i]=WN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},xs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(oe.min(),i,new Qe(De),Hr(),ge())}},Fu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var da=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},$f=class{constructor(e,t){this.targetId=e,this.me=t}},Hf=class{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},qf=class{constructor(){this.fe=0,this.ge=QN(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Fu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=QN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hr(),this.qe=KN(),this.Qe=new Qe(De)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(FI(s))if(r===0){let o=new Q(s.path);this.Ue(t,o,Sn.newNoDocument(o,oe.min()))}else Te(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}GN?.et(function(d,f,g,y,w){var N,R,F,U,q,ie;let ke={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},se=f.unchangedNames;return se&&(ke.bloomFilter={applied:w===0,hashCount:(N=se?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(F=(R=se?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&U!==void 0?U:0,padding:(ie=(q=se?.bits)===null||q===void 0?void 0:q.padding)!==null&&ie!==void 0?ie:0,mightContain:D=>{var _;return(_=y?.mightContain(D))!==null&&_!==void 0&&_}}),ke}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Pi(r).toUint8Array()}catch(c){if(c instanceof Vf)return fa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new GI(o,i,s)}catch(c){return fa(c instanceof xs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&FI(a.target)){let c=new Q(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Sn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Bf(e,t,this.Qe,this.ke,r);return this.ke=Hr(),this.qe=KN(),this.Qe=new Qe(De),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new qf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ct(De),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function KN(){return new Qe(Q.comparator)}function QN(){return new Qe(Q.comparator)}var kz={asc:"ASCENDING",desc:"DESCENDING"},Oz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fz={and:"AND",or:"OR"},WI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function KI(n,e){return n.useProto3Json||dp(e)?e:{value:e}}function Gf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Lz(n,e){return Gf(n,e.toTimestamp())}function ir(n){return Te(!!n),oe.fromTimestamp(function(t){let r=$r(t);return new mt(r.seconds,r.nanos)}(n))}function rE(n,e){return QI(n,e).canonicalString()}function QI(n,e){let t=function(i){return new He(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LM(n){let e=He.fromString(n);return Te($M(e)),e}function YI(n,e){return rE(n.databaseId,e.path)}function dI(n,e){let t=LM(e);if(t.get(1)!==n.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(UM(t))}function VM(n,e){return rE(n.databaseId,e)}function Vz(n){let e=LM(n);return e.length===4?He.emptyPath():UM(e)}function ZI(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UM(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YN(n,e,t){return{name:YI(n,e),fields:t.value.mapValue.fields}}function Uz(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Te(d===void 0||typeof d=="string"),Dt.fromBase64String(d||"")):(Te(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Dt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?M.UNKNOWN:OM(l.code);return new V(d,l.message||"")}(o);t=new Hf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=dI(n,r.document.name),s=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):oe.min(),a=new Jt({mapValue:{fields:r.document.fields}}),c=Sn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new da(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=dI(n,r.document),s=r.readTime?ir(r.readTime):oe.min(),o=Sn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new da([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=dI(n,r.document),s=r.removedTargetIds||[];t=new da([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qI(i,s),a=r.targetId;t=new $f(a,o)}}return t}function jz(n,e){let t;if(e instanceof js)t={update:YN(n,e.key,e.value)};else if(e instanceof Ou)t={delete:YI(n,e.key)};else if(e instanceof or)t={update:YN(n,e.key,e.data),updateMask:Qz(e.fieldMask)};else{if(!(e instanceof jI))return X();t={verify:YI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Us)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Lz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(n,e.precondition)),t}function Bz(n,e){return n&&n.length>0?(Te(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ir(i.updateTime):ir(s);return o.isEqual(oe.min())&&(o=ir(s)),new UI(o,i.transformResults||[])}(t,e))):[]}function $z(n,e){return{documents:[VM(n,e.path)]}}function Hz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VM(n,i);let s=function(l){if(l.length!==0)return BM(An.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ca(g.field),direction:zz(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=KI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function qz(n){let e=Vz(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=jM(f);return g instanceof An&&_M(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new _a(ua(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,dp(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new ya(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new ya(y,g)}(t.endAt)),mz(e,i,o,s,a,"F",c,l)}function Gz(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ua(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ua(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ua(t.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ua(t.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return nt.create(ua(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return An.create(t.compositeFilter.filters.map(r=>jM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function zz(n){return kz[n]}function Wz(n){return Oz[n]}function Kz(n){return Fz[n]}function ca(n){return{fieldPath:n.canonicalString()}}function ua(n){return Xt.fromServerFormat(n.fieldPath)}function BM(n){return n instanceof nt?function(t){if(t.op==="=="){if(FN(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(ON(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FN(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(ON(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:Wz(t.op),value:t.value}}}(n):n instanceof An?function(t){let r=t.getFilters().map(i=>BM(i));return r.length===1?r[0]:{compositeFilter:{op:Kz(t.op),filters:r}}}(n):X()}function Qz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $M(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lu=class n{constructor(e,t,r,i,s=oe.min(),o=oe.min(),a=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var JI=class{constructor(e){this.ct=e}};function Yz(n){let e=qz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?VI(e,e.limit,"L"):e}var zf=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),xu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=$r(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?gM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):pM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):X()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Be(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};zf.vt=new zf;var XI=class{constructor(){this.un=new ew}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Os.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},ew=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ct(He.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ct(He.comparator)).toArray()}};var ete=new Uint8Array(0);var tr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(41943040,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);var Vu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var tw=class{constructor(){this.changes=new ki(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mu(r.mutation,i,ln.empty(),mt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=Ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Su();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Hr(),o=Nu(),a=function(){return Nu()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof or)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Mu(d.mutation,l,d.mutation.getFieldMask(),mt.now())):o.set(l.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new nw(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Nu(),i=new Qe((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||ln.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ge()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=SM();d.forEach(g=>{if(!s.has(g)){let y=PM(t.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve(Ms()),a=-1,c=s;return o.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ge())).next(d=>({batchId:a,changes:TM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Su();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,c=>{let l=function(f,g){return new Ls(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Sn.newInvalidDocument(d)))});let a=Su();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Mu(d.mutation,l,ln.empty(),mt.now()),fp(t,l)&&(a=a.insert(c,l))}),a})}};var iw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Yz(i.bundledQuery),readTime:ir(i.readTime)}}(t)),x.resolve()}};var sw=class{constructor(){this.overlays=new Qe(Q.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ms();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Ms(),s=t.length+1,o=new Q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Qe((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Ms(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Ms(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HI(t,r));let s=this.Ir.get(t);s===void 0&&(s=ge(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var ow=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Uu=class{constructor(){this.Tr=new Ct(tt.Er),this.dr=new Ct(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Q(new He([])),r=new tt(t,e),i=new tt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new He([])),r=new tt(t,e),i=new tt(t,e+1),s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||De(e.wr,t.wr)}static Ar(e,t){return De(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var aw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ct(tt.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new BI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ct(De);return t.forEach(i=>{let s=new tt(i,0),o=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Q.isDocumentKey(s)||(s=s.child(""));let o=new tt(new Q(s),0),a=new Ct(De);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let s=new tt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var cw=class{constructor(e){this.Mr=e,this.docs=function(){return new Qe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Hr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hr(),o=t.path,a=new Q(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||sz(iz(d),r)<=0||(i.has(d.key)||fp(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uw(this)}getSize(e){return x.resolve(this.size)}},uw=class extends tw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var lw=class{constructor(e){this.persistence=e,this.Nr=new ki(t=>Xw(t),eE),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Uu,this.targetCount=0,this.kr=Vu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Vu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var dw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new hM(0),this.Kr=!1,this.Kr=!0,this.$r=new ow,this.referenceDelegate=e(this),this.Ur=new lw(this),this.indexManager=new XI,this.remoteDocumentCache=function(i){return new cw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JI(t),this.Gr=new iw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new aw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new hw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},hw=class extends CI{constructor(e){super(),this.currentSequenceNumber=e}},fw=class n{constructor(e){this.persistence=e,this.Jr=new Uu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var pw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fR()?8:az(ct())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gw;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Tu()<=de.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",aa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Tu()<=de.DEBUG&&j("QueryEngine","Query:",aa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Tu()<=de.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",aa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(t))):x.resolve())}Yi(e,t){if(jN(t))return x.resolve(null);let r=rr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=VI(t,null,"F"),r=rr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ge(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,VI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return jN(t)||i.isEqual(oe.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?x.resolve(null):(Tu()<=de.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aa(t)),this.rs(e,o,t,rz(i,-1)).next(a=>a))})}ts(e,t){let r=new Ct(DM(e));return t.forEach((i,s)=>{fp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Tu()<=de.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",aa(t)),this.Ji.getDocumentsMatchingQuery(e,t,Os.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Qe(De),this._s=new ki(s=>Xw(s),eE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Zz(n,e,t,r){return new yw(n,e,t,r)}function HM(n,e){return E(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ge();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Jz(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(c,w)).next(N=>{let R=l.docVersions.get(w);Te(R!==null),N.version.compareTo(R)<0&&(f.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),d.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qM(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Xz(n,e){let t=re(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(N,R,F){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(s,y))});let c=Hr(),l=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(eW(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(oe.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function eW(n,e,t){let r=ge(),i=ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Hr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function tW(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nW(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Lu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function _w(n,e,t){return E(this,null,function*(){let r=re(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zu(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ZN(n,e,t){let r=re(n),i=oe.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=re(c),g=f._s.get(d);return g!==void 0?x.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:oe.min(),t?s:ge())).next(a=>(rW(r,_z(e),a),{documents:a,Ts:s})))}function rW(n,e,t){let r=n.us.get(e)||oe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Wf=class{constructor(){this.activeTargetIds=Dz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var vw=class{constructor(){this.so=new Wf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Iw=class{_o(e){}shutdown(){}};var Kf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mf=null;function hI(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}var iW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ww=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Et="WebChannelConnection",Ew=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=hI(),c=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(j("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw fa("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=iW[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=hI();return new Promise((o,a)=>{let c=new oI;c.setWithCredentials(!0),c.listenOnce(aI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bu.NO_ERROR:let d=c.getResponseJson();j(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case bu.TIMEOUT:j(Et,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:let f=c.getStatus();if(j(Et,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let w=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(F)>=0?F:M.UNKNOWN}(y.status);a(new V(w,y.message))}else a(new V(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{j(Et,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(Et,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=hI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lI(),a=uI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");j(Et,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,y=!1,w=new ww({Io:R=>{y?j(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(j(Et,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),j(Et,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},To:()=>f.close()}),N=(R,F,U)=>{R.listen(F,q=>{try{U(q)}catch(ie){setTimeout(()=>{throw ie},0)}})};return N(f,oa.EventType.OPEN,()=>{y||(j(Et,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),N(f,oa.EventType.CLOSE,()=>{y||(y=!0,j(Et,`RPC '${e}' stream ${i} transport closed`),w.So())}),N(f,oa.EventType.ERROR,R=>{y||(y=!0,fa(Et,`RPC '${e}' stream ${i} transport errored:`,R),w.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(f,oa.EventType.MESSAGE,R=>{var F;if(!y){let U=R.data[0];Te(!!U);let q=U,ie=q.error||((F=q[0])===null||F===void 0?void 0:F.error);if(ie){j(Et,`RPC '${e}' stream ${i} received error:`,ie);let ke=ie.status,se=function(v){let C=et[v];if(C!==void 0)return OM(C)}(ke),D=ie.message;se===void 0&&(se=M.INTERNAL,D="Unknown error status: "+ke+" with message "+ie.message),y=!0,w.So(new V(se,D)),f.close()}else j(Et,`RPC '${e}' stream ${i} received:`,U),w.bo(U)}}),N(a,cI.STAT_EVENT,R=>{R.stat===Rf.PROXY?j(Et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rf.NOPROXY&&j(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function fI(){return typeof document<"u"?document:null}function pp(n){return new WI(n,!0)}var Qf=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Yf=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Qf(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Cw=class extends Yf{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Uz(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?ir(o.readTime):oe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ZI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=FI(c)?{documents:$z(s,c)}:{query:Hz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FM(s,o.resumeToken);let l=KI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Gf(s,o.snapshotVersion.toTimestamp());let l=KI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Gz(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ZI(this.serializer),t.removeTarget=e,this.a_(t)}},Dw=class extends Yf{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Bz(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=ZI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>jz(this.serializer,r))};this.a_(t)}};var bw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,QI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,QI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Tw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Br(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Sw=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>E(this,null,function*(){$s(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let l=re(c);l.L_.add(4),yield Wu(l),l.q_.set("Unknown"),l.L_.delete(4),yield gp(l)})}(this))}))}),this.q_=new Tw(r,i)}};function gp(n){return E(this,null,function*(){if($s(n))for(let e of n.B_)yield e(!0)})}function Wu(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function GM(n,e){let t=re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),aE(t)?oE(t):Aa(t).r_()&&sE(t,e))}function iE(n,e){let t=re(n),r=Aa(t);t.N_.delete(e),r.r_()&&zM(t,e),t.N_.size===0&&(r.r_()?r.o_():$s(t)&&t.q_.set("Unknown"))}function sE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Aa(n).A_(e)}function zM(n,e){n.Q_.xe(e),Aa(n).R_(e)}function oE(n){n.Q_=new zI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Aa(n).start(),n.q_.v_()}function aE(n){return $s(n)&&!Aa(n).n_()&&n.N_.size>0}function $s(n){return re(n).L_.size===0}function WM(n){n.Q_=void 0}function sW(n){return E(this,null,function*(){n.q_.set("Online")})}function oW(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{sE(n,e)})})}function aW(n,e){return E(this,null,function*(){WM(n),aE(n)?(n.q_.M_(e),oE(n)):n.q_.set("Unknown")})}function cW(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof Hf&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zf(n,r)}else if(e instanceof da?n.Q_.Ke(e):e instanceof $f?n.Q_.He(e):n.Q_.We(e),!t.isEqual(oe.min()))try{let r=yield qM(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Dt.EMPTY_BYTE_STRING,d.snapshotVersion)),zM(s,c);let f=new Lu(d.target,c,l,d.sequenceNumber);sE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Zf(n,r)}})}function Zf(n,e,t){return E(this,null,function*(){if(!zu(e))throw e;n.L_.add(1),yield Wu(n),n.q_.set("Offline"),t||(t=()=>qM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield gp(n)}))})}function KM(n,e){return e().catch(t=>Zf(n,t,e))}function mp(n){return E(this,null,function*(){let e=re(n),t=Oi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uW(e);)try{let i=yield tW(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,lW(e,i)}catch(i){yield Zf(e,i)}QM(e)&&YM(e)})}function uW(n){return $s(n)&&n.O_.length<10}function lW(n,e){n.O_.push(e);let t=Oi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function QM(n){return $s(n)&&!Oi(n).n_()&&n.O_.length>0}function YM(n){Oi(n).start()}function dW(n){return E(this,null,function*(){Oi(n).p_()})}function hW(n){return E(this,null,function*(){let e=Oi(n);for(let t of n.O_)e.m_(t.mutations)})}function fW(n,e,t){return E(this,null,function*(){let r=n.O_.shift(),i=$I.from(r,e,t);yield KM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield mp(n)})}function pW(n,e){return E(this,null,function*(){e&&Oi(n).V_&&(yield function(r,i){return E(this,null,function*(){if(function(o){return Mz(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Oi(r).s_(),yield KM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield mp(r)}})}(n,e)),QM(n)&&YM(n)})}function JN(n,e){return E(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=$s(t);t.L_.add(3),yield Wu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield gp(t)})}function gW(n,e){return E(this,null,function*(){let t=re(n);e?(t.L_.delete(2),yield gp(t)):e||(t.L_.add(2),yield Wu(t),t.q_.set("Unknown"))})}function Aa(n){return n.K_||(n.K_=function(t,r,i){let s=re(t);return s.w_(),new Cw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:sW.bind(null,n),Ro:oW.bind(null,n),mo:aW.bind(null,n),d_:cW.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),aE(n)?oE(n):n.q_.set("Unknown")):(yield n.K_.stop(),WM(n))}))),n.K_}function Oi(n){return n.U_||(n.U_=function(t,r,i){let s=re(t);return s.w_(),new Dw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dW.bind(null,n),mo:pW.bind(null,n),f_:hW.bind(null,n),g_:fW.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.U_.s_(),yield mp(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Aw=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cE(n,e){if(Br("AsyncQueue",`${e}: ${n}`),zu(n))return new V(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Jf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xf=class{constructor(){this.W_=new Qe(Q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ca=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Jf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Rw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Nw=class{constructor(){this.queries=XN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=re(t),s=i.queries;i.queries=XN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function XN(){return new ki(n=>CM(n),hp)}function mW(n,e){return E(this,null,function*(){let t=re(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Rw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=cE(o,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&uE(t)})}function yW(n,e){return E(this,null,function*(){let t=re(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function _W(n,e){let t=re(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&uE(t)}function vW(n,e,t){let r=re(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function uE(n){n.Y_.forEach(e=>{e.next()})}var Mw,eM;(eM=Mw||(Mw={})).ea="default",eM.Cache="cache";var xw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mw.Cache}};var ep=class{constructor(e){this.key=e}},tp=class{constructor(e){this.key=e}},Pw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=DM(e),this.Ra=new Jf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Xf,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=fp(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?w!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(g,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(y,w){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return N(y)-N(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ca(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new tp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ep(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ca.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},kw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ow=class{constructor(e){this.key=e,this.va=!1}},Fw=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(a=>CM(a),hp),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(Q.comparator),this.Na=new Map,this.La=new Uu,this.Ba={},this.ka=new Map,this.qa=Vu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function IW(n,e,t=!0){return E(this,null,function*(){let r=nx(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield ZM(r,e,t,!0),i})}function wW(n,e){return E(this,null,function*(){let t=nx(n);yield ZM(t,e,!0,!1)})}function ZM(n,e,t,r){return E(this,null,function*(){let i=yield nW(n.localStore,rr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield EW(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&GM(n.remoteStore,i),a})}function EW(n,e,t,r,i){return E(this,null,function*(){n.Ka=(f,g,y)=>function(N,R,F,U){return E(this,null,function*(){let q=R.view.ma(F);q.ns&&(q=yield ZN(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,q)));let ie=U&&U.targetChanges.get(R.targetId),ke=U&&U.targetMismatches.get(R.targetId)!=null,se=R.view.applyChanges(q,N.isPrimaryClient,ie,ke);return nM(N,R.targetId,se.wa),se.snapshot})}(n,f,g,y);let s=yield ZN(n.localStore,e,!0),o=new Pw(e,s.Ts),a=o.ma(s.documents),c=Fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);nM(n,t,l.wa);let d=new kw(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function CW(n,e,t){return E(this,null,function*(){let r=re(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!hp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _w(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&iE(r.remoteStore,i.targetId),Lw(r,i.targetId)}).catch(Gu))):(Lw(r,i.targetId),yield _w(r.localStore,i.targetId,!0))})}function DW(n,e){return E(this,null,function*(){let t=re(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),iE(t.remoteStore,r.targetId))})}function bW(n,e,t){return E(this,null,function*(){let r=xW(n);try{let i=yield function(o,a){let c=re(o),l=mt.now(),d=a.reduce((y,w)=>y.add(w.key),ge()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Hr(),N=ge();return c.cs.getEntries(y,d).next(R=>{w=R,w.forEach((F,U)=>{U.isValidDocument()||(N=N.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(R=>{f=R;let F=[];for(let U of a){let q=Nz(U,f.get(U.key).overlayedDocument);q!=null&&F.push(new or(U.key,q,mM(q.value.mapValue),jr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,F,a)}).next(R=>{g=R;let F=R.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:g.batchId,changes:TM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Qe(De)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Ku(r,i.changes),yield mp(r.remoteStore)}catch(i){let s=cE(i,"Failed to persist write");t.reject(s)}})}function JM(n,e){return E(this,null,function*(){let t=re(n);try{let r=yield Xz(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),yield Ku(t,r,e)}catch(r){yield Gu(r)}})}function tM(n,e,t){let r=re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=re(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&uE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TW(n,e,t){return E(this,null,function*(){let r=re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Qe(Q.comparator);o=o.insert(s,Sn.newNoDocument(s,oe.min()));let a=ge().add(s),c=new Bf(oe.min(),new Map,new Qe(De),o,a);yield JM(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),lE(r)}else yield _w(r.localStore,e,!1).then(()=>Lw(r,e,t)).catch(Gu)})}function SW(n,e){return E(this,null,function*(){let t=re(n),r=e.batch.batchId;try{let i=yield Jz(t.localStore,e);ex(t,r,null),XM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ku(t,i)}catch(i){yield Gu(i)}})}function AW(n,e,t){return E(this,null,function*(){let r=re(n);try{let i=yield function(o,a){let c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Te(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);ex(r,e,t),XM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ku(r,i)}catch(i){yield Gu(i)}})}function XM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ex(n,e,t){let r=re(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Lw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||tx(n,r)})}function tx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(iE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),lE(n))}function nM(n,e,t){for(let r of t)r instanceof ep?(n.La.addReference(r.key,e),RW(n,r)):r instanceof tp?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||tx(n,r.key)):X()}function RW(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),lE(n))}function lE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Q(He.fromString(e)),r=n.qa.next();n.Na.set(r,new Ow(t)),n.Oa=n.Oa.insert(t,r),GM(n.remoteStore,new Lu(rr(tE(t.path)),r,"TargetPurposeLimboResolution",hM.oe))}}function Ku(n,e,t){return E(this,null,function*(){let r=re(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=pw.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return E(this,null,function*(){let d=re(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!zu(f))throw f;j("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,N)}}})}(r.localStore,s))})}function NW(n,e){return E(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield HM(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ku(t,r.hs)}})}function MW(n,e){let t=re(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function nx(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TW.bind(null,e),e.Ca.d_=_W.bind(null,e.eventManager),e.Ca.$a=vW.bind(null,e.eventManager),e}function xW(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AW.bind(null,e),e}var rM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=pp(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Zz(this.persistence,new mw,t.initialUser,this.serializer)}Ga(t){return new dw(fw.Zr,this.serializer)}Wa(t){return new vw}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var PW=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NW.bind(null,this.syncEngine),yield gW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Nw}()}createDatastore(t){let r=pp(t.databaseInfo.databaseId),i=function(o){return new Ew(o)}(t.databaseInfo);return function(o,a,c,l){return new bw(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new Sw(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>tM(this.syncEngine,r,0),function(){return Kf.D()?new Kf:new Iw}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let g=new Fw(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(s){return E(this,null,function*(){let o=re(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Wu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Vw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Uw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>E(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pI(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield HM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function iM(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield kW(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JN(e.remoteStore,i)),n._onlineComponents=e})}function kW(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fa("Error using user provided cache. Falling back to memory cache: "+t),yield pI(n,new rM)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield pI(n,new rM);return n._offlineComponents})}function rx(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield iM(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield iM(n,new PW))),n._onlineComponents})}function OW(n){return rx(n).then(e=>e.syncEngine)}function sM(n){return E(this,null,function*(){let e=yield rx(n),t=e.eventManager;return t.onListen=IW.bind(null,e.syncEngine),t.onUnlisten=CW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DW.bind(null,e.syncEngine),t})}function ix(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var oM=new Map;function sx(n,e,t){if(!t)throw new V(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FW(n,e,t,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aM(n){if(!Q.isDocumentKey(n))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cM(n){if(Q.isDocumentKey(n))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function Mi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yp(n);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var np=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Da=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new np({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new np(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gI;switch(r.type){case"firstParty":return new vI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=oM.get(t);r&&(j("ComponentProvider","Removing Datastore"),oM.delete(t),r.terminate())}(this),Promise.resolve()}};function ox(n,e,t,r={}){var i;let s=(n=Mi(n,Da))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=lt.MOCK_USER;else{a=rf(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new lt(l)}n._authCredentials=new mI(new kf(a,c))}}var ba=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Bt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},xi=class n extends ba{constructor(e,t,r){super(e,t,tE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ax(n,e,...t){if(n=Je(n),sx("collection","path",e),n instanceof Da){let r=He.fromString(e,...t);return cM(r),new xi(n,null,r)}{if(!(n instanceof Bt||n instanceof xi))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(He.fromString(e,...t));return cM(r),new xi(n.firestore,null,r)}}function dE(n,e,...t){if(n=Je(n),arguments.length===1&&(e=Of.newId()),sx("doc","path",e),n instanceof Da){let r=He.fromString(e,...t);return aM(r),new Bt(n,null,new Q(r))}{if(!(n instanceof Bt||n instanceof xi))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(He.fromString(e,...t));return aM(r),new Bt(n.firestore,n instanceof xi?n.converter:null,new Q(r))}}var rp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Qf(this,"async_queue_retry"),this.Vu=()=>{let r=fI();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=fI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=fI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zu(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Aw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function uM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Fi=class extends Da{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rp(e),this._firestoreClient=void 0,yield e}})}};function cx(n,e){let t=typeof n=="object"?n:Di(),r=typeof n=="string"?n:e||"(default)",i=Cs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=nf("firestore");s&&ox(i,...s)}return i}function ux(n){if(n._terminated)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LW(n),n._firestoreClient}function LW(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new DI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ix(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Uw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var ju=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Dt.fromBase64String(e))}catch(t){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ta=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bu=class{constructor(e){this._methodName=e}};var $u=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var Hu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var VW=/^__.*__$/,jw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new js(e,this.data,t,this.fieldTransforms)}},ip=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new or(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var Bw=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return op(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lx(this.Cu)&&VW.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},$w=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pp(e)}Qu(e,t,r,i=!1){return new Bw({Cu:e,methodName:t,qu:r,path:Xt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hE(n){let e=n._freezeSettings(),t=pp(n._databaseId);return new $w(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UW(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);fE("Data must be an object, but it was:",o,r);let a=dx(r,o),c,l;if(s.merge)c=new ln(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=Hw(e,f,t);if(!o.contains(g))throw new V(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fx(d,g)||d.push(g)}c=new ln(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new jw(new Jt(a),c,l)}var sp=class n extends Bu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function jW(n,e,t,r){let i=n.Qu(1,e,t);fE("Data must be an object, but it was:",i,r);let s=[],o=Jt.empty();Bs(r,(c,l)=>{let d=pE(e,c,t);l=Je(l);let f=i.Nu(d);if(l instanceof sp)s.push(d);else{let g=Qu(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new ln(s);return new ip(o,a,i.fieldTransforms)}function BW(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[Hw(e,r,t)],c=[i];if(s.length%2!=0)throw new V(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Hw(e,s[g])),c.push(s[g+1]);let l=[],d=Jt.empty();for(let g=a.length-1;g>=0;--g)if(!fx(l,a[g])){let y=a[g],w=c[g];w=Je(w);let N=o.Nu(y);if(w instanceof sp)l.push(y);else{let R=Qu(w,N);R!=null&&(l.push(y),d.set(y,R))}}let f=new ln(l);return new ip(d,f,o.fieldTransforms)}function $W(n,e,t,r=!1){return Qu(t,n.Qu(r?4:3,e))}function Qu(n,e){if(hx(n=Je(n)))return fE("Unsupported field value:",e,n),dx(n,e);if(n instanceof Bu)return function(r,i){if(!lx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Qu(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=mt.fromDate(r);return{timestampValue:Gf(i.serializer,s)}}if(r instanceof mt){let s=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gf(i.serializer,s)}}if(r instanceof $u)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ju)return{bytesValue:FM(i.serializer,r._byteString)};if(r instanceof Bt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return nE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yp(r)}`)}(n,e)}function dx(n,e){let t={};return fM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(n,(r,i)=>{let s=Qu(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function hx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof $u||n instanceof ju||n instanceof Bt||n instanceof Bu||n instanceof Hu)}function fE(n,e,t){if(!hx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Hw(n,e,t){if((e=Je(e))instanceof Ta)return e._internalPath;if(typeof e=="string")return pE(n,e);throw op("Field path arguments must be of type string or ",n,!1,void 0,t)}var HW=new RegExp("[~\\*/\\[\\]]");function pE(n,e,t){if(e.search(HW)>=0)throw op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ta(...e.split("."))._internalPath}catch{throw op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function op(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(M.INVALID_ARGUMENT,a+n+c)}function fx(n,e){return n.some(t=>t.isEqual(e))}var ap=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qw=class extends ap{data(){return super.data()}};function gE(n,e){return typeof e=="string"?pE(n,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}function qW(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qu=class{},Gw=class extends qu{};function px(n,e,...t){let r=[];e instanceof qu&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof zw).length,a=s.filter(c=>c instanceof cp).length;if(o>1||o>0&&a>0)throw new V(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var cp=class n extends Gw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return mx(e._query,t),new ba(e.firestore,e.converter,LI(e._query,t))}_parse(e){let t=hE(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new V(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){dM(f,d);let y=[];for(let w of f)y.push(lM(c,s,w));g={arrayValue:{values:y}}}else g=lM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||dM(f,d),g=$W(a,o,f,d==="in"||d==="not-in");return nt.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function gx(n,e,t){let r=e,i=gE("where",n);return cp._create(i,r,t)}var zw=class n extends qu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:An.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)mx(o,c),o=LI(o,c)}(e._query,t),new ba(e.firestore,e.converter,LI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function lM(n,e,t){if(typeof(t=Je(t))=="string"){if(t==="")throw new V(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EM(e)&&t.indexOf("/")!==-1)throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(He.fromString(t));if(!Q.isDocumentKey(r))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kN(n,new Q(r))}if(t instanceof Bt)return kN(n,t._key);throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yp(t)}.`)}function dM(n,e){if(!Array.isArray(n)||n.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mx(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ww=class{convertValue(e,t="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Bs(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Be(o.doubleValue));return new Hu(s)}convertGeoPoint(e){return new $u(Be(e.latitude),Be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Zw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){let t=$r(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=He.fromString(e);Te($M(r));let i=new Uf(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(t)||Br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function GW(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ps=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},up=class extends ap{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ha=class extends up{data(e={}){return super.data(e)}},Kw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ha(this._firestore,this._userDataWriter,r.key,r,new Ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:zW(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function zW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}var lp=class extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}};function yx(n,e,t,...r){n=Mi(n,Bt);let i=Mi(n.firestore,Fi),s=hE(i),o;return o=typeof(e=Je(e))=="string"||e instanceof Ta?BW(s,"updateDoc",n._key,e,t,r):jW(s,"updateDoc",n._key,e),yE(i,[o.toMutation(n._key,jr.exists(!0))])}function _x(n){return yE(Mi(n.firestore,Fi),[new Ou(n._key,jr.none())])}function vx(n,e){let t=Mi(n.firestore,Fi),r=dE(n),i=GW(n.converter,e);return yE(t,[UW(hE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}function mE(n,...e){var t,r,i;n=Je(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||uM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uM(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Bt)l=Mi(n.firestore,Fi),d=tE(n._key.path),c={next:f=>{e[o]&&e[o](WW(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Mi(n,ba);l=Mi(f.firestore,Fi),d=f._query;let g=new lp(l);c={next:y=>{e[o]&&e[o](new Kw(l,g,f,y))},error:e[o+1],complete:e[o+2]},qW(n._query)}return function(g,y,w,N){let R=new Vw(N),F=new xw(y,R,w);return g.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return mW(yield sM(g),F)})),()=>{R.Za(),g.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return yW(yield sM(g),F)}))}}(ux(l),d,a,c)}function yE(n,e){return function(r,i){let s=new Ur;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return bW(yield OW(r),i,s)})),s.promise}(ux(n),e)}function WW(n,e,t){let r=t.docs.get(e._key),i=new lp(n);return new up(n,i,e._key,r,new Ps(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Sa=i})(Xn),Jn(new jt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Fi(new yI(r.getProvider("auth-internal")),new wI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),je(NN,"4.7.3",e),je(NN,"4.7.3","esm2017")})();var _p=function(){return _p=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},_p.apply(this,arguments)};var YW={includeMetadataChanges:!1};function _E(n,e){return e===void 0&&(e=YW),new ne(function(t){var r=mE(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ix(n){return _E(n,{includeMetadataChanges:!0})}function wx(n,e){return e===void 0&&(e={}),Ix(n).pipe(Z(function(t){return vE(t,e)}))}function vE(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:_p(_p({},r),(t={},t[e.idField]=n.id,t))}function Ex(n){return _E(n,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function Cx(n,e){return e===void 0&&(e={}),Ex(n).pipe(Z(function(t){return t.map(function(r){return vE(r,e)})}))}var qr=class{constructor(e){return e}},Dx="firestore",IE=class{constructor(){return bs(Dx)}};var wE=new B("angularfire2.firestore-instances");function ZW(n,e){let t=ra(Dx,n,e);return t&&new qr(t)}function JW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qr(r)}}var XW={provide:IE,deps:[[new We,wE]]},e4={provide:qr,useFactory:ZW,deps:[[new We,wE],Tn]};function bx(n,...e){return je("angularfire",kr.full,"fst"),Ft([e4,XW,{provide:wE,useFactory:JW(n),multi:!0,deps:[_e,Ze,Ti,Or,[new We,Ns],[new We,bi],...e]}])}var Yu=gt(Cx,!0);var EE=gt(wx,!0);var CE=gt(vx,!0);var Hs=gt(ax,!0);var DE=gt(_x,!0);var qs=gt(dE,!0);var Tx=gt(cx,!0);var bE=gt(px,!0);var TE=gt(yx,!0);var vp=gt(gx,!0);var Ax="@firebase/database",Rx="1.0.8";var DC="";function t4(n){DC=n}var kE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ta(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var OE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Qn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var aP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kE(e)}}catch{}return new OE},zs=aP("localStorage"),FE=aP("sessionStorage");var xa=new Yn("@firebase/database"),n4=function(){let n=1;return function(){return n++}}(),cP=function(n){let e=IR(n),t=new Xh;t.update(e);let r=t.digest();return ef.encodeByteArray(r)},ul=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ul.apply(null,r):typeof r=="object"?e+=ut(r):e+=r,e+=" "}return e},Ws=null,Nx=!0,r4=function(n,e){L(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(xa.logLevel=de.VERBOSE,Ws=xa.log.bind(xa),e&&FE.set("logging_enabled",!0)):typeof n=="function"?Ws=n:(Ws=null,FE.remove("logging_enabled"))},bt=function(...n){if(Nx===!0&&(Nx=!1,Ws===null&&FE.get("logging_enabled")===!0&&r4(!0)),Ws){let e=ul.apply(null,n);Ws(e)}},ll=function(n){return function(...e){bt(n,...e)}},LE=function(...n){let e="FIREBASE INTERNAL ERROR: "+ul(...n);xa.error(e)},zr=function(...n){let e=`FIREBASE FATAL ERROR: ${ul(...n)}`;throw xa.error(e),new Error(e)},en=function(...n){let e="FIREBASE WARNING: "+ul(...n);xa.warn(e)},i4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&en("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uP=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},s4=function(n){if(Kn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ka="[MIN_NAME]",Ks="[MAX_NAME]",Ba=function(n,e){if(n===e)return 0;if(n===ka||e===Ks)return-1;if(e===ka||n===Ks)return 1;{let t=Mx(n),r=Mx(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},o4=function(n,e){return n===e?0:n<e?-1:1},Zu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ut(e))},bC=function(n){if(typeof n!="object"||n===null)return ut(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=ut(e[r]),t+=":",t+=bC(n[e[r]]);return t+="}",t},lP=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function fn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var dP=function(n){L(!uP(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},a4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},c4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var u4=new RegExp("^-?(0*)\\d{1,10}$"),l4=-2147483648,d4=2147483647,Mx=function(n){if(u4.test(n)){let e=Number(n);if(e>=l4&&e<=d4)return e}return null},dl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw en("Exception was thrown by user callback.",t),e},Math.floor(0))}},h4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var VE=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){en(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var UE=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',en(e)}},rl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),wp="5",hP="v",fP="s",pP="r",gP="f",mP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yP="ls",_P="p",jE="ac",vP="websocket",IP="long_polling";var Ep=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function f4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function wP(n,e,t){L(typeof e=="string","typeof type must == string"),L(typeof t=="object","typeof params must == object");let r;if(e===vP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===IP)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);f4(n)&&(t.ns=n.namespace);let i=[];return fn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var BE=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Qn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return cR(this.counters_)}};var SE={},AE={};function TC(n){let e=n.toString();return SE[e]||(SE[e]=new BE),SE[e]}function p4(n,e){let t=n.toString();return AE[t]||(AE[t]=e()),AE[t]}var $E=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xx="start",g4="close",m4="pLPCommand",y4="pRTLPCB",EP="id",CP="pw",DP="ser",_4="cb",v4="seg",I4="ts",w4="d",E4="dframe",bP=1870,TP=30,C4=bP-TP,D4=25e3,b4=3e4,HE=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ll(e),this.stats_=TC(t),this.urlFn=c=>(this.appCheckToken&&(c[jE]=this.appCheckToken),wP(t,IP,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $E(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(b4)),s4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===xx)this.id=a,this.password=c;else if(o===g4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[xx]="t",r[DP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[_4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hP]=wp,this.transportSessionId&&(r[fP]=this.transportSessionId),this.lastSessionId&&(r[yP]=this.lastSessionId),this.applicationId&&(r[_P]=this.applicationId),this.appCheckToken&&(r[jE]=this.appCheckToken),typeof location<"u"&&location.hostname&&mP.test(location.hostname)&&(r[pP]=gP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Kn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a4()&&!c4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=rv(t),i=lP(r,C4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Kn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[E4]="t",r[EP]=e,r[CP]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},qE=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Kn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=n4(),window[m4+this.uniqueCallbackIdentifier]=e,window[y4+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){bt("frame writing exception"),a.stack&&bt(a.stack),bt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[EP]=this.myID,e[CP]=this.myPW,e[DP]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TP+r.length<=bP;){let o=this.pendingSegs.shift();r=r+"&"+v4+i+"="+o.seg+"&"+I4+i+"="+o.ts+"&"+w4+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(D4)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Kn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var T4=16384,S4=45e3,Cp=null;typeof MozWebSocket<"u"?Cp=MozWebSocket:typeof WebSocket<"u"&&(Cp=WebSocket);var Ju=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ll(this.connId),this.stats_=TC(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[hP]=wp,!Kn()&&typeof location<"u"&&location.hostname&&mP.test(location.hostname)&&(a[pP]=gP),r&&(a[fP]=r),i&&(a[yP]=i),s&&(a[jE]=s),o&&(a[_P]=o),wP(t,vP,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zs.set("previous_websocket_failure",!0);try{let i;if(Kn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wp}/${DC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Cp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Cp!==null&&!n.forceDisallow_}static previouslyFailed(){return zs.isInMemoryStorage||zs.get("previous_websocket_failure")===!0}markConnectionHealthy(){zs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ta(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(L(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=ut(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=lP(r,T4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S4))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),A4=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[HE,Ju]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Ju&&Ju.isAvailable(),i=r&&!Ju.previouslyFailed();if(t.webSocketOnly&&(r||en("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ju];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),R4=6e4,N4=5e3,M4=10*1024,x4=100*1024,RE="t",Px="d",P4="s",kx="r",k4="e",Ox="o",Fx="a",Lx="n",Vx="p",O4="h",GE=class{constructor(e,t,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ll("c:"+this.id+":"),this.transportManager_=new A4(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=nl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>x4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>M4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(RE in e){let t=e[RE];t===Fx?this.upgradeIfSecondaryHealthy_():t===kx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Ox&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Zu("t",e),r=Zu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Fx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Lx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Zu("t",e),r=Zu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Zu(RE,e);if(Px in e){let r=e[Px];if(t===O4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===Lx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===P4?this.onConnectionShutdown_(r):t===kx?this.onReset_(r):t===k4?LE("Server Error: "+r):t===Ox?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LE("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wp!==r&&en("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),nl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(R4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(N4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vx,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Dp=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var bp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Tp=class n extends bp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!du()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Ux=32,jx=768,Pe=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Re(){return new Pe("")}function Ie(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vi(n){return n.pieces_.length-n.pieceNum_}function Fe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pe(n.pieces_,e)}function SP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function F4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function AP(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function RP(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pe(e,0)}function dt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pe(t,0)}function ye(n){return n.pieceNum_>=n.pieces_.length}function dn(n,e){let t=Ie(n),r=Ie(e);if(t===null)return e;if(t===r)return dn(Fe(n),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function NP(n,e){if(Vi(n)!==Vi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Nn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vi(n)>Vi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var zE=class{constructor(e,t){this.errorPrefix_=t,this.parts_=AP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pu(this.parts_[r]);MP(this)}};function L4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=pu(e),MP(n)}function V4(n){let e=n.parts_.pop();n.byteLength_-=pu(e),n.parts_.length>0&&(n.byteLength_-=1)}function MP(n){if(n.byteLength_>jx)throw new Error(n.errorPrefix_+"has a key path longer than "+jx+" bytes ("+n.byteLength_+").");if(n.parts_.length>Ux)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ux+") or object contains a cycle "+Gs(n))}function Gs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var WE=class n extends bp{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var Xu=1e3,U4=60*5*1e3,Bx=30*1e3,j4=1.3,B4=3e4,$4="server_kill",$x=3,SC=(()=>{class n extends Dp{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=ll("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xu,this.maxReconnectDelay_=U4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Kn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");WE.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Tp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ut(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new ys,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),L(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Qn(t,"w")){let i=vs(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();en(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||yR(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bx)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=mR(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ut(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):LE("Unrecognized action received from server: "+ut(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>B4&&(this.reconnectDelay_=Xu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*j4)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){L(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new GE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{en(w+" ("+this.repoInfo_.toString()+")"),this.interrupt($4)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&en(g),l())}}})}interrupt(t){bt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],hu(this.interruptReasons_)&&(this.reconnectDelay_=Xu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>bC(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Pe(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){bt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$x&&(this.reconnectDelay_=Bx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){bt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$x&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Kn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+DC.replace(/\./g,"-")]=1,du()?t["framework.cordova"]=1:sf()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Tp.getInstance().currentlyOnline();return hu(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),we=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Oa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new we(ka,e),i=new we(ka,t);return this.compare(r,i)!==0}minPost(){return we.MIN}};var Ip,Sp=class extends Oa{static get __EMPTY_NODE(){return Ip}static set __EMPTY_NODE(e){Ip=e}compare(e,t){return Ba(e.name,t.name)}isDefinedOn(e){throw _s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return we.MIN}maxPost(){return new we(Ks,Ip)}makePost(e,t){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,Ip)}toString(){return".key"}},Pa=new Sp;var Na=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??hn.EMPTY_NODE,this.right=o??hn.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return hn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),KE=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Rn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},hn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Rn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Na(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Na(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Na(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Na(this.root_,null,this.comparator_,!0,e)}};hn.EMPTY_NODE=new KE;function H4(n,e){return Ba(n.name,e.name)}function AC(n,e){return Ba(n,e)}var QE;function q4(n){QE=n}var xP=function(n){return typeof n=="number"?"number:"+dP(n):"string:"+n},PP=function(n){if(n.isLeafNode()){let e=n.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qn(e,".sv"),"Priority must be a string or number.")}else L(n===QE||n.isEmpty(),"priority of unexpected type.");L(n===QE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Hx,Fa=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PP(this.priorityNode_)}static set __childrenNodeConstructor(t){Hx=t}static get __childrenNodeConstructor(){return Hx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ye(t)?this:Ie(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Ie(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||Vi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xP(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=dP(this.value_):t+=this.value_,this.lazyHash_=cP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(L(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+r),L(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),kP,OP;function G4(n){kP=n}function z4(n){OP=n}var YE=class extends Oa{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Ba(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return we.MIN}maxPost(){return new we(Ks,new Fa("[PRIORITY-POST]",OP))}makePost(e,t){let r=kP(e);return new we(t,new Fa("[PRIORITY-POST]",r))}toString(){return".priority"}},St=new YE;var W4=Math.log(2),ZE=class{constructor(e){let t=s=>parseInt(Math.log(s)/W4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ap=function(n,e,t,r){n.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new Rn(g,f.node,Rn.BLACK,null,null);{let y=parseInt(d/2,10)+c,w=i(c,y),N=i(y+1,l);return f=n[y],g=t?t(f):f,new Rn(g,f.node,Rn.BLACK,w,N)}},s=function(c){let l=null,d=null,f=n.length,g=function(w,N){let R=f-w,F=f;f-=w;let U=i(R+1,F),q=n[R],ie=t?t(q):q;y(new Rn(ie,q.node,N,null,U))},y=function(w){l?(l.left=w,l=w):(d=w,l=w)};for(let w=0;w<c.count;++w){let N=c.nextBitIsOne(),R=Math.pow(2,c.count-(w+1));N?g(R,Rn.BLACK):(g(R,Rn.BLACK),g(R,Rn.RED))}return d},o=new ZE(n.length),a=s(o);return new hn(r||e,a)};var NE,Ra={},La=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return L(Ra&&St,"ChildrenNode.ts has not been loaded"),NE=NE||new n({".priority":Ra},{".priority":St}),NE}get(e){let t=vs(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hn?t:null}hasIndex(e){return Qn(this.indexSet_,e.toString())}addIndex(e,t){L(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(we.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ap(r,e.getCompare()):a=Ra;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,l)}addToIndexes(e,t){let r=fu(this.indexes_,(i,s)=>{let o=vs(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===Ra)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(we.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Ap(a,o.getCompare())}else return Ra;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new we(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=fu(this.indexes_,i=>{if(i===Ra)return i;{let s=t.get(e.name);return s?i.remove(new we(e.name,s)):i}});return new n(r,this.indexSet_)}};var el,qe=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&PP(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return el||(el=new n(new hn(AC),null,La.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||el}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?el:r}}getChild(t){let r=Ie(t);return r===null?this:this.getImmediateChild(r).getChild(Fe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(L(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new we(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?el:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Ie(t);if(i===null)return r;{L(Ie(t)!==".priority"||Vi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Fe(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(St,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+xP(this.getPriority().val())+":"),this.forEachChild(St,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":cP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new we(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new we(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new we(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hl?-1:0}withIndex(t){if(t===Pa||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(St),s=r.getIterator(St),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),JE=class extends qe{constructor(){super(new hn(AC),qe.EMPTY_NODE,La.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}},hl=new JE;Object.defineProperties(we,{MIN:{value:new we(ka,qe.EMPTY_NODE)},MAX:{value:new we(Ks,hl)}});Sp.__EMPTY_NODE=qe.EMPTY_NODE;Fa.__childrenNodeConstructor=qe;q4(hl);z4(hl);var K4=!0;function Tt(n,e=null){if(n===null)return qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Fa(t,Tt(e))}if(!(n instanceof Array)&&K4){let t=[],r=!1;if(fn(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Tt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new we(o,c)))}}),t.length===0)return qe.EMPTY_NODE;let s=Ap(t,H4,o=>o.name,AC);if(r){let o=Ap(t,St.getCompare());return new qe(s,Tt(e),new La({".priority":o},{".priority":St}))}else return new qe(s,Tt(e),La.Default)}else{let t=qe.EMPTY_NODE;return fn(n,(r,i)=>{if(Qn(n,r)&&r.substring(0,1)!=="."){let s=Tt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Tt(e))}}G4(Tt);var XE=class extends Oa{constructor(e){super(),this.indexPath_=e,L(!ye(e)&&Ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Ba(e.name,t.name):s}makePost(e,t){let r=Tt(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new we(t,i)}maxPost(){let e=qe.EMPTY_NODE.updateChild(this.indexPath_,hl);return new we(Ks,e)}toString(){return AP(this.indexPath_,0).join("/")}};var eC=class extends Oa{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Ba(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,t){let r=Tt(e);return new we(t,r)}toString(){return".value"}},Q4=new eC;function Y4(n){return{type:"value",snapshotNode:n}}function Z4(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function J4(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function qx(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function X4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var tC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=St}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ka}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ks}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===St}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Gx(n){let e={};if(n.isDefault())return e;let t;if(n.index_===St?t="$priority":n.index_===Q4?t="$value":n.index_===Pa?t="$key":(L(n.index_ instanceof XE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ut(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=ut(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ut(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ut(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ut(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zx(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==St&&(e.i=n.index_.toString()),e}var nC=class n extends Dp{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ll("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=Gx(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),vs(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=Gx(e._queryParams),r=e._path.toString(),i=new ys;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ws(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ta(a.responseText)}catch{en("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&en("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var rC=class{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Rp(){return{value:null,children:new Map}}function FP(n,e,t){if(ye(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Ie(e);n.children.has(r)||n.children.set(r,Rp());let i=n.children.get(r);e=Fe(e),FP(i,e,t)}}function iC(n,e,t){n.value!==null?t(e,n.value):e3(n,(r,i)=>{let s=new Pe(e.toString()+"/"+r);iC(i,s,t)})}function e3(n,e){n.children.forEach((t,r)=>{e(r,t)})}var sC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var Wx=10*1e3,t3=30*1e3,n3=5*60*1e3,oC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sC(e);let r=Wx+(t3-Wx)*Math.random();nl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;fn(e,(i,s)=>{s>0&&Qn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),nl(this.reportStats_.bind(this),Math.floor(Math.random()*2*n3))}};var Gr=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Gr||{});function LP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function VP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function UP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var aC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Gr.ACK_USER_WRITE,this.source=LP()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Pe(e));return new n(Re(),t,this.revert)}}else return L(Ie(this.path)===e,"operationForChild called for unrelated child."),new n(Fe(this.path),this.affectedTree,this.revert)}};var Va=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Gr.OVERWRITE}operationForChild(e){return ye(this.path)?new n(this.source,Re(),this.snap.getImmediateChild(e)):new n(this.source,Fe(this.path),this.snap)}};var Np=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Gr.MERGE}operationForChild(e){if(ye(this.path)){let t=this.children.subtree(new Pe(e));return t.isEmpty()?null:t.value?new Va(this.source,Re(),t.value):new n(this.source,Re(),t)}else return L(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ol=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let t=Ie(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function r3(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(X4(o.childName,o.snapshotNode))}),tl(n,i,"child_removed",e,r,t),tl(n,i,"child_added",e,r,t),tl(n,i,"child_moved",s,r,t),tl(n,i,"child_changed",e,r,t),tl(n,i,"value",e,r,t),i}function tl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>s3(n,a,c)),o.forEach(a=>{let c=i3(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function i3(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function s3(n,e,t){if(e.childName==null||t.childName==null)throw _s("Should only compare child_ events.");let r=new we(e.childName,e.snapshotNode),i=new we(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function jP(n,e){return{eventCache:n,serverCache:e}}function il(n,e,t,r){return jP(new ol(e,t,r),n.serverCache)}function BP(n,e,t,r){return jP(n.eventCache,new ol(e,t,r))}function cC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Qs(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var ME,o3=()=>(ME||(ME=new hn(o4)),ME),$t=class n{constructor(e,t=o3()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return fn(e,(r,i)=>{t=t.set(new Pe(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Re(),value:this.value};if(ye(e))return null;{let r=Ie(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Fe(e),t);return s!=null?{path:dt(new Pe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let t=Ie(e),r=this.children.get(t);return r!==null?r.subtree(Fe(e)):new n(null)}}set(e,t){if(ye(e))return new n(t,this.children);{let r=Ie(e),s=(this.children.get(r)||new n(null)).set(Fe(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Ie(e),r=this.children.get(t);if(r){let i=r.remove(Fe(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{let t=Ie(e),r=this.children.get(t);return r?r.get(Fe(e)):null}}setTree(e,t){if(ye(e))return t;{let r=Ie(e),s=(this.children.get(r)||new n(null)).setTree(Fe(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(dt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Re(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(ye(e))return null;{let s=Ie(e),o=this.children.get(s);return o?o.findOnPath_(Fe(e),dt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Re(),t)}foreachOnPath_(e,t,r){if(ye(e))return this;{this.value&&r(t,this.value);let i=Ie(e),s=this.children.get(i);return s?s.foreachOnPath_(Fe(e),dt(t,i),r):new n(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(dt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Mn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new $t(null))}};function sl(n,e,t){if(ye(e))return new Mn(new $t(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=dn(i,e);return s=s.updateChild(o,t),new Mn(n.writeTree_.set(i,s))}else{let i=new $t(t),s=n.writeTree_.setTree(e,i);return new Mn(s)}}}function Kx(n,e,t){let r=n;return fn(t,(i,s)=>{r=sl(r,dt(e,i),s)}),r}function Qx(n,e){if(ye(e))return Mn.empty();{let t=n.writeTree_.setTree(e,new $t(null));return new Mn(t)}}function uC(n,e){return Ys(n,e)!=null}function Ys(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(dn(t.path,e)):null}function Yx(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(St,(r,i)=>{e.push(new we(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new we(r,i.value))}),e}function Li(n,e){if(ye(e))return n;{let t=Ys(n,e);return t!=null?new Mn(new $t(t)):new Mn(n.writeTree_.subtree(e))}}function lC(n){return n.writeTree_.isEmpty()}function Ua(n,e){return $P(Re(),n.writeTree_,e)}function $P(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=$P(dt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(dt(n,".priority"),r)),t}}function HP(n,e){return KP(e,n)}function a3(n,e,t,r,i){L(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sl(n.visibleWrites,e,t)),n.lastWriteId=r}function c3(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function u3(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);L(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&l3(a,r.path)?i=!1:Nn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return d3(n),!0;if(r.snap)n.visibleWrites=Qx(n.visibleWrites,r.path);else{let a=r.children;fn(a,c=>{n.visibleWrites=Qx(n.visibleWrites,dt(r.path,c))})}return!0}else return!1}function l3(n,e){if(n.snap)return Nn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Nn(dt(n.path,t),e))return!0;return!1}function d3(n){n.visibleWrites=qP(n.allWrites,h3,Re()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function h3(n){return n.visible}function qP(n,e,t){let r=Mn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Nn(t,o)?(a=dn(t,o),r=sl(r,a,s.snap)):Nn(o,t)&&(a=dn(o,t),r=sl(r,Re(),s.snap.getChild(a)));else if(s.children){if(Nn(t,o))a=dn(t,o),r=Kx(r,a,s.children);else if(Nn(o,t))if(a=dn(o,t),ye(a))r=Kx(r,Re(),s.children);else{let c=vs(s.children,Ie(a));if(c){let l=c.getChild(Fe(a));r=sl(r,Re(),l)}}}else throw _s("WriteRecord should have .snap or .children")}}return r}function GP(n,e,t,r,i){if(!r&&!i){let s=Ys(n.visibleWrites,e);if(s!=null)return s;{let o=Li(n.visibleWrites,e);if(lC(o))return t;if(t==null&&!uC(o,Re()))return null;{let a=t||qe.EMPTY_NODE;return Ua(o,a)}}}else{let s=Li(n.visibleWrites,e);if(!i&&lC(s))return t;if(!i&&t==null&&!uC(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Nn(l.path,e)||Nn(e,l.path))},a=qP(n.allWrites,o,e),c=t||qe.EMPTY_NODE;return Ua(a,c)}}}function f3(n,e,t){let r=qe.EMPTY_NODE,i=Ys(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(St,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Li(n.visibleWrites,e);return t.forEachChild(St,(o,a)=>{let c=Ua(Li(s,new Pe(o)),a);r=r.updateImmediateChild(o,c)}),Yx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Li(n.visibleWrites,e);return Yx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function p3(n,e,t,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=dt(e,t);if(uC(n.visibleWrites,s))return null;{let o=Li(n.visibleWrites,s);return lC(o)?i.getChild(t):Ua(o,i.getChild(t))}}function g3(n,e,t,r){let i=dt(e,t),s=Ys(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Li(n.visibleWrites,i);return Ua(o,r.getNode().getImmediateChild(t))}else return null}function m3(n,e){return Ys(n.visibleWrites,e)}function y3(n,e,t,r,i,s,o){let a,c=Li(n.visibleWrites,e),l=Ys(c,Re());if(l!=null)a=l;else if(t!=null)a=Ua(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=g.getNext();return d}else return[]}function _3(){return{visibleWrites:Mn.empty(),allWrites:[],lastWriteId:-1}}function dC(n,e,t,r){return GP(n.writeTree,n.treePath,e,t,r)}function zP(n,e){return f3(n.writeTree,n.treePath,e)}function Zx(n,e,t,r){return p3(n.writeTree,n.treePath,e,t,r)}function Mp(n,e){return m3(n.writeTree,dt(n.treePath,e))}function v3(n,e,t,r,i,s){return y3(n.writeTree,n.treePath,e,t,r,i,s)}function RC(n,e,t){return g3(n.writeTree,n.treePath,e,t)}function WP(n,e){return KP(dt(n.treePath,e),n.writeTree)}function KP(n,e){return{treePath:n,writeTree:e}}var hC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;L(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,qx(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,J4(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Z4(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,qx(r,e.snapshotNode,i.oldSnap));else throw _s("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var fC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},QP=new fC,al=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new ol(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qs(this.viewCache_),s=v3(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function I3(n,e){L(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function w3(n,e,t,r,i){let s=new hC,o,a;if(t.type===Gr.OVERWRITE){let l=t;l.source.fromUser?o=pC(n,e,l.path,l.snap,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),o=xp(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Gr.MERGE){let l=t;l.source.fromUser?o=C3(n,e,l.path,l.children,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=gC(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Gr.ACK_USER_WRITE){let l=t;l.revert?o=T3(n,e,l.path,r,i,s):o=D3(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Gr.LISTEN_COMPLETE)o=b3(n,e,t.path,r,s);else throw _s("Unknown operation type: "+t.type);let c=s.getChanges();return E3(e,o,c),{viewCache:o,changes:c}}function E3(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=cC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Y4(cC(e)))}}function YP(n,e,t,r,i,s){let o=e.eventCache;if(Mp(r,t)!=null)return e;{let a,c;if(ye(t))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Qs(e),d=l instanceof qe?l:qe.EMPTY_NODE,f=zP(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=dC(r,Qs(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Ie(t);if(l===".priority"){L(Vi(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=Zx(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=Fe(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=Zx(r,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=RC(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return il(e,a,o.isFullyInitialized()||ye(t),n.filter.filtersNodes())}}function xp(n,e,t,r,i,s,o,a){let c=e.serverCache,l,d=o?n.filter:n.filter.getIndexedFilter();if(ye(t))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(t,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=Ie(t);if(!c.isCompleteForPath(t)&&Vi(t)>1)return e;let w=Fe(t),R=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),y,R,w,QP,null)}let f=BP(e,l,c.isFullyInitialized()||ye(t),d.filtersNodes()),g=new al(i,f,s);return YP(n,f,t,i,g,a)}function pC(n,e,t,r,i,s,o){let a=e.eventCache,c,l,d=new al(i,e,s);if(ye(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=il(e,l,!0,n.filter.filtersNodes());else{let f=Ie(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=il(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Fe(t),y=a.getNode().getImmediateChild(f),w;if(ye(g))w=r;else{let N=d.getCompleteChild(f);N!=null?SP(g)===".priority"&&N.getChild(RP(g)).isEmpty()?w=N:w=N.updateChild(g,r):w=qe.EMPTY_NODE}if(y.equals(w))c=e;else{let N=n.filter.updateChild(a.getNode(),f,w,g,d,o);c=il(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function Jx(n,e){return n.eventCache.isCompleteForChild(e)}function C3(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=dt(t,c);Jx(e,Ie(d))&&(a=pC(n,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=dt(t,c);Jx(e,Ie(d))||(a=pC(n,a,d,l,i,s,o))}),a}function Xx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gC(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ye(t)?l=r:l=new $t(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),w=Xx(n,y,g);c=xp(n,c,new Pe(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!y){let w=e.serverCache.getNode().getImmediateChild(f),N=Xx(n,w,g);c=xp(n,c,new Pe(f),N,i,s,o,a)}}),c}function D3(n,e,t,r,i,s,o){if(Mp(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return xp(n,e,t,c.getNode().getChild(t),i,s,a,o);if(ye(t)){let l=new $t(null);return c.getNode().forEachChild(Pa,(d,f)=>{l=l.set(new Pe(d),f)}),gC(n,e,t,l,i,s,a,o)}else return e}else{let l=new $t(null);return r.foreach((d,f)=>{let g=dt(t,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),gC(n,e,t,l,i,s,a,o)}}function b3(n,e,t,r,i){let s=e.serverCache,o=BP(e,s.getNode(),s.isFullyInitialized()||ye(t),s.isFiltered());return YP(n,o,t,r,QP,i)}function T3(n,e,t,r,i,s){let o;if(Mp(r,t)!=null)return e;{let a=new al(r,e,i),c=e.eventCache.getNode(),l;if(ye(t)||Ie(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=dC(r,Qs(e));else{let f=e.serverCache.getNode();L(f instanceof qe,"serverChildren would be complete if leaf node"),d=zP(r,f)}d=d,l=n.filter.updateFullNode(c,d,s)}else{let d=Ie(t),f=RC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=n.filter.updateChild(c,d,f,Fe(t),a,s):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(c,d,qe.EMPTY_NODE,Fe(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=dC(r,Qs(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Mp(r,Re())!=null,il(e,l,o,n.filter.filtersNodes())}}function S3(n,e){let t=Qs(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ye(e)&&!t.getImmediateChild(Ie(e)).isEmpty())?t.getChild(e):null}function eP(n,e,t,r){e.type===Gr.MERGE&&e.source.queryId!==null&&(L(Qs(n.viewCache_),"We should always have a full cache before handling merges"),L(cC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=w3(n.processor_,i,e,t,r);return I3(n.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,A3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function A3(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return r3(n.eventGenerator_,e,t,i)}var tP;function R3(n){L(!tP,"__referenceConstructor has already been defined"),tP=n}function NC(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),eP(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(eP(o,e,t,r));return s}}function MC(n,e){let t=null;for(let r of n.views.values())t=t||S3(r,e);return t}var nP;function N3(n){L(!nP,"__referenceConstructor has already been defined"),nP=n}var Pp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $t(null),this.pendingWriteTree_=_3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function M3(n,e,t,r,i){return a3(n.pendingWriteTree_,e,t,r,i),i?Op(n,new Va(LP(),e,t)):[]}function Ma(n,e,t=!1){let r=c3(n.pendingWriteTree_,e);if(u3(n.pendingWriteTree_,e)){let s=new $t(null);return r.snap!=null?s=s.set(Re(),!0):fn(r.children,o=>{s=s.set(new Pe(o),!0)}),Op(n,new aC(r.path,s,t))}else return[]}function kp(n,e,t){return Op(n,new Va(VP(),e,t))}function x3(n,e,t){let r=$t.fromObject(t);return Op(n,new Np(VP(),e,r))}function P3(n,e,t,r){let i=ek(n,r);if(i!=null){let s=tk(i),o=s.path,a=s.queryId,c=dn(o,e),l=new Va(UP(a),c,t);return nk(n,o,l)}else return[]}function k3(n,e,t,r){let i=ek(n,r);if(i){let s=tk(i),o=s.path,a=s.queryId,c=dn(o,e),l=$t.fromObject(t),d=new Np(UP(a),c,l);return nk(n,o,d)}else return[]}function ZP(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=dn(o,e),l=MC(a,c);if(l)return l});return GP(i,e,s,t,!0)}function Op(n,e){return JP(e,n.syncPointTree_,null,HP(n.pendingWriteTree_,Re()))}function JP(n,e,t,r){if(ye(n.path))return XP(n,e,t,r);{let i=e.get(Re());t==null&&i!=null&&(t=MC(i,Re()));let s=[],o=Ie(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,d=WP(r,o);s=s.concat(JP(a,c,l,d))}return i&&(s=s.concat(NC(i,n,r,t))),s}}function XP(n,e,t,r){let i=e.get(Re());t==null&&i!=null&&(t=MC(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=WP(r,o),d=n.operationForChild(o);d&&(s=s.concat(XP(d,a,c,l)))}),i&&(s=s.concat(NC(i,n,r,t))),s}function ek(n,e){return n.tagToQueryMap.get(e)}function tk(n){let e=n.indexOf("$");return L(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pe(n.substr(0,e))}}function nk(n,e,t){let r=n.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");let i=HP(n.pendingWriteTree_,e);return NC(r,t,i,null)}var mC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},yC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=dt(this.path_,e);return new n(this.syncTree_,t)}node(){return ZP(this.syncTree_,this.path_)}},O3=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},rP=function(n,e,t){if(!n||typeof n!="object")return n;if(L(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return F3(n[".sv"],e,t);if(typeof n[".sv"]=="object")return L3(n[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},F3=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:L(!1,"Unexpected server value: "+n)}},L3=function(n,e,t){n.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);let i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},V3=function(n,e,t,r){return xC(e,new yC(t,n),r)},U3=function(n,e,t){return xC(n,new mC(e),t)};function xC(n,e,t){let r=n.getPriority().val(),i=rP(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=rP(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Fa(a,Tt(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Fa(i))),o.forEachChild(St,(a,c)=>{let l=xC(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var cl=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function PC(n,e){let t=e instanceof Pe?e:new Pe(e),r=n,i=Ie(t);for(;i!==null;){let s=vs(r.node.children,i)||{children:{},childCount:0};r=new cl(i,r,s),t=Fe(t),i=Ie(t)}return r}function $a(n){return n.node.value}function rk(n,e){n.node.value=e,_C(n)}function ik(n){return n.node.childCount>0}function j3(n){return $a(n)===void 0&&!ik(n)}function Fp(n,e){fn(n.node.children,(t,r)=>{e(new cl(t,n,r))})}function sk(n,e,t,r){t&&!r&&e(n),Fp(n,i=>{sk(i,e,!0,r)}),t&&r&&e(n)}function B3(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function fl(n){return new Pe(n.parent===null?n.name:fl(n.parent)+"/"+n.name)}function _C(n){n.parent!==null&&$3(n.parent,n.name,n)}function $3(n,e,t){let r=j3(t),i=Qn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_C(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_C(n))}var H3=/[\[\].#$\/\u0000-\u001F\u007F]/,q3=/[\[\].#$\u0000-\u001F\u007F]/,xE=10*1024*1024,ok=function(n){return typeof n=="string"&&n.length!==0&&!H3.test(n)},G3=function(n){return typeof n=="string"&&n.length!==0&&!q3.test(n)},z3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),G3(n)};var ak=function(n,e,t){let r=t instanceof Pe?new zE(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Gs(r));if(typeof e=="function")throw new Error(n+"contains a function "+Gs(r)+" with contents = "+e.toString());if(uP(e))throw new Error(n+"contains "+e.toString()+" "+Gs(r));if(typeof e=="string"&&e.length>xE/3&&pu(e)>xE)throw new Error(n+"contains a string greater than "+xE+" utf8 bytes "+Gs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(fn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ok(o)))throw new Error(n+" contains an invalid key ("+o+") "+Gs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);L4(r,o),ak(n,a,r),V4(r)}),i&&s)throw new Error(n+' contains ".value" child '+Gs(r)+" in addition to actual children.")}};var W3=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ok(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!z3(t))throw new Error(vR(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var vC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function K3(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!NP(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Zs(n,e,t){K3(n,t),Q3(n,r=>Nn(r,e)||Nn(e,r))}function Q3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(Y3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Y3(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Ws&&bt("event: "+t.toString()),dl(r)}}}var Z3="repo_interrupt",J3=25,IC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rp(),this.transactionQueueTree_=new cl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function X3(n,e,t){if(n.stats_=TC(n.repoInfo_),n.forceRestClient_||h4())n.server_=new nC(n.repoInfo_,(r,i,s,o)=>{iP(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>sP(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new SC(n.repoInfo_,e,(r,i,s,o)=>{iP(n,r,i,s,o)},r=>{sP(n,r)},r=>{t9(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=p4(n.repoInfo_,()=>new oC(n.stats_,n.server_)),n.infoData_=new rC,n.infoSyncTree_=new Pp({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=kp(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kC(n,"connected",!1),n.serverSyncTree_=new Pp({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Zs(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function e9(n){let t=n.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ck(n){return O3({timestamp:e9(n)})}function iP(n,e,t,r,i){n.dataUpdateCount++;let s=new Pe(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=fu(t,l=>Tt(l));o=k3(n.serverSyncTree_,s,c,i)}else{let c=Tt(t);o=P3(n.serverSyncTree_,s,c,i)}else if(r){let c=fu(t,l=>Tt(l));o=x3(n.serverSyncTree_,s,c)}else{let c=Tt(t);o=kp(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=FC(n,s)),Zs(n.eventQueue_,a,o)}function sP(n,e){kC(n,"connected",e),e===!1&&r9(n)}function t9(n,e){fn(e,(t,r)=>{kC(n,t,r)})}function kC(n,e,t){let r=new Pe("/.info/"+e),i=Tt(t);n.infoData_.updateSnapshot(r,i);let s=kp(n.infoSyncTree_,r,i);Zs(n.eventQueue_,r,s)}function n9(n){return n.nextWriteId_++}function r9(n){uk(n,"onDisconnectEvents");let e=ck(n),t=Rp();iC(n.onDisconnect_,Re(),(i,s)=>{let o=V3(i,s,n.serverSyncTree_,e);FP(t,i,o)});let r=[];iC(t,Re(),(i,s)=>{r=r.concat(kp(n.serverSyncTree_,i,s));let o=a9(n,i);FC(n,o)}),n.onDisconnect_=Rp(),Zs(n.eventQueue_,Re(),r)}function i9(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Z3)}function uk(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bt(t,...e)}function lk(n,e,t){return ZP(n.serverSyncTree_,e,t)||qe.EMPTY_NODE}function OC(n,e=n.transactionQueueTree_){if(e||Lp(n,e),$a(e)){let t=hk(n,e);L(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&s9(n,fl(e),t)}else ik(e)&&Fp(e,t=>{OC(n,t)})}function s9(n,e,t){let r=t.map(l=>l.currentWriteId),i=lk(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let d=t[l];L(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=dn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{uk(n,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(Ma(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Lp(n,PC(n.transactionQueueTree_,e)),OC(n,n.transactionQueueTree_),Zs(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)dl(f[g])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{en("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}FC(n,e)}},o)}function FC(n,e){let t=dk(n,e),r=fl(t),i=hk(n,t);return o9(n,i,r),r}function o9(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=dn(t,c.path),d=!1,f;if(L(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Ma(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=J3)d=!0,f="maxretry",i=i.concat(Ma(n.serverSyncTree_,c.currentWriteId,!0));else{let g=lk(n,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){ak("transaction failed: Data returned ",y,c.path);let w=Tt(y);typeof y=="object"&&y!=null&&Qn(y,".priority")||(w=w.updatePriority(g.getPriority()));let R=c.currentWriteId,F=ck(n),U=U3(w,g,F);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=U,c.currentWriteId=n9(n),o.splice(o.indexOf(R),1),i=i.concat(M3(n.serverSyncTree_,c.path,U,c.currentWriteId,c.applyLocally)),i=i.concat(Ma(n.serverSyncTree_,R,!0))}else d=!0,f="nodata",i=i.concat(Ma(n.serverSyncTree_,c.currentWriteId,!0))}Zs(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Lp(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)dl(r[a]);OC(n,n.transactionQueueTree_)}function dk(n,e){let t,r=n.transactionQueueTree_;for(t=Ie(e);t!==null&&$a(r)===void 0;)r=PC(r,t),e=Fe(e),t=Ie(e);return r}function hk(n,e){let t=[];return fk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function fk(n,e,t){let r=$a(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Fp(e,i=>{fk(n,i,t)})}function Lp(n,e){let t=$a(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,rk(e,t.length>0?t:void 0)}Fp(e,r=>{Lp(n,r)})}function a9(n,e){let t=fl(dk(n,e)),r=PC(n.transactionQueueTree_,e);return B3(r,i=>{PE(n,i)}),PE(n,r),sk(r,i=>{PE(n,i)}),t}function PE(n,e){let t=$a(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(L(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Ma(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?rk(e,void 0):t.length=s+1,Zs(n.eventQueue_,fl(e),i);for(let o=0;o<r.length;o++)dl(r[o])}}function c9(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function u9(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):en(`Invalid query segment '${t}' in query '${n}'`)}return e}var oP=function(n,e){let t=l9(n),r=t.namespace;t.domain==="firebase.com"&&zr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&zr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||i4();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Ep(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Pe(t.pathString)}},l9=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=c9(n.substring(d,f)));let g=u9(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var wC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:SP(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){let e=zx(this._queryParams),t=bC(e);return t==="{}"?"default":t}get _queryObject(){return zx(this._queryParams)}isEqual(e){if(e=Je(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=NP(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+F4(this._path)}};var ja=class n extends wC{constructor(e,t){super(e,t,new tC,!1)}get parent(){let e=RP(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};R3(ja);N3(ja);var d9="FIREBASE_DATABASE_EMULATOR_HOST",EC={},h9=!1;function f9(n,e,t,r){n.repoInfo_=new Ep(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function p9(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||zr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=oP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[d9]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=oP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new rl(rl.OWNER):new UE(n.name,n.options,e);W3("Invalid Firebase Database URL",o),ye(o.path)||zr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=m9(a,n,d,new VE(n.name,t));return new CC(f,n)}function g9(n,e){let t=EC[e];(!t||t[n.key]!==n)&&zr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),i9(n),delete t[n.key]}function m9(n,e,t,r){let i=EC[e.name];i||(i={},EC[e.name]=i);let s=i[n.toURLString()];return s&&zr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new IC(n,h9,t,r),i[n.toURLString()]=s,s}var CC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(g9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zr("Cannot call "+e+" on a deleted database.")}};function pk(n=Di(),e){let t=Cs(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=nf("database");r&&gk(t,...r)}return t}function gk(n,e,t,r={}){n=Je(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&zr("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new rl(rl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:rf(r.mockUserToken,n.app.options.projectId);s=new rl(o)}f9(i,e,t,s)}function y9(n){t4(Xn),Jn(new jt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return p9(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),je(Ax,Rx,n),je(Ax,Rx,"esm2017")}SC.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};SC.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};y9();var pl=class{constructor(e){return e}},mk="database",LC=class{constructor(){return bs(mk)}};var VC=new B("angularfire2.database-instances");function _9(n,e){let t=ra(mk,n,e);return t&&new pl(t)}function v9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pl(r)}}var I9={provide:LC,deps:[[new We,VC]]},w9={provide:pl,useFactory:_9,deps:[[new We,VC],Tn]};function yk(n,...e){return je("angularfire",kr.full,"rtdb"),Ft([w9,I9,{provide:VC,useFactory:v9(n),multi:!0,deps:[_e,Ze,Ti,Or,[new We,Ns],[new We,bi],...e]}])}var _k=gt(pk,!0);var ar=class n{constructor(e){this.firestore=e}getGastos(){let e=Hs(this.firestore,"gastos");return Yu(e,{idField:"id"})}getGastoById(e){let t=qs(this.firestore,`gastos/${e}`);return EE(t,{idField:"id"})}updateGasto(e){if(!e.id)throw new Error("No se proporcion\xF3 un ID para el gasto.");let t=qs(this.firestore,`gastos/${e.id}`);return delete e.id,TE(t,P({},e))}addGasto(e){let t=Hs(this.firestore,"gastos");return CE(t,P({},e))}deleteGasto(e){console.log(`gastos/${e.id}`);let t=qs(this.firestore,`gastos/${e.id}`);return DE(t)}getGastosByFecha(e){let t=Hs(this.firestore,"gastos"),r=bE(t,vp("fecha","==",e));return Yu(r,{idField:"id"})}getGastosByRange(e,t){let r=Hs(this.firestore,"gastos"),i=bE(r,vp("fecha",">=",e),vp("fecha","<=",t));return Yu(i,{idField:"id"})}getCategorias(){let e=Hs(this.firestore,"categorias");return Yu(e,{idField:"id"})}getCategoriaById(e){let t=qs(this.firestore,`categorias/${e}`);return EE(t,{idField:"id"})}updateCategoria(e){if(!e.id)throw new Error("No se proporcion\xF3 un ID para la categor\xEDa.");let t=qs(this.firestore,`categorias/${e.id}`);return delete e.id,TE(t,P({},e))}addCategoria(e){let t=Hs(this.firestore,"categorias");return CE(t,P({},e))}deleteCategoria(e){console.log(`categorias/${e.id}`);let t=qs(this.firestore,`categorias/${e.id}`);return DE(t)}static \u0275fac=function(t){return new(t||n)(K(qr))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function E9(n,e){if(n&1){let t=yi();G(0,"div",8),Ue("click",function(){let i=pi(t).$implicit,s=Cr();return gi(s.itemCategoria_onClick(i))}),G(1,"span",9),me(2),J(),G(3,"a",10),ls(4,"img",11),J()()}if(n&2){let t=e.$implicit;mi("background-color",t.color),Ve(2),_i(t.nombre)}}var Up=class n{constructor(e,t){this.dataService=e;this.router=t;this.obtenerCategorias()}categorias=[];itemCategoria_onClick(e){this.router.navigate(["categoria"],{queryParams:{id:e.id}})}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>{this.categorias=e})}static \u0275fac=function(t){return new(t||n)(W(ar),W(wt))};static \u0275cmp=sn({type:n,selectors:[["categorias"]],standalone:!0,features:[cn],decls:11,vars:1,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","#",1,"txtBlanco","link"],[1,"lista","cards"],["class","card",3,"background-color","click",4,"ngFor","ngForOf"],["href","/categoria",1,"nueva-categoria"],[1,"card",3,"click"],[1,"card-title"],["href","#",1,"center"],["src","edit2.png","alt","Editar",1,"flecha"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),me(4,"Mireia"),J(),G(5,"a",4),me(6,"Volver"),J()()(),G(7,"div",5),In(8,E9,5,3,"div",6),G(9,"a",7),me(10," A\xF1adir nueva categor\xEDa"),J()()()),t&2&&(Ve(8),Wt("ngForOf",r.categorias))},dependencies:[Cn,Ii]})};var Ak=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(W(Er),W(qn))}}static{this.\u0275dir=Ke({type:n})}}return n})(),Kp=(()=>{class n extends Ak{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,features:[an]})}}return n})(),wl=new B("");var C9={provide:wl,useExisting:$n(()=>Ui),multi:!0};function D9(){let n=Sr()?Sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var b9=new B(""),Ui=(()=>{class n extends Ak{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!D9())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(W(Er),W(qn),W(b9,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ue("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[vi([C9]),an]})}}return n})();function T9(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var jC=new B(""),Rk=new B("");function S9(n){return T9(n.value)?{required:!0}:null}function vk(n){return null}function Nk(n){return n!=null}function Mk(n){return hs(n)?Ae(n):n}function xk(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function Pk(n,e){return e.map(t=>t(n))}function A9(n){return!n.validate}function kk(n){return n.map(e=>A9(e)?e:t=>e.validate(t))}function R9(n){if(!n)return null;let e=n.filter(Nk);return e.length==0?null:function(t){return xk(Pk(t,e))}}function BC(n){return n!=null?R9(kk(n)):null}function N9(n){if(!n)return null;let e=n.filter(Nk);return e.length==0?null:function(t){let r=Pk(t,e).map(Mk);return Xg(r).pipe(Z(xk))}}function $C(n){return n!=null?N9(kk(n)):null}function Ik(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function M9(n){return n._rawValidators}function x9(n){return n._rawAsyncValidators}function UC(n){return n?Array.isArray(n)?n:[n]:[]}function $p(n,e){return Array.isArray(n)?n.includes(e):n===e}function wk(n,e){let t=UC(e);return UC(n).forEach(i=>{$p(t,i)||t.push(i)}),t}function Ek(n,e){return UC(e).filter(t=>!$p(n,t))}var Hp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$C(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ga=class extends Hp{get formDirective(){return null}get path(){return null}},Il=class extends Hp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},P9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Qre=pe(P({},P9),{"[class.ng-submitted]":"isSubmitted"}),Wa=(()=>{class n extends qp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(Il,2))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[an]})}}return n})(),Qp=(()=>{class n extends qp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(Ga,10))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[an]})}}return n})();var gl="VALID",Bp="INVALID",Ha="PENDING",ml="DISABLED",za=class{},Gp=class extends za{constructor(e,t){super(),this.value=e,this.source=t}},_l=class extends za{constructor(e,t){super(),this.pristine=e,this.source=t}},vl=class extends za{constructor(e,t){super(),this.touched=e,this.source=t}},qa=class extends za{constructor(e,t){super(),this.status=e,this.source=t}};function Ok(n){return(Yp(n)?n.validators:n)||null}function k9(n){return Array.isArray(n)?BC(n):n||null}function Fk(n,e){return(Yp(e)?e.asyncValidators:n)||null}function O9(n){return Array.isArray(n)?$C(n):n||null}function Yp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function F9(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[t])throw new H(1001,"")}function L9(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new H(1002,"")})}var zp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Oc(()=>this.statusReactive()),this.statusReactive=Pc(void 0),this._pristine=Oc(()=>this.pristineReactive()),this.pristineReactive=Pc(!0),this._touched=Oc(()=>this.touchedReactive()),this.touchedReactive=Pc(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dr(this.statusReactive)}set status(e){Dr(()=>this.statusReactive.set(e))}get valid(){return this.status===gl}get invalid(){return this.status===Bp}get pending(){return this.status==Ha}get disabled(){return this.status===ml}get enabled(){return this.status!==ml}get pristine(){return Dr(this.pristineReactive)}set pristine(e){Dr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Dr(this.touchedReactive)}set touched(e){Dr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ek(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ek(e,this._rawAsyncValidators))}hasValidator(e){return $p(this._rawValidators,e)}hasAsyncValidator(e){return $p(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new vl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new vl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _l(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new _l(!0,r))}markAsPending(e={}){this.status=Ha;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ml,this.errors=null,this._forEachChild(i=>{i.disable(pe(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gp(this.value,r)),this._events.next(new qa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gl,this._forEachChild(r=>{r.enable(pe(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gl||this.status===Ha)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gp(this.value,t)),this._events.next(new qa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ml:gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ha,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Mk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?ml:this.errors?Bp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ha)?Ha:this._anyControlsHaveStatus(Bp)?Bp:gl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new _l(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new vl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=O9(this._rawAsyncValidators)}},Wp=class extends zp{constructor(e,t,r){super(Ok(t),Fk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){L9(this,!0,e),Object.keys(e).forEach(r=>{F9(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var HC=new B("CallSetDisabledState",{providedIn:"root",factory:()=>qC}),qC="always";function V9(n,e){return[...e.path,n]}function Lk(n,e,t=qC){Vk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),j9(n,e),$9(n,e),B9(n,e),U9(n,e)}function Ck(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function U9(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Vk(n,e){let t=M9(n);e.validator!==null?n.setValidators(Ik(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=x9(n);e.asyncValidator!==null?n.setAsyncValidators(Ik(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ck(e._rawValidators,i),Ck(e._rawAsyncValidators,i)}function j9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Uk(n,e)})}function B9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Uk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Uk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $9(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function H9(n,e){n==null,Vk(n,e)}function q9(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function G9(n){return Object.getPrototypeOf(n.constructor)===Kp}function z9(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function W9(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ui?t=s:G9(s)?r=s:i=s}),i||r||t||null}var K9={provide:Ga,useExisting:$n(()=>El)},yl=Promise.resolve(),El=(()=>{class n extends Ga{get submitted(){return Dr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Oc(()=>this.submittedReactive()),this.submittedReactive=Pc(!1),this._directives=new Set,this.ngSubmit=new Xe,this.form=new Wp({},BC(t),$C(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Lk(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yl.then(()=>{let r=this._findContainer(t.path),i=new Wp({});H9(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),z9(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(W(jC,10),W(Rk,10),W(HC,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ue("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vi([K9]),an]})}}return n})();function Dk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Q9=class extends zp{constructor(e=null,t,r){super(Ok(t),Fk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Dk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Dk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Y9={provide:Il,useExisting:$n(()=>Js)},Tk=Promise.resolve(),Js=(()=>{class n extends Il{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Q9,this._registered=!1,this.name="",this.update=new Xe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W9(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),q9(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Lk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Tk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&kc(r);Tk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?V9(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(W(Ga,9),W(jC,10),W(Rk,10),W(wl,10),W(fs,8),W(HC,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vi([Y9]),an,cs]})}}return n})(),Zp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),Z9={provide:wl,useExisting:$n(()=>GC),multi:!0},GC=(()=>{class n extends Kp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ue("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[vi([Z9]),an]})}}return n})();var J9={provide:wl,useExisting:$n(()=>Ka),multi:!0};function jk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function X9(n){return n.split(":")[0]}var Ka=(()=>{class n extends Kp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=jk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=X9(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ue("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[vi([J9]),an]})}}return n})(),Jp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(jk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(qn),W(Er),W(Ka,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),e6={provide:wl,useExisting:$n(()=>Bk),multi:!0};function Sk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function t6(n){return n.split(":")[0]}var Bk=(()=>{class n extends Kp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=t6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ue("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[vi([e6]),an]})}}return n})(),Xp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Sk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Sk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(qn),W(Er),W(Bk,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var n6=(()=>{class n{constructor(){this._validator=vk}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vk,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,features:[cs]})}}return n})();var r6={provide:jC,useExisting:$n(()=>Cl),multi:!0};var Cl=(()=>{class n extends n6{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=kc,this.createValidator=t=>S9}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_h("required",i._enabled?"":null)},inputs:{required:"required"},features:[vi([r6]),an]})}}return n})();var i6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({})}}return n})();var ji=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HC,useValue:t.callSetDisabledState??qC}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_r({type:n})}static{this.\u0275inj=yr({imports:[i6]})}}return n})();var eg=class n{constructor(e){this.firestore=e}formatearFecha(e){let t=typeof e=="string"?new Date(e):e,r=t.getDate(),i=t.toLocaleDateString("es-ES",{month:"long"}),s=t.getFullYear(),o=this.capitalizarMes(i);return`${r} de ${o} del ${s}`}capitalizarMes(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}formatearFechaInput(e){let t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${r}-${t}`}calcularRangoSemana(e){let t=new Date(e);t.setDate(e.getDate()-e.getDay()+1);let r=new Date(t);return r.setDate(t.getDate()+6),{fechaInicio:t,fechaFin:r}}calcularRangoMes(e){let t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);return{fechaInicio:t,fechaFin:r}}static \u0275fac=function(t){return new(t||n)(K(qr))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function o6(n,e){if(n&1){let t=yi();G(0,"div",21),Ue("click",function(){let i=pi(t).$implicit,s=Cr();return gi(s.itemGasto_onClick(i))}),G(1,"span",22),me(2),J(),G(3,"span",23),me(4),Ky(5,"number"),J()()}if(n&2){let t,r=e.$implicit,i=Cr();mi("background-color",(t=i.obtenerCategoriaById(r.categoriaId))==null?null:t.color),Ve(2),_i(r.descripcion),Ve(2),ds("",Qy(5,4,r.importe,"1.2-2")," \u20AC")}}var tg=class n{constructor(e,t,r){this.fechaService=e;this.dataService=t;this.router=r;this.fechaSeleccionada=this.fechaService.formatearFechaInput(new Date),this.fechaFormateada=this.fechaService.formatearFecha(this.fechaSeleccionada),this.obtenerDatos()}gastos=[];categorias=[];fechaFormateada="";fechaSeleccionada="";inputFechaSeleccionada_onChange(){this.obtenerGastosPorFecha(this.fechaSeleccionada)}btnMostrarVistaHoy_onClick(){this.fechaSeleccionada=this.fechaService.formatearFechaInput(new Date),this.fechaFormateada=this.fechaService.formatearFecha(this.fechaSeleccionada),this.obtenerGastosPorFecha(this.fechaSeleccionada)}btnMostrarVistaSemana_onClick(){let e=new Date(this.fechaSeleccionada),{fechaInicio:t,fechaFin:r}=this.fechaService.calcularRangoSemana(e);this.obtenerGastosPorRango(this.fechaService.formatearFechaInput(t),this.fechaService.formatearFechaInput(r))}btnMostrarVistaMes_onClick(){let e=new Date(this.fechaSeleccionada),{fechaInicio:t,fechaFin:r}=this.fechaService.calcularRangoMes(e);this.obtenerGastosPorRango(this.fechaService.formatearFechaInput(t),this.fechaService.formatearFechaInput(r))}btnDiaAnterior_onClick(){this.cambiarFecha(-1)}btnDiaPosterior_onClick(){this.cambiarFecha(1)}itemGasto_onClick(e){this.router.navigate(["gasto"],{queryParams:{id:e.id}})}obtenerCategoriaById(e){return this.categorias.find(t=>t.id==e)}sumarImportes(){return this.gastos.reduce((e,t)=>e+t.importe,0)}cambiarFecha(e){let[t,r,i]=this.fechaSeleccionada.split("-").map(Number),s=new Date(t,r-1,i);s.setDate(s.getDate()+e),this.fechaSeleccionada=this.fechaService.formatearFechaInput(s),this.fechaFormateada=this.fechaService.formatearFecha(s),this.obtenerGastosPorFecha(this.fechaSeleccionada)}obtenerGastosPorFecha(e){this.dataService.getGastosByFecha(e).subscribe(t=>{this.gastos=t,this.fechaFormateada=this.fechaService.formatearFecha(new Date(e))})}obtenerGastosPorRango(e,t){this.dataService.getGastosByRange(e,t).subscribe(r=>{this.gastos=r;let i=this.fechaService.formatearFecha(e),s=this.fechaService.formatearFecha(t);this.fechaFormateada=`${i} al ${s}`})}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>{this.categorias=e})}obtenerDatos(){this.obtenerCategorias(),this.obtenerGastosPorFecha(this.fechaSeleccionada)}static \u0275fac=function(t){return new(t||n)(W(eg),W(ar),W(wt))};static \u0275cmp=sn({type:n,selectors:[["inicio"]],standalone:!0,features:[cn],decls:33,vars:7,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],[1,"div-fecha"],["type","date","name","fecha","id","fechaInput",3,"ngModelChange","change","ngModel"],[1,"vistas"],[1,"btn","hoy",3,"click"],[1,"btn","Semana",3,"click"],[1,"btn","Mes",3,"click"],[1,"menuBotones"],["href","/categorias",1,"boton","link"],["href","/gasto",1,"boton","link"],[1,"fechaActual"],[1,"divImporte"],[1,"flecha"],["src","flecha-izquierda.png","alt","flecha anterior",1,"flecha","center",3,"click"],[1,"importeTotal"],["src","flecha-derecha.png","alt","flecha siguiente",1,"flecha","center",3,"click"],[1,"lista","gastos"],["class","card card-importe",3,"background-color","click",4,"ngFor","ngForOf"],[1,"card","card-importe",3,"click"],[1,"card-title"],[1,"card-import"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),me(4,"Mireia"),J(),G(5,"div",4)(6,"span",3),me(7,"Fecha seleccionada"),J(),G(8,"input",5),En("ngModelChange",function(s){return Gn(r.fechaSeleccionada,s)||(r.fechaSeleccionada=s),s}),Ue("change",function(){return r.inputFechaSeleccionada_onChange()}),J()()(),G(9,"div",6)(10,"span",7),Ue("click",function(){return r.btnMostrarVistaHoy_onClick()}),me(11,"Hoy"),J(),G(12,"span",8),Ue("click",function(){return r.btnMostrarVistaSemana_onClick()}),me(13,"Semana"),J(),G(14,"span",9),Ue("click",function(){return r.btnMostrarVistaMes_onClick()}),me(15,"Mes"),J()()(),G(16,"div",10)(17,"a",11),me(18,"Categor\xEDas"),J(),G(19,"a",12),me(20,"A\xF1adir Gasto"),J()(),G(21,"span",13),me(22),J(),G(23,"div",14)(24,"a",15)(25,"img",16),Ue("click",function(){return r.btnDiaAnterior_onClick()}),J()(),G(26,"span",17),me(27),Ky(28,"number"),J(),G(29,"a",15)(30,"img",18),Ue("click",function(){return r.btnDiaPosterior_onClick()}),J()()(),G(31,"div",19),In(32,o6,6,7,"div",20),J()()),t&2&&(Ve(8),wn("ngModel",r.fechaSeleccionada),Ve(14),_i(r.fechaFormateada),Ve(5),ds("",Qy(28,4,r.sumarImportes(),"1.2-2")," \u20AC"),Ve(5),Wt("ngForOf",r.gastos))},dependencies:[Cn,Ii,nA,ji,Ui,Wa,Js,Zh]})};var ng=class{id="";nombre="";color="";constructor(){}};var a6=n=>({"background-color":n});function c6(n,e){if(n&1&&(G(0,"option",14),me(1),J()),n&2){let t=e.$implicit;Wt("ngValue",t.value)("ngStyle",M0(3,a6,t.value)),Ve(),ds(" ",t.name," ")}}function u6(n,e){if(n&1){let t=yi();G(0,"button",15),Ue("click",function(){pi(t);let i=Cr();return gi(i.btnEliminar_onClick())}),me(1," Eliminar "),J()}}var rg=class n{constructor(e,t,r){this.dataService=e;this.router=t;this.route=r;this.route.queryParams.subscribe(i=>{i.id!=null&&(this.categoria.id=i.id)}),this.obtenerDatos()}categoria=new ng;colores=[{name:"Verde",value:"var(--verdeCategoria)"},{name:"Azul",value:"var(--azulCategoria)"},{name:"Rojo",value:"var(--rojoCategoria)"},{name:"Lila",value:"var(--lilaCategoria)"},{name:"Naranja",value:"var(--naranjaCategoria)"}];btnVolver_onClick(){}frmAgregarCategoria_onSubmit(){this.categoria.id?this.dataService.updateCategoria(this.categoria).then(()=>this.router.navigate(["categorias"])).catch(e=>console.error("Error al actualizar la categor\xEDa:",e)):this.dataService.addCategoria(this.categoria).then(()=>this.router.navigate(["categorias"])).catch(e=>{console.error("Error al actualizar la categor\xEDa:",e)})}btnEliminar_onClick(){this.dataService.deleteCategoria(this.categoria),this.router.navigate(["categorias"])}obtenerDatos(){this.categoria.id!=null&&this.obtenerCategoria()}obtenerCategoria(){this.categoria.id?this.dataService.getCategoriaById(this.categoria.id).subscribe(e=>{this.categoria=e}):console.log("No se encontr\xF3 ID. Creando una nueva categor\xEDa.")}static \u0275fac=function(t){return new(t||n)(W(ar),W(wt),W(bn))};static \u0275cmp=sn({type:n,selectors:[["categoria"]],standalone:!0,features:[cn],decls:19,vars:4,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","/categorias",1,"txtBlanco","link"],[1,"form",3,"ngSubmit"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","color",1,"form-label"],["id","color","name","color","required","",1,"color",3,"ngModelChange","ngModel"],["class","form-options",3,"ngValue","ngStyle",4,"ngFor","ngForOf"],[1,"form-btns"],["class","button eliminar",3,"click",4,"ngIf"],["type","submit",1,"button","aceptar"],[1,"form-options",3,"ngValue","ngStyle"],[1,"button","eliminar",3,"click"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),me(4,"Mireia"),J(),G(5,"a",4),me(6,"Cancelar"),J()(),G(7,"form",5),Ue("ngSubmit",function(){return r.frmAgregarCategoria_onSubmit()}),G(8,"label",6),me(9,"Nombre:"),J(),G(10,"input",7),En("ngModelChange",function(s){return Gn(r.categoria.nombre,s)||(r.categoria.nombre=s),s}),J(),G(11,"label",8),me(12,"Color:"),J(),G(13,"select",9),En("ngModelChange",function(s){return Gn(r.categoria.color,s)||(r.categoria.color=s),s}),In(14,c6,2,5,"option",10),J(),G(15,"div",11),In(16,u6,2,0,"button",12),G(17,"button",13),me(18,"Aceptar"),J()()()()()),t&2&&(Ve(10),wn("ngModel",r.categoria.nombre),Ve(3),wn("ngModel",r.categoria.color),Ve(),Wt("ngForOf",r.colores),Ve(2),Wt("ngIf",r.categoria.nombre))},dependencies:[ji,Zp,Jp,Xp,Ui,Ka,Wa,Qp,Cl,Js,El,Cn,Ii,Sh,tA],styles:[".color[_ngcontent-%COMP%]{display:block;padding:5px;width:200px}.color[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{padding:10px;color:#fff}"]})};var ig=class{id="";categoriaId="";descripcion="";fecha=new Date;importe=0;constructor(){}};function l6(n,e){if(n&1&&(G(0,"option",17),me(1),J()),n&2){let t=e.$implicit;mi("background-color",t.color),Wt("value",t.id),Ve(),_i(t.nombre)}}function d6(n,e){if(n&1){let t=yi();G(0,"button",18),Ue("click",function(){pi(t);let i=Cr();return gi(i.btnEliminar_onClick())}),me(1,"Borrar"),J()}}var sg=class n{constructor(e,t,r){this.dataService=e;this.router=t;this.route=r;this.route.queryParams.subscribe(i=>{i.id!=null&&(this.gasto.id=i.id)}),this.obtenerDatos()}gasto=new ig;categorias=[];volverInicio_onClick(){}btnEliminar_onClick(){this.dataService.deleteGasto(this.gasto),this.router.navigate(["inicio"])}frmAgregarGasto_onSubmit(){this.gasto.id?this.dataService.updateGasto(this.gasto).then(()=>this.router.navigate(["inicio"])).catch(e=>console.error("Error al actualizar el gasto:",e)):this.dataService.addGasto(this.gasto).then(()=>this.router.navigate(["inicio"])).catch(e=>{console.error("Error al actualizar el gasto:",e)})}obtenerDatos(){this.obtenerGasto(),this.obtenerCategorias()}obtenerGasto(){this.gasto.id?this.dataService.getGastoById(this.gasto.id).subscribe(e=>{this.gasto=e}):console.log("No se encontr\xF3 ID. Creando un nuevo gasto.")}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>this.categorias=e)}static \u0275fac=function(t){return new(t||n)(W(ar),W(wt),W(bn))};static \u0275cmp=sn({type:n,selectors:[["gasto"]],standalone:!0,features:[cn],decls:25,vars:6,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","#",1,"txtBlanco","link"],[1,"form",3,"ngSubmit"],["for","nombre",1,"form-label"],["type","text","id","descripcion","name","descripcion","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","importe",1,"form-label"],["type","number","id","importeGasto","name","importe","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","categoria",1,"form-label"],["id","lstCategorias","name","lstCategorias","required","",1,"form-label",3,"ngModelChange","ngModel"],["class","form-options",3,"background-color","value",4,"ngFor","ngForOf"],["type","date","id","fechaGasto","name","fecha","required","",1,"form-label",3,"ngModelChange","ngModel"],[1,"form-btns"],["class","button eliminar",3,"click",4,"ngIf"],["button","","type","submit",1,"button","aceptar"],[1,"form-options",3,"value"],[1,"button","eliminar",3,"click"]],template:function(t,r){t&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),me(4,"Mireia"),J(),G(5,"a",4),me(6,"Volver"),J()(),G(7,"form",5),Ue("ngSubmit",function(){return r.frmAgregarGasto_onSubmit()}),G(8,"label",6),me(9,"Gasto:"),J(),G(10,"input",7),En("ngModelChange",function(s){return Gn(r.gasto.descripcion,s)||(r.gasto.descripcion=s),s}),J(),G(11,"label",8),me(12,"Importe:"),J(),G(13,"input",9),En("ngModelChange",function(s){return Gn(r.gasto.importe,s)||(r.gasto.importe=s),s}),J(),G(14,"label",10),me(15,"Categor\xEDa: "),J(),G(16,"select",11),En("ngModelChange",function(s){return Gn(r.gasto.categoriaId,s)||(r.gasto.categoriaId=s),s}),In(17,l6,2,4,"option",12),J(),G(18,"label",10),me(19,"Fecha: "),J(),G(20,"input",13),En("ngModelChange",function(s){return Gn(r.gasto.fecha,s)||(r.gasto.fecha=s),s}),J(),G(21,"div",14),In(22,d6,2,0,"button",15),G(23,"button",16),me(24," Aceptar"),J()()()()()),t&2&&(Ve(10),wn("ngModel",r.gasto.descripcion),Ve(3),wn("ngModel",r.gasto.importe),Ve(3),wn("ngModel",r.gasto.categoriaId),Ve(),Wt("ngForOf",r.categorias),Ve(3),wn("ngModel",r.gasto.fecha),Ve(2),Wt("ngIf",r.gasto.id))},dependencies:[Cn,Ii,Sh,ji,Zp,Jp,Xp,Ui,GC,Ka,Wa,Qp,Cl,Js,El]})};var $k=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:tg},{path:"categorias",component:Up},{path:"categoria",component:rg},{path:"gasto",component:sg}];var bl="Service workers are disabled or not supported by this browser";function h6(n){return Qi(()=>ti(new Error(n)))}var Qa=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=h6(bl);else{let r=mo(e,"controllerchange").pipe(Z(()=>e.controller)),i=Qi(()=>Y(e.controller)),s=Pn(i,r);this.worker=s.pipe(ot(d=>!!d)),this.registration=this.worker.pipe(pt(()=>e.getRegistration()));let l=mo(e,"message").pipe(Z(d=>d.data)).pipe(ot(d=>d&&d.type)).pipe(rm());l.connect(),this.events=l}}postMessage(e,t){return this.worker.pipe(it(1),Ye(r=>{r.postMessage(P({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(ot(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(it(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(ot(t=>t.nonce===e),it(1),Z(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},f6=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new $e,!t.isEnabled){this.messages=Yi,this.notificationClicks=Yi,this.subscription=Yi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Z(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Z(i=>i.data)),this.pushManager=this.sw.registration.pipe(Z(i=>i.pushManager));let r=this.pushManager.pipe(pt(i=>i.getSubscription()));this.subscription=yd(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(bl));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(pt(o=>o.subscribe(r)),it(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(bl));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(it(1),pt(t)).toPromise()}decodeBase64(t){return atob(t)}static{this.\u0275fac=function(r){return new(r||n)(K(Qa))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),p6=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Yi,this.unrecoverable=Yi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(bl));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(bl));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static{this.\u0275fac=function(r){return new(r||n)(K(Qa))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();var Hk=new B("");function g6(n,e,t,r){return()=>{if(!(Ah(r)&&"serviceWorker"in navigator&&t.enabled!==!1))return;let i=n.get(_e),s=n.get(zn);i.runOutsideAngular(()=>{let a=navigator.serviceWorker,c=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",c),s.onDestroy(()=>{a.removeEventListener("controllerchange",c)})});let o;if(typeof t.registrationStrategy=="function")o=t.registrationStrategy();else{let[a,...c]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Y(null);break;case"registerWithDelay":o=qk(+c[0]||0);break;case"registerWhenStable":let l=Ae(n.get(zn).whenStable());o=c[0]?yd(l,qk(+c[0])):l;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}i.runOutsideAngular(()=>o.pipe(it(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function qk(n){return Y(null).pipe(tm(n))}function m6(n,e){return new Qa(Ah(e)&&n.enabled!==!1?navigator.serviceWorker:void 0)}var Dl=class{};function Gk(n,e={}){return Ft([f6,p6,{provide:Hk,useValue:n},{provide:Dl,useValue:e},{provide:Qa,useFactory:m6,deps:[Dl,zt]},{provide:$o,useFactory:g6,deps:[Ze,Hk,Dl,zt],multi:!0}])}var zk={production:!0,firebase:{apiKey:"AIzaSyA7_Fnv7X3seinZoTSRhRtml-uU9HAINP8",authDomain:"gastos-app-pro.firebaseapp.com",databaseURL:"https://gastos-app-pro-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gastos-app-pro",messagingSenderId:"546541408657",appId:"1:546541408657:web:464ad9f7fc318d202eca30",measurementId:"G-PH8D3G82SV"}};var Wk={providers:[tR($k),V0({eventCoalescing:!0}),OR(()=>FR(zk.firebase)),TN(()=>SN()),bx(()=>Tx()),yk(()=>_k()),Gk("ngsw-worker.js",{enabled:!j0(),registrationStrategy:"registerWhenStable:30000"})]};var og=class n{title="Aplicacion para gastos con Angular";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=sn({type:n,selectors:[["app-root"]],standalone:!0,features:[cn],decls:1,vars:0,template:function(t,r){t&1&&ls(0,"router-outlet")},dependencies:[Cn,W_,ji,Zh]})};dA(og,Wk).catch(n=>console.error(n));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/ngsw-worker.js").then(n=>{console.log("Service Worker registered with scope:",n.scope)}).catch(n=>{console.log("Service Worker registration failed:",n)})});
