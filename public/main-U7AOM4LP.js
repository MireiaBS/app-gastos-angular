var Ak=Object.defineProperty,Rk=Object.defineProperties;var Nk=Object.getOwnPropertyDescriptors;var mD=Object.getOwnPropertySymbols,Mk=Object.getPrototypeOf,xk=Object.prototype.hasOwnProperty,Pk=Object.prototype.propertyIsEnumerable,kk=Reflect.get;var yD=(n,e,t)=>e in n?Ak(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})xk.call(e,t)&&yD(n,t,e[t]);if(mD)for(var t of mD(e))Pk.call(e,t)&&yD(n,t,e[t]);return n},de=(n,e)=>Rk(n,Nk(e));var $r=(n,e,t)=>kk(Mk(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function _D(n,e){return Object.is(n,e)}var Xe=null,Dl=!1,bl=1,sr=Symbol("SIGNAL");function we(n){let e=Xe;return Xe=n,e}function vD(){return Xe}var Xa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cg(n){if(Dl)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let e=Xe.nextProducerIndex++;if(Rl(Xe),e<Xe.producerNode.length&&Xe.producerNode[e]!==n&&Ja(Xe)){let t=Xe.producerNode[e];Al(t,Xe.producerIndexOfThis[e])}Xe.producerNode[e]!==n&&(Xe.producerNode[e]=n,Xe.producerIndexOfThis[e]=Ja(Xe)?CD(n,Xe,e):0),Xe.producerLastReadVersion[e]=n.version}function Ok(){bl++}function ID(n){if(!(Ja(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===bl)){if(!n.producerMustRecompute(n)&&!lg(n)){n.dirty=!1,n.lastCleanEpoch=bl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=bl}}function wD(n){if(n.liveConsumerNode===void 0)return;let e=Dl;Dl=!0;try{for(let t of n.liveConsumerNode)t.dirty||Fk(t)}finally{Dl=e}}function ED(){return Xe?.consumerAllowSignalWrites!==!1}function Fk(n){n.dirty=!0,wD(n),n.consumerMarkedDirty?.(n)}function Sl(n){return n&&(n.nextProducerIndex=0),we(n)}function ug(n,e){if(we(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ja(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Al(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function lg(n){Rl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ID(t),r!==t.version))return!0}return!1}function dg(n){if(Rl(n),Ja(n))for(let e=0;e<n.producerNode.length;e++)Al(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function CD(n,e,t){if(DD(n),n.liveConsumerNode.length===0&&bD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=CD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Al(n,e){if(DD(n),n.liveConsumerNode.length===1&&bD(n))for(let r=0;r<n.producerNode.length;r++)Al(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Rl(i),i.producerIndexOfThis[r]=e}}function Ja(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Rl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function DD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function bD(n){return n.producerNode!==void 0}function TD(n){let e=Object.create(Lk);e.computation=n;let t=()=>{if(ID(e),cg(e),e.value===Tl)throw e.error;return e.value};return t[sr]=e,t}var og=Symbol("UNSET"),ag=Symbol("COMPUTING"),Tl=Symbol("ERRORED"),Lk=de(O({},Xa),{value:og,dirty:!0,error:null,equal:_D,producerMustRecompute(n){return n.value===og||n.value===ag},producerRecomputeValue(n){if(n.value===ag)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ag;let t=Sl(n),r;try{r=n.computation()}catch(i){r=Tl,n.error=i}finally{ug(n,t)}if(e!==og&&e!==Tl&&r!==Tl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function Vk(){throw new Error}var SD=Vk;function AD(){SD()}function RD(n){SD=n}var Uk=null;function ND(n){let e=Object.create(xD);e.value=n;let t=()=>(cg(e),e.value);return t[sr]=e,t}function hg(n,e){ED()||AD(),n.equal(n.value,e)||(n.value=e,jk(n))}function MD(n,e){ED()||AD(),hg(n,e(n.value))}var xD=de(O({},Xa),{equal:_D,value:void 0});function jk(n){n.version++,Ok(),wD(n),Uk?.()}function te(n){return typeof n=="function"}function Ks(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Nl=Ks(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(s){e=s instanceof Nl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{PD(s)}catch(o){e=e??[],o instanceof Nl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Nl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)PD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pi(t,e)}remove(e){let{_finalizers:t}=this;t&&Pi(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var fg=$e.EMPTY;function Ml(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function PD(n){te(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qs={setTimeout(n,e,...t){let{delegate:r}=Qs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xl(n){Qs.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function ec(){}var kD=pg("C",void 0,void 0);function OD(n){return pg("E",void 0,n)}function FD(n){return pg("N",n,void 0)}function pg(n,e,t){return{kind:n,value:e,error:t}}var ki=null;function Ys(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!ki;if(e&&(ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ki;if(ki=null,t)throw r}}else n()}function LD(n){dn.useDeprecatedSynchronousErrorHandling&&ki&&(ki.errorThrown=!0,ki.error=n)}var Oi=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ml(e)&&e.add(this)):this.destination=Hk}static create(e,t,r){return new Zs(e,t,r)}next(e){this.isStopped?mg(FD(e),this):this._next(e)}error(e){this.isStopped?mg(OD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?mg(kD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Bk=Function.prototype.bind;function gg(n,e){return Bk.call(n,e)}var yg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Pl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Pl(r)}else Pl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Pl(t)}}},Zs=class extends Oi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&dn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gg(e.next,s),error:e.error&&gg(e.error,s),complete:e.complete&&gg(e.complete,s)}):i=e}this.destination=new yg(i)}};function Pl(n){dn.useDeprecatedSynchronousErrorHandling?LD(n):xl(n)}function $k(n){throw n}function mg(n,e){let{onStoppedNotification:t}=dn;t&&Qs.setTimeout(()=>t(n,e))}var Hk={closed:!0,next:ec,error:$k,complete:ec};var Js=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(n){return n}function kl(...n){return _g(n)}function _g(n){return n.length===0?Lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Gk(t)?t:new Zs(t,r,i);return Ys(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=VD(r),new r((i,s)=>{let o=new Zs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Js](){return this}pipe(...t){return _g(t)(this)}toPromise(t){return t=VD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function VD(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function qk(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function Gk(n){return n&&n instanceof Oi||qk(n)&&Ml(n)}function vg(n){return te(n?.lift)}function ye(n){return e=>{if(vg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new Ig(n,e,t,r,i)}var Ig=class extends Oi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xs(){return ye((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var eo=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return Xs()(this)}};var UD=Ks(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ol(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UD}next(t){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?fg:(this.currentObservers=null,s.push(t),new $e(()=>{this.currentObservers=null,Pi(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Ol(e,t),n})(),Ol=class extends ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:fg}};var ut=class extends ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wg={now(){return(wg.delegate||Date).now()},delegate:void 0};var Fl=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var tc={setInterval(n,e,...t){let{delegate:r}=tc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=tc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var to=class extends Fl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return tc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&tc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var no=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};no.now=wg.now;var ro=class extends no{constructor(e,t=no.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Eg=new ro(to);var Ll=class extends to{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Vl=class extends ro{};var Cg=new Vl(Ll);var Vt=new he(n=>n.complete());function jD(n){return n&&te(n.schedule)}function BD(n){return n[n.length-1]}function Ul(n){return te(BD(n))?n.pop():void 0}function Hr(n){return jD(BD(n))?n.pop():void 0}function Dg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function HD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(f){o(f)}}function c(h){try{l(r.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function $D(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fi(n){return this instanceof Fi?(this.v=n,this):new Fi(n)}function qD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,f)}}function a(y,w){r[y]&&(i[y]=function(N){return new Promise(function(R,k){s.push([y,N,R,k])>1||c(y,N)})},w&&(i[y]=w(i[y])))}function c(y,w){try{l(r[y](w))}catch(N){g(s[0][3],N)}}function l(y){y.value instanceof Fi?Promise.resolve(y.value.v).then(h,f):g(s[0][2],y)}function h(y){c("next",y)}function f(y){c("throw",y)}function g(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function GD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $D=="function"?$D(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var jl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bl(n){return te(n?.then)}function $l(n){return te(n[Js])}function Hl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function ql(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Gl=zk();function zl(n){return te(n?.[Gl])}function Wl(n){return qD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fi(t.read());if(i)return yield Fi(void 0);yield yield Fi(r)}}finally{t.releaseLock()}})}function Kl(n){return te(n?.getReader)}function Ke(n){if(n instanceof he)return n;if(n!=null){if($l(n))return Wk(n);if(jl(n))return Kk(n);if(Bl(n))return Qk(n);if(Hl(n))return zD(n);if(zl(n))return Yk(n);if(Kl(n))return Zk(n)}throw ql(n)}function Wk(n){return new he(e=>{let t=n[Js]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kk(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Qk(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xl)})}function Yk(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zD(n){return new he(e=>{Jk(n,e).catch(t=>e.error(t))})}function Zk(n){return zD(Wl(n))}function Jk(n,e){var t,r,i,s;return HD(this,void 0,void 0,function*(){try{for(t=GD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function qr(n,e=0){return ye((t,r)=>{t.subscribe(fe(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function Gr(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function WD(n,e){return Ke(n).pipe(Gr(e),qr(e))}function KD(n,e){return Ke(n).pipe(Gr(e),qr(e))}function QD(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function YD(n,e){return new he(t=>{let r;return Rt(t,e,()=>{r=n[Gl](),Rt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Ql(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZD(n,e){return Ql(Wl(n),e)}function JD(n,e){if(n!=null){if($l(n))return WD(n,e);if(jl(n))return QD(n,e);if(Bl(n))return KD(n,e);if(Hl(n))return Ql(n,e);if(zl(n))return YD(n,e);if(Kl(n))return ZD(n,e)}throw ql(n)}function He(n,e){return e?JD(n,e):Ke(n)}function ne(...n){let e=Hr(n);return He(n,e)}function io(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function bg(n){return!!n&&(n instanceof he||te(n.lift)&&te(n.subscribe))}var or=Ks(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Xk}=Array;function eO(n,e){return Xk(e)?n(...e):n(e)}function Yl(n){return ie(e=>eO(n,e))}var{isArray:tO}=Array,{getPrototypeOf:nO,prototype:rO,keys:iO}=Object;function Zl(n){if(n.length===1){let e=n[0];if(tO(e))return{args:e,keys:null};if(sO(e)){let t=iO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sO(n){return n&&typeof n=="object"&&nO(n)===rO}function Jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Xl(...n){let e=Hr(n),t=Ul(n),{args:r,keys:i}=Zl(n);if(r.length===0)return He([],e);let s=new he(oO(r,e,i?o=>Jl(i,o):Lt));return t?s.pipe(Yl(t)):s}function oO(n,e,t=Lt){return r=>{XD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)XD(e,()=>{let l=He(n[c],e),h=!1;l.subscribe(fe(r,f=>{s[c]=f,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function XD(n,e,t){n?Rt(t,n,e):e()}function eb(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=N=>l<r?w(N):c.push(N),w=N=>{s&&e.next(N),l++;let R=!1;Ke(t(N,h++)).subscribe(fe(e,k=>{i?.(k),s?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let k=c.shift();o?Rt(e,o,()=>w(k)):w(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(fe(e,y,()=>{f=!0,g()})),()=>{a?.()}}function et(n,e,t=1/0){return te(e)?et((r,i)=>ie((s,o)=>e(r,s,i,o))(Ke(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>eb(r,i,n,t)))}function Tg(n=1/0){return et(Lt,n)}function tb(){return Tg(1)}function so(...n){return tb()(He(n,Hr(n)))}function ed(n){return new he(e=>{Ke(n()).subscribe(e)})}function Sg(...n){let e=Ul(n),{args:t,keys:r}=Zl(n),i=new he(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let f=!1;Ke(t[h]).subscribe(fe(s,g=>{f||(f=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Jl(r,a):a),s.complete())}))}});return e?i.pipe(Yl(e)):i}function zt(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function zr(n){return ye((e,t)=>{let r=null,i=!1,s;r=e.subscribe(fe(t,void 0,void 0,o=>{s=Ke(n(o,zr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function nb(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(fe(o,h=>{let f=l++;c=a?n(c,h,f):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function oo(n,e){return te(e)?et(n,e,1):et(n,1)}function Wr(n){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ar(n){return n<=0?()=>Vt:ye((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ag(n){return ie(()=>n)}function td(n=aO){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function aO(){return new or}function nc(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function An(n,e){let t=arguments.length>=2;return r=>r.pipe(n?zt((i,s)=>n(i,s,r)):Lt,ar(1),t?Wr(e):td(()=>new or))}function ao(n){return n<=0?()=>Vt:ye((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?zt((i,s)=>n(i,s,r)):Lt,ao(1),t?Wr(e):td(()=>new or))}function nd(n,e){return ye(nb(n,e,arguments.length>=2,!0))}function rd(...n){let e=Hr(n);return ye((t,r)=>{(e?so(n,t,e):so(n,t)).subscribe(r)})}function hn(n,e){return ye((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(fe(r,c=>{i?.unsubscribe();let l=0,h=s++;Ke(n(c,h)).subscribe(i=fe(r,f=>r.next(e?e(c,f,h,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ng(n){return ye((e,t)=>{Ke(n).subscribe(fe(t,()=>t.complete(),ec)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var cO="https://g.co/ng/security#xss",B=class extends Error{constructor(e,t){super(Lm(e,t)),this.code=e}};function Lm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function pc(n){return{toString:n}.toString()}var id="__parameters__";function uO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Hb(n,e,t){return pc(()=>{let r=uO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let f=c.hasOwnProperty(id)?c[id]:Object.defineProperty(c,id,{value:[]})[id];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rc=globalThis;function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function lO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function St(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(St).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function rb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var dO=Re({__forward_ref__:Re});function Fn(n){return n.__forward_ref__=Fn,n.toString=function(){return St(this())},n}function Tt(n){return qb(n)?n():n}function qb(n){return typeof n=="function"&&n.hasOwnProperty(dO)&&n.__forward_ref__===Fn}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ki(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ld(n){return ib(n,zb)||ib(n,Wb)}function Gb(n){return Ld(n)!==null}function ib(n,e){return n.hasOwnProperty(e)?n[e]:null}function hO(n){let e=n&&(n[zb]||n[Wb]);return e||null}function sb(n){return n&&(n.hasOwnProperty(ob)||n.hasOwnProperty(fO))?n[ob]:null}var zb=Re({\u0275prov:Re}),ob=Re({\u0275inj:Re}),Wb=Re({ngInjectableDef:Re}),fO=Re({ngInjectorDef:Re}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kb(n){return n&&!!n.\u0275providers}var pO=Re({\u0275cmp:Re}),gO=Re({\u0275dir:Re}),mO=Re({\u0275pipe:Re}),yO=Re({\u0275mod:Re}),fd=Re({\u0275fac:Re}),oc=Re({__NG_ELEMENT_ID__:Re}),ab=Re({__NG_ENV_ID__:Re});function Vm(n){return typeof n=="string"?n:n==null?"":String(n)}function _O(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Vm(n)}function vO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,n)}function Um(n,e){throw new B(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Gg;function Qb(){return Gg}function Nt(n){let e=Gg;return Gg=n,e}function Yb(n,e,t){let r=Ld(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Um(n,"Injector")}var IO={},ac=IO,zg="__NG_DI_FLAG__",pd="ngTempTokenPath",wO="ngTokenPath",EO=/\n/gm,CO="\u0275",cb="__source",ho;function DO(){return ho}function Kr(n){let e=ho;return ho=n,e}function bO(n,e=ae.Default){if(ho===void 0)throw new B(-203,!1);return ho===null?Yb(n,void 0,e):ho.get(n,e&ae.Optional?null:void 0,e)}function se(n,e=ae.Default){return(Qb()||bO)(Tt(n),e)}function L(n,e=ae.Default){return se(n,Vd(e))}function Vd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wg(n){let e=[];for(let t=0;t<n.length;t++){let r=Tt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],c=TO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(se(i,s))}else e.push(se(r))}return e}function Zb(n,e){return n[zg]=e,n.prototype[zg]=e,n}function TO(n){return n[zg]}function SO(n,e,t,r){let i=n[pd];throw e[cb]&&i.unshift(e[cb]),n.message=AO(`
`+n.message,i,t,r),n[wO]=i,n[pd]=null,n}function AO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CO?n.slice(2):n;let i=St(e);if(Array.isArray(e))i=e.map(St).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):St(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(EO,`
  `)}`}var ze=Zb(Hb("Optional"),8);var jm=Zb(Hb("SkipSelf"),4);function Ui(n,e){let t=n.hasOwnProperty(fd);return t?n[fd]:null}function Bm(n,e){n.forEach(t=>Array.isArray(t)?Bm(t,e):e(t))}function Jb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function NO(n,e,t){let r=gc(n,e);return r>=0?n[r|1]=t:(r=~r,RO(n,r,e,t)),r}function Mg(n,e){let t=gc(n,e);if(t>=0)return n[t|1]}function gc(n,e){return MO(n,e,1)}function MO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var po={},Wt=[],go=new q(""),Xb=new q("",-1),eT=new q(""),md=class{get(e,t=ac){if(t===ac){let r=new Error(`NullInjectorError: No provider for ${St(e)}!`);throw r.name="NullInjectorError",r}return t}},tT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(tT||{}),Mn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Mn||{}),Zr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Zr||{});function xO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Kg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];kO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function PO(n){return n===3||n===4||n===6}function kO(n){return n.charCodeAt(0)===64}function cc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ub(n,t,i,null,e[++r]):ub(n,t,i,null,null))}}return n}function ub(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var nT="ng-template";function OO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($m(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function $m(n){return n.type===4&&n.value!==nT}function FO(n,e,t){let r=n.type===4&&!t?nT:n.value;return e===r}function LO(n,e,t){let r=4,i=n.attrs,s=i!==null?jO(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!fn(r)&&!fn(c))return!1;if(o&&fn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!FO(n,c,t)||c===""&&e.length===1){if(fn(r))return!1;o=!0}}else if(r&8){if(i===null||!OO(n,i,c,t)){if(fn(r))return!1;o=!0}}else{let l=e[++a],h=VO(c,i,$m(n),t);if(h===-1){if(fn(r))return!1;o=!0;continue}if(l!==""){let f;if(h>s?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(fn(r))return!1;o=!0}}}}return fn(r)||o}function fn(n){return(n&1)===0}function VO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return BO(e,n)}function UO(n,e,t=!1){for(let r=0;r<e.length;r++)if(LO(n,e[r],t))return!0;return!1}function jO(n){for(let e=0;e<n.length;e++){let t=n[e];if(PO(t))return e}return n.length}function BO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function lb(n,e){return n?":not("+e.trim()+")":e}function $O(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!fn(o)&&(e+=lb(s,i),i=""),r=o,s=s||!fn(r);t++}return i!==""&&(e+=lb(s,i)),e}function HO(n){return n.map($O).join(",")}function qO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!fn(i))break;i=s}r++}return{attrs:e,classes:t}}function Zt(n){return pc(()=>{let e=cT(n),t=de(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===tT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mn.Emulated,styles:n.styles||Wt,_:null,schemas:n.schemas||null,tView:null,id:""});uT(t);let r=n.dependencies;return t.directiveDefs=hb(r,!1),t.pipeDefs=hb(r,!0),t.id=WO(t),t})}function GO(n){return ji(n)||iT(n)}function zO(n){return n!==null}function Qi(n){return pc(()=>({type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function db(n,e){if(n==null)return po;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Zr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Zr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function qe(n){return pc(()=>{let e=cT(n);return uT(e),e})}function rT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ji(n){return n[pO]||null}function iT(n){return n[gO]||null}function sT(n){return n[mO]||null}function oT(n){let e=ji(n)||iT(n)||sT(n);return e!==null?e.standalone:!1}function aT(n,e){let t=n[yO]||null;if(!t&&e===!0)throw new Error(`Type ${St(n)} does not have '\u0275mod' property.`);return t}function cT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||po,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:db(n.inputs,e),outputs:db(n.outputs),debugInfo:null}}function uT(n){n.features?.forEach(e=>e(n))}function hb(n,e){if(!n)return null;let t=e?sT:GO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(zO)}function WO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Jt(n){return{\u0275providers:n}}function KO(...n){return{\u0275providers:lT(!0,n),\u0275fromNgModule:!0}}function lT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Bm(e,o=>{let a=o;Qg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dT(i,s),t}function dT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Hm(i,s=>{e(s,r)})}}function Qg(n,e,t,r){if(n=Tt(n),!n)return!1;let i=null,s=sb(n),o=!s&&ji(n);if(!s&&!o){let c=n.ngModule;if(s=sb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Qg(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Bm(s.imports,h=>{Qg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&dT(l,e)}if(!a){let l=Ui(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:eT,useValue:i,multi:!0},i),e({provide:go,useValue:()=>se(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Hm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Hm(n,e){for(let t of n)Kb(t)&&(t=t.\u0275providers),Array.isArray(t)?Hm(t,e):e(t)}var QO=Re({provide:String,useValue:Re});function hT(n){return n!==null&&typeof n=="object"&&QO in n}function YO(n){return!!(n&&n.useExisting)}function ZO(n){return!!(n&&n.useFactory)}function mo(n){return typeof n=="function"}function JO(n){return!!n.useClass}var Ud=new q(""),cd={},XO={},xg;function qm(){return xg===void 0&&(xg=new md),xg}var Yt=class{},uc=class extends Yt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zg(e,o=>this.processProvider(o)),this.records.set(Xb,co(void 0,this)),i.has("environment")&&this.records.set(Yt,co(void 0,this));let s=this.records.get(Ud);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(eT,Wt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Kr(this),r=Nt(void 0),i;try{return e()}finally{Kr(t),Nt(r)}}get(e,t=ac,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ab))return e[ab](this);r=Vd(r);let i,s=Kr(this),o=Nt(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=i1(e)&&Ld(e);l&&this.injectableDefInScope(l)?c=co(Yg(e),cd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?qm():this.parent;return t=r&ae.Optional&&t===ac?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[pd]=a[pd]||[]).unshift(St(e)),s)throw a;return SO(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(o),Kr(s)}}resolveInjectorInitializers(){let e=we(null),t=Kr(this),r=Nt(void 0),i;try{let s=this.get(go,Wt,ae.Self);for(let o of s)o()}finally{Kr(t),Nt(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(St(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=Tt(e);let t=mo(e)?e:Tt(e&&e.provide),r=t1(e);if(!mo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=co(void 0,cd,!0),i.factory=()=>Wg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=we(null);try{return t.value===cd&&(t.value=XO,t.value=t.factory()),typeof t.value=="object"&&t.value&&r1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Yg(n){let e=Ld(n),t=e!==null?e.factory:Ui(n);if(t!==null)return t;if(n instanceof q)throw new B(204,!1);if(n instanceof Function)return e1(n);throw new B(204,!1)}function e1(n){if(n.length>0)throw new B(204,!1);let t=hO(n);return t!==null?()=>t.factory(n):()=>new n}function t1(n){if(hT(n))return co(void 0,n.useValue);{let e=fT(n);return co(e,cd)}}function fT(n,e,t){let r;if(mo(n)){let i=Tt(n);return Ui(i)||Yg(i)}else if(hT(n))r=()=>Tt(n.useValue);else if(ZO(n))r=()=>n.useFactory(...Wg(n.deps||[]));else if(YO(n))r=()=>se(Tt(n.useExisting));else{let i=Tt(n&&(n.useClass||n.provide));if(n1(n))r=()=>new i(...Wg(n.deps));else return Ui(i)||Yg(i)}return r}function co(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function n1(n){return!!n.deps}function r1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function i1(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Zg(n,e){for(let t of n)Array.isArray(t)?Zg(t,e):t&&Kb(t)?Zg(t.\u0275providers,e):e(t)}function dr(n,e){n instanceof uc&&n.assertNotDestroyed();let t,r=Kr(n),i=Nt(void 0);try{return e()}finally{Kr(r),Nt(i)}}function s1(){return Qb()!==void 0||DO()!=null}function o1(n){return typeof n=="function"}var hr=0,ue=1,Y=2,At=3,pn=4,mn=5,yd=6,_d=7,gn=8,yo=9,cr=10,nt=11,lc=12,fb=13,bo=14,xn=15,_o=16,uo=17,vo=18,jd=19,pT=20,Qr=21,Pg=22,Kt=23,Pn=25,gT=1;var Bi=7,vd=8,Id=9,Qt=10,wd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(wd||{});function Yr(n){return Array.isArray(n)&&typeof n[gT]=="object"}function fr(n){return Array.isArray(n)&&n[gT]===!0}function mT(n){return(n.flags&4)!==0}function Bd(n){return n.componentOffset>-1}function Gm(n){return(n.flags&1)===1}function Jr(n){return!!n.template}function Jg(n){return(n[Y]&512)!==0}var Xg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Yi(){return _T}function _T(n){return n.type.prototype.ngOnChanges&&(n.setInput=c1),a1}Yi.ngInherit=!0;function a1(){let n=IT(this),e=n?.current;if(e){let t=n.previous;if(t===po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function c1(n,e,t,r,i){let s=this.declaredInputs[r],o=IT(n)||u1(n,{previous:po,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Xg(l&&l.currentValue,t,c===po),yT(n,e,i,t)}var vT="__ngSimpleChanges__";function IT(n){return n[vT]||null}function u1(n,e){return n[vT]=e}var pb=null;var Rn=function(n,e,t){pb?.(n,e,t)},l1="svg",d1="math";function kn(n){for(;Array.isArray(n);)n=n[hr];return n}function wT(n,e){return kn(e[n])}function Xt(n,e){return kn(e[n.index])}function ET(n,e){return n.data[e]}function h1(n,e){return n[e]}function ti(n,e){let t=e[n];return Yr(t)?t:t[hr]}function zm(n){return(n[Y]&128)===128}function f1(n){return fr(n[At])}function Ed(n,e){return e==null?null:n[e]}function CT(n){n[uo]=0}function DT(n){n[Y]&1024||(n[Y]|=1024,zm(n)&&Hd(n))}function p1(n,e){for(;n>0;)e=e[bo],n--;return e}function $d(n){return!!(n[Y]&9216||n[Kt]?.dirty)}function em(n){n[cr].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),$d(n)&&Hd(n)}function Hd(n){n[cr].changeDetectionScheduler?.notify(0);let e=$i(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!zm(e)));)e=$i(e)}function bT(n,e){if((n[Y]&256)===256)throw new B(911,!1);n[Qr]===null&&(n[Qr]=[]),n[Qr].push(e)}function g1(n,e){if(n[Qr]===null)return;let t=n[Qr].indexOf(e);t!==-1&&n[Qr].splice(t,1)}function $i(n){let e=n[At];return fr(e)?e[At]:e}var le={lFrame:OT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TT=!1;function m1(){return le.lFrame.elementDepthCount}function y1(){le.lFrame.elementDepthCount++}function _1(){le.lFrame.elementDepthCount--}function ST(){return le.bindingsEnabled}function v1(){return le.skipHydrationRootTNode!==null}function I1(n){return le.skipHydrationRootTNode===n}function w1(){le.skipHydrationRootTNode=null}function Ne(){return le.lFrame.lView}function Mt(){return le.lFrame.tView}function ni(n){return le.lFrame.contextLView=n,n[gn]}function ri(n){return le.lFrame.contextLView=null,n}function xt(){let n=AT();for(;n!==null&&n.type===64;)n=n.parent;return n}function AT(){return le.lFrame.currentTNode}function E1(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function mc(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function RT(){return le.lFrame.isParent}function C1(){le.lFrame.isParent=!1}function NT(){return TT}function gb(n){TT=n}function MT(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function D1(n){return le.lFrame.bindingIndex=n}function qd(){return le.lFrame.bindingIndex++}function b1(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function T1(){return le.lFrame.inI18n}function S1(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,tm(e)}function A1(){return le.lFrame.currentDirectiveIndex}function tm(n){le.lFrame.currentDirectiveIndex=n}function R1(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xT(n){le.lFrame.currentQueryIndex=n}function N1(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[mn]:null}function PT(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=N1(s),i===null||(s=s[bo],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=le.lFrame=kT();return r.currentTNode=e,r.lView=n,!0}function Wm(n){let e=kT(),t=n[ue];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kT(){let n=le.lFrame,e=n===null?null:n.child;return e===null?OT(n):e}function OT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FT(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LT=FT;function Km(){let n=FT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function M1(n){return(le.lFrame.contextLView=p1(n,le.lFrame.contextLView))[gn]}function To(){return le.lFrame.selectedIndex}function Hi(n){le.lFrame.selectedIndex=n}function Qm(){let n=le.lFrame;return ET(n.tView,n.selectedIndex)}function x1(){return le.lFrame.currentNamespace}var VT=!0;function Ym(){return VT}function Zm(n){VT=n}function P1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=_T(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Jm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ud(n,e,t){UT(n,e,3,t)}function ld(n,e,t,r){(n[Y]&3)===t&&UT(n,e,t,r)}function kg(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function UT(n,e,t,r){let i=r!==void 0?n[uo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[uo]+=65536),(a<s||s==-1)&&(k1(n,t,e,c),n[uo]=(n[uo]&4294901760)+c+2),c++}function mb(n,e){Rn(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),Rn(5,n,e)}}function k1(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Y]>>14<n[uo]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,mb(a,s)):mb(a,s)}var fo=-1,qi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function O1(n){return n instanceof qi}function F1(n){return(n.flags&8)!==0}function L1(n){return(n.flags&16)!==0}var Og={},nm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Vd(r);let i=this.injector.get(e,Og,r);return i!==Og||t===Og?i:this.parentInjector.get(e,t,r)}};function jT(n){return n!==fo}function Cd(n){return n&32767}function V1(n){return n>>16}function Dd(n,e){let t=V1(n),r=e;for(;t>0;)r=r[bo],t--;return r}var rm=!0;function bd(n){let e=rm;return rm=n,e}var U1=256,BT=U1-1,$T=5,j1=0,Nn={};function B1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(oc)&&(r=t[oc]),r==null&&(r=t[oc]=j1++);let i=r&BT,s=1<<i;e.data[n+(i>>$T)]|=s}function Td(n,e){let t=HT(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,Fg(r.data,n),Fg(e,null),Fg(r.blueprint,null));let i=Xm(n,e),s=n.injectorIndex;if(jT(i)){let o=Cd(i),a=Dd(i,e),c=a[ue].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Fg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function HT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=KT(i),r===null)return fo;if(t++,i=i[bo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fo}function im(n,e,t){B1(n,e,t)}function qT(n,e,t){if(t&ae.Optional||n!==void 0)return n;Um(e,"NodeInjector")}function GT(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[yo],s=Nt(void 0);try{return i?i.get(e,r,t&ae.Optional):Yb(e,r,t&ae.Optional)}finally{Nt(s)}}return qT(r,e,t)}function zT(n,e,t,r=ae.Default,i){if(n!==null){if(e[Y]&2048&&!(r&ae.Self)){let o=z1(n,e,t,r,Nn);if(o!==Nn)return o}let s=WT(n,e,t,r,Nn);if(s!==Nn)return s}return GT(e,t,r,i)}function WT(n,e,t,r,i){let s=q1(t);if(typeof s=="function"){if(!PT(e,n,r))return r&ae.Host?qT(i,t,r):GT(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))Um(t);else return o}finally{LT()}}else if(typeof s=="number"){let o=null,a=HT(n,e),c=fo,l=r&ae.Host?e[xn][mn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Xm(n,e):e[a+8],c===fo||!_b(r,!1)?a=-1:(o=e[ue],a=Cd(c),e=Dd(c,e)));a!==-1;){let h=e[ue];if(yb(s,a,h.data)){let f=$1(a,e,t,o,r,l);if(f!==Nn)return f}c=e[a+8],c!==fo&&_b(r,e[ue].data[a+8]===l)&&yb(s,a,e)?(o=h,a=Cd(c),e=Dd(c,e)):a=-1}}return i}function $1(n,e,t,r,i,s){let o=e[ue],a=o.data[n+8],c=r==null?Bd(a)&&rm:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=H1(a,o,t,c,l);return h!==null?Io(e,o,h,a):Nn}function H1(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,f=r?a:a+h,g=i?a+h:l;for(let y=f;y<g;y++){let w=o[y];if(y<c&&t===w||y>=c&&w.type===t)return y}if(i){let y=o[c];if(y&&Jr(y)&&y.type===t)return c}return null}function Io(n,e,t,r){let i=n[t],s=e.data;if(O1(i)){let o=i;o.resolving&&vO(_O(s[t]));let a=bd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Nt(o.injectImpl):null,h=PT(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&P1(t,s[t],e)}finally{l!==null&&Nt(l),bd(a),o.resolving=!1,LT()}}return i}function q1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(oc)?n[oc]:void 0;return typeof e=="number"?e>=0?e&BT:G1:e}function yb(n,e,t){let r=1<<n;return!!(t[e+(n>>$T)]&r)}function _b(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Vi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zT(this._tNode,this._lView,e,Vd(r),t)}};function G1(){return new Vi(xt(),Ne())}function pr(n){return pc(()=>{let e=n.prototype.constructor,t=e[fd]||sm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[fd]||sm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function sm(n){return qb(n)?()=>{let e=sm(Tt(n));return e&&e()}:Ui(n)}function z1(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Y]&2048&&!(o[Y]&512);){let a=WT(s,o,t,r|ae.Self,Nn);if(a!==Nn)return a;let c=s.parent;if(!c){let l=o[pT];if(l){let h=l.get(t,Nn,r);if(h!==Nn)return h}c=KT(o),o=o[bo]}s=c}return i}function KT(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[mn]:null}function vb(n,e=null,t=null,r){let i=QT(n,e,t,r);return i.resolveInjectorInitializers(),i}function QT(n,e=null,t=null,r,i=new Set){let s=[t||Wt,KO(n)];return r=r||(typeof n=="object"?void 0:St(n)),new uc(s,e||qm(),r||null,i)}var yt=class n{static{this.THROW_IF_NOT_FOUND=ac}static{this.NULL=new md}static create(e,t){if(Array.isArray(e))return vb({name:""},t,e,"");{let r=e.name??"";return vb({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>se(Xb)})}static{this.__NG_ELEMENT_ID__=-1}};var W1=new q("");W1.__NG_ELEMENT_ID__=n=>{let e=xt();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new B(204,!1)};var K1="ngOriginalError";function Lg(n){return n[K1]}var YT=!0,ZT=(()=>{class n{static{this.__NG_ELEMENT_ID__=Q1}static{this.__NG_ENV_ID__=t=>t}}return n})(),om=class extends ZT{constructor(e){super(),this._lView=e}onDestroy(e){return bT(this._lView,e),()=>g1(this._lView,e)}};function Q1(){return new om(Ne())}var So=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var am=class extends ct{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,s1()&&(this.destroyRef=L(ZT,{optional:!0})??void 0,this.pendingTasks=L(So,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Qe=am;function Sd(...n){}function JT(n){let e,t;function r(){n=Sd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ib(n){return queueMicrotask(()=>n()),()=>{n=Sd}}var ey="isAngularZone",Ad=ey+"_ID",Y1=0,De=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=YT}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,X1(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ey)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Z1,Sd,Sd);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Z1={};function ty(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function J1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){JT(()=>{n.callbackScheduled=!1,cm(n),n.isCheckStableRunning=!0,ty(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),cm(n)}function X1(n){let e=()=>{J1(n)},t=Y1++;n._inner=n._inner.fork({name:"angular",properties:{[ey]:!0,[Ad]:t,[Ad+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(eF(c))return r.invokeTask(s,o,a,c);try{return wb(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Eb(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return wb(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tF(c)&&e(),Eb(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,cm(n),ty(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function cm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Eb(n){n._nesting--,ty(n)}var um=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eF(n){return XT(n,"__ignore_ng_zone__")}function tF(n){return XT(n,"__scheduler_tick__")}function XT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ur=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lg(e);for(;t&&Lg(t);)t=Lg(t);return t||null}},nF=new q("",{providedIn:"root",factory:()=>{let n=L(De),e=L(ur);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function rF(){return Gd(xt(),Ne())}function Gd(n,e){return new Ln(Xt(n,e))}var Ln=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=rF}}return n})();function eS(n){return(n.flags&128)===128}var tS=new Map,iF=0;function sF(){return iF++}function oF(n){tS.set(n[jd],n)}function lm(n){tS.delete(n[jd])}var Cb="__ngContext__";function Gi(n,e){Yr(e)?(n[Cb]=e[jd],oF(e)):n[Cb]=e}function nS(n){return iS(n[lc])}function rS(n){return iS(n[pn])}function iS(n){for(;n!==null&&!fr(n);)n=n[pn];return n}var dm;function sS(n){dm=n}function aF(){if(dm!==void 0)return dm;if(typeof document<"u")return document;throw new B(210,!1)}var ny=new q("",{providedIn:"root",factory:()=>cF}),cF="ng",ry=new q(""),ii=new q("",{providedIn:"platform",factory:()=>"unknown"});var iy=new q("",{providedIn:"root",factory:()=>aF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uF="h",lF="b";var dF=()=>null;function sy(n,e,t=!1){return dF(n,e,t)}var oS=!1,hF=new q("",{providedIn:"root",factory:()=>oS});var hm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cO})`}};function oy(n){return n instanceof hm?n.changingThisBreaksApplicationSecurity:n}function aS(n){return n instanceof Function?n():n}var On=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(On||{}),fF;function ay(n,e){return fF(n,e)}function lo(n,e,t,r,i){if(r!=null){let s,o=!1;fr(r)?s=r:Yr(r)&&(o=!0,r=r[hr]);let a=kn(r);n===0&&t!==null?i==null?hS(e,t,a):Rd(e,t,a,i||null,!0):n===1&&t!==null?Rd(e,t,a,i||null,!0):n===2?AF(e,a,o):n===3&&e.destroyNode(a),s!=null&&NF(e,n,s,t,i)}}function pF(n,e){return n.createText(e)}function gF(n,e,t){n.setValue(e,t)}function cS(n,e,t){return n.createElement(e,t)}function mF(n,e){uS(n,e),e[hr]=null,e[mn]=null}function yF(n,e,t,r,i,s){r[hr]=i,r[mn]=e,zd(n,r,t,1,i,s)}function uS(n,e){e[cr].changeDetectionScheduler?.notify(9),zd(n,e,e[nt],2,null,null)}function _F(n){let e=n[lc];if(!e)return Vg(n[ue],n);for(;e;){let t=null;if(Yr(e))t=e[lc];else{let r=e[Qt];r&&(t=r)}if(!t){for(;e&&!e[pn]&&e!==n;)Yr(e)&&Vg(e[ue],e),e=e[At];e===null&&(e=n),Yr(e)&&Vg(e[ue],e),t=e&&e[pn]}e=t}}function vF(n,e,t,r){let i=Qt+r,s=t.length;r>0&&(t[i-1][pn]=e),r<s-Qt?(e[pn]=t[i],Jb(t,Qt+r,e)):(t.push(e),e[pn]=null),e[At]=t;let o=e[_o];o!==null&&t!==o&&lS(o,e);let a=e[vo];a!==null&&a.insertView(n),em(e),e[Y]|=128}function lS(n,e){let t=n[Id],r=e[At];if(Yr(r))n[Y]|=wd.HasTransplantedViews;else{let i=r[At][xn];e[xn]!==i&&(n[Y]|=wd.HasTransplantedViews)}t===null?n[Id]=[e]:t.push(e)}function cy(n,e){let t=n[Id],r=t.indexOf(e);t.splice(r,1)}function fm(n,e){if(n.length<=Qt)return;let t=Qt+e,r=n[t];if(r){let i=r[_o];i!==null&&i!==n&&cy(i,r),e>0&&(n[t-1][pn]=r[pn]);let s=gd(n,Qt+e);mF(r[ue],r);let o=s[vo];o!==null&&o.detachView(s[ue]),r[At]=null,r[pn]=null,r[Y]&=-129}return r}function dS(n,e){if(!(e[Y]&256)){let t=e[nt];t.destroyNode&&zd(n,e,t,3,null,null),_F(e)}}function Vg(n,e){if(e[Y]&256)return;let t=we(null);try{e[Y]&=-129,e[Y]|=256,e[Kt]&&dg(e[Kt]),wF(n,e),IF(n,e),e[ue].type===1&&e[nt].destroy();let r=e[_o];if(r!==null&&fr(e[At])){r!==e[At]&&cy(r,e);let i=e[vo];i!==null&&i.detachView(n)}lm(e)}finally{we(t)}}function IF(n,e){let t=n.cleanup,r=e[_d];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[_d]=null);let i=e[Qr];if(i!==null){e[Qr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function wF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof qi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Rn(4,a,c);try{c.call(a)}finally{Rn(5,a,c)}}else{Rn(4,i,s);try{s.call(i)}finally{Rn(5,i,s)}}}}}function EF(n,e,t){return CF(n,e.parent,t)}function CF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[hr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Mn.None||s===Mn.Emulated)return null}return Xt(r,t)}}function Rd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hS(n,e,t){n.appendChild(e,t)}function Db(n,e,t,r,i){r!==null?Rd(n,e,t,r,i):hS(n,e,t)}function fS(n,e){return n.parentNode(e)}function DF(n,e){return n.nextSibling(e)}function bF(n,e,t){return SF(n,e,t)}function TF(n,e,t){return n.type&40?Xt(n,t):null}var SF=TF,bb;function uy(n,e,t,r){let i=EF(n,r,e),s=e[nt],o=r.parent||e[mn],a=bF(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Db(s,i,t[c],a,!1);else Db(s,i,t,a,!1);bb!==void 0&&bb(s,r,e,t,i)}function ic(n,e){if(e!==null){let t=e.type;if(t&3)return Xt(e,n);if(t&4)return pm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ic(n,r);{let i=n[e.index];return fr(i)?pm(-1,i):kn(i)}}else{if(t&128)return ic(n,e.next);if(t&32)return ay(e,n)()||kn(n[e.index]);{let r=pS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$i(n[xn]);return ic(i,r)}else return ic(n,e.next)}}}return null}function pS(n,e){if(e!==null){let r=n[xn][mn],i=e.projection;return r.projection[i]}return null}function pm(n,e){let t=Qt+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return ic(r,i)}return e[Bi]}function AF(n,e,t){n.removeChild(null,e,t)}function ly(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Gi(kn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)ly(n,e,t.child,r,i,s,!1),lo(e,n,i,a,s);else if(c&32){let l=ay(t,r),h;for(;h=l();)lo(e,n,i,h,s);lo(e,n,i,a,s)}else c&16?RF(n,e,r,t,i,s):lo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function zd(n,e,t,r,i,s){ly(t,r,n.firstChild,e,i,s,!1)}function RF(n,e,t,r,i,s){let o=t[xn],c=o[mn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];lo(e,n,i,h,s)}else{let l=c,h=o[At];eS(r)&&(l.flags|=128),ly(n,e,l,h,i,s,!0)}}function NF(n,e,t,r,i){let s=t[Bi],o=kn(t);s!==o&&lo(e,n,r,s,i);for(let a=Qt;a<t.length;a++){let c=t[a];zd(c[ue],c,n,e,r,s)}}function MF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:On.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=On.Important),n.setStyle(t,r,i,s))}}function xF(n,e,t){n.setAttribute(e,"style",t)}function gS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mS(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Kg(n,e,r),i!==null&&gS(n,e,i),s!==null&&xF(n,e,s)}var Zi={};function Oe(n=1){yS(Mt(),Ne(),To()+n,!1)}function yS(n,e,t,r){if(!r)if((e[Y]&3)===3){let s=n.preOrderCheckHooks;s!==null&&ud(e,s,t)}else{let s=n.preOrderHooks;s!==null&&ld(e,s,0,t)}Hi(t)}function G(n,e=ae.Default){let t=Ne();if(t===null)return se(n,e);let r=xt();return zT(r,t,Tt(n),e)}function _S(n,e,t,r,i,s){let o=we(null);try{let a=null;i&Zr.SignalBased&&(a=e[r][sr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Zr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):yT(e,a,r,s)}finally{we(o)}}function PF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Hi(~i);else{let s=i,o=t[++r],a=t[++r];S1(o,s);let c=e[s];a(2,c)}}}finally{Hi(-1)}}function Wd(n,e,t,r,i,s,o,a,c,l,h){let f=e.blueprint.slice();return f[hr]=i,f[Y]=r|4|128|8|64,(l!==null||n&&n[Y]&2048)&&(f[Y]|=2048),CT(f),f[At]=f[bo]=n,f[gn]=t,f[cr]=o||n&&n[cr],f[nt]=a||n&&n[nt],f[yo]=c||n&&n[yo]||null,f[mn]=s,f[jd]=sF(),f[yd]=h,f[pT]=l,f[xn]=e.type==2?n[xn]:f,f}function Kd(n,e,t,r,i){let s=n.data[e];if(s===null)s=kF(n,e,t,r,i),T1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=E1();s.injectorIndex=o===null?-1:o.injectorIndex}return mc(s,!0),s}function kF(n,e,t,r,i){let s=AT(),o=RT(),a=o?s:s&&s.parent,c=n.data[e]=UF(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function vS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function IS(n,e,t,r,i){let s=To(),o=r&2;try{Hi(-1),o&&e.length>Pn&&yS(n,e,Pn,!1),Rn(o?2:0,i),t(r,i)}finally{Hi(s),Rn(o?3:1,i)}}function wS(n,e,t){if(mT(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{we(r)}}}function ES(n,e,t){ST()&&(GF(n,e,t,Xt(t,e)),(t.flags&64)===64&&AS(n,e,t))}function CS(n,e,t=Xt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function DS(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dy(n,e,t,r,i,s,o,a,c,l,h){let f=Pn+r,g=f+i,y=OF(f,g),w=typeof l=="function"?l():l;return y[ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:h}}function OF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zi);return t}function FF(n,e,t,r){let s=r.get(hF,oS)||t===Mn.ShadowDom,o=n.selectRootElement(e,s);return LF(o),o}function LF(n){VF(n)}var VF=()=>null;function UF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return v1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Tb(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Zr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?Sb(r,t,l,a,c):Sb(r,t,l,a)}return r}function Sb(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function jF(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let f=s[h],g=t?t.get(f):null,y=g?g.inputs:null,w=g?g.outputs:null;c=Tb(0,f.inputs,h,c,y),l=Tb(1,f.outputs,h,l,w);let N=c!==null&&o!==null&&!$m(e)?nL(c,h,o):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function BF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bS(n,e,t,r,i,s,o,a){let c=Xt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(hy(n,t,h,r,i),Bd(e)&&$F(t,e.index)):e.type&3?(r=BF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function $F(n,e){let t=ti(e,n);t[Y]&16||(t[Y]|=64)}function TS(n,e,t,r){if(ST()){let i=r===null?null:{"":-1},s=WF(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&SS(n,e,t,o,i,a),i&&KF(t,r,i)}t.mergedAttrs=cc(t.mergedAttrs,t.attrs)}function SS(n,e,t,r,i,s){for(let l=0;l<r.length;l++)im(Td(t,e),n,r[l].type);YF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=vS(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=cc(t.mergedAttrs,h.hostAttrs),ZF(n,t,e,c,h),QF(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}jF(n,t,s)}function HF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;qF(o)!=a&&o.push(a),o.push(t,r,s)}}function qF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function GF(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Bd(t)&&JF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Td(t,e),Gi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Io(e,n,a,t);if(Gi(l,e),o!==null&&tL(e,a-i,l,c,t,o),Jr(c)){let h=ti(t.index,e);h[gn]=Io(e,n,a,t)}}}function AS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=A1();try{Hi(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];tm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zF(c,l)}}finally{Hi(-1),tm(o)}}function zF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function WF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(UO(e,o.selectors,!1))if(r||(r=[]),Jr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;gm(n,e,c)}else r.unshift(o),gm(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function gm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function KF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function QF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jr(e)&&(t[""]=n)}}function YF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ZF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ui(i.type,!0)),o=new qi(s,Jr(i),G);n.blueprint[r]=o,t[r]=o,HF(n,e,r,vS(n,t,i.hostVars,Zi),i)}function JF(n,e,t){let r=Xt(e,n),i=DS(t),s=n[cr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Qd(n,Wd(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function XF(n,e,t,r,i,s){let o=Xt(n,e);eL(e[nt],o,s,n.value,t,r,i)}function eL(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Vm(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function tL(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],f=o[a++];_S(r,t,c,l,h,f)}}function nL(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function RS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function NS(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];xT(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function Qd(n,e){return n[lc]?n[fb][pn]=e:n[lc]=e,n[fb]=e,e}function mm(n,e,t){xT(0);let r=we(null);try{e(n,t)}finally{we(r)}}function rL(n){return n[_d]??=[]}function iL(n){return n.cleanup??=[]}function MS(n,e){let t=n[yo],r=t?t.get(ur,null):null;r&&r.handleError(e)}function hy(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];_S(h,l,r,a,c,i)}}function sL(n,e,t){let r=wT(e,n);gF(n[nt],r,t)}function oL(n,e){let t=ti(e,n),r=t[ue];aL(r,t);let i=t[hr];i!==null&&t[yd]===null&&(t[yd]=sy(i,t[yo])),fy(r,t,t[gn])}function aL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function fy(n,e,t){Wm(e);try{let r=n.viewQuery;r!==null&&mm(1,r,t);let i=n.template;i!==null&&IS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vo]?.finishViewCreation(n),n.staticContentQueries&&NS(n,e),n.staticViewQueries&&mm(2,n.viewQuery,t);let s=n.components;s!==null&&cL(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,Km()}}function cL(n,e){for(let t=0;t<e.length;t++)oL(n,e[t])}function uL(n,e,t,r){let i=we(null);try{let s=e.tView,a=n[Y]&4096?4096:16,c=Wd(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[_o]=l;let h=n[vo];return h!==null&&(c[vo]=h.createEmbeddedView(s)),fy(s,c,t),c}finally{we(i)}}function Ab(n,e){return!e||e.firstChild===null||eS(n)}function lL(n,e,t,r=!0){let i=e[ue];if(vF(i,e,n,t),r){let o=pm(t,n),a=e[nt],c=fS(a,n[Bi]);c!==null&&yF(i,n[mn],a,e,c,o)}let s=e[yd];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Nd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(kn(s)),fr(s)&&dL(s,r);let o=t.type;if(o&8)Nd(n,e,t.child,r);else if(o&32){let a=ay(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=pS(e,t);if(Array.isArray(a))r.push(...a);else{let c=$i(e[xn]);Nd(c[ue],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function dL(n,e){for(let t=Qt;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&Nd(r[ue],r,i,e)}n[Bi]!==n[hr]&&e.push(n[Bi])}var xS=[];function hL(n){return n[Kt]??fL(n)}function fL(n){let e=xS.pop()??Object.create(gL);return e.lView=n,e}function pL(n){n.lView[Kt]!==n&&(n.lView=null,xS.push(n))}var gL=de(O({},Xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Hd(n.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function mL(n){let e=n[Kt]??Object.create(yL);return e.lView=n,e}var yL=de(O({},Xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=$i(n.lView);for(;e&&!PS(e[ue]);)e=$i(e);e&&DT(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function PS(n){return n.type!==2}var _L=100;function kS(n,e=!0,t=0){let r=n[cr],i=r.rendererFactory,s=!1;s||i.begin?.();try{vL(n,t)}catch(o){throw e&&MS(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function vL(n,e){let t=NT();try{gb(!0),ym(n,e);let r=0;for(;$d(n);){if(r===_L)throw new B(103,!1);r++,ym(n,1)}}finally{gb(t)}}function IL(n,e,t,r){let i=e[Y];if((i&256)===256)return;let s=!1,o=!1;!s&&e[cr].inlineEffectRunner?.flush(),Wm(e);let a=!0,c=null,l=null;s||(PS(n)?(l=hL(e),c=Sl(l)):vD()===null?(a=!1,l=mL(e),c=Sl(l)):e[Kt]&&(dg(e[Kt]),e[Kt]=null));try{CT(e),D1(n.bindingStartIndex),t!==null&&IS(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let y=n.preOrderCheckHooks;y!==null&&ud(e,y,null)}else{let y=n.preOrderHooks;y!==null&&ld(e,y,0,null),kg(e,0)}if(o||wL(e),OS(e,0),n.contentQueries!==null&&NS(n,e),!s)if(h){let y=n.contentCheckHooks;y!==null&&ud(e,y)}else{let y=n.contentHooks;y!==null&&ld(e,y,1),kg(e,1)}PF(n,e);let f=n.components;f!==null&&LS(e,f,0);let g=n.viewQuery;if(g!==null&&mm(2,g,r),!s)if(h){let y=n.viewCheckHooks;y!==null&&ud(e,y)}else{let y=n.viewHooks;y!==null&&ld(e,y,2),kg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pg]){for(let y of e[Pg])y();e[Pg]=null}s||(e[Y]&=-73)}catch(h){throw s||Hd(e),h}finally{l!==null&&(ug(l,c),a&&pL(l)),Km()}}function OS(n,e){for(let t=nS(n);t!==null;t=rS(t))for(let r=Qt;r<t.length;r++){let i=t[r];FS(i,e)}}function wL(n){for(let e=nS(n);e!==null;e=rS(e)){if(!(e[Y]&wd.HasTransplantedViews))continue;let t=e[Id];for(let r=0;r<t.length;r++){let i=t[r];DT(i)}}}function EL(n,e,t){let r=ti(e,n);FS(r,t)}function FS(n,e){zm(n)&&ym(n,e)}function ym(n,e){let r=n[ue],i=n[Y],s=n[Kt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&lg(s)),o||=!1,s&&(s.dirty=!1),n[Y]&=-9217,o)IL(r,n,r.template,n[gn]);else if(i&8192){OS(n,1);let a=r.components;a!==null&&LS(n,a,1)}}function LS(n,e,t){for(let r=0;r<e.length;r++)EL(n,e[r],t)}function py(n,e){let t=NT()?64:1088;for(n[cr].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=$i(n);if(Jg(n)&&!r)return n;n=r}return null}var zi=class{get rootNodes(){let e=this._lView,t=e[ue];return Nd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[Y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(fr(e)){let t=e[vd],r=t?t.indexOf(this):-1;r>-1&&(fm(e,r),gd(t,r))}this._attachedToViewContainer=!1}dS(this._lView[ue],this._lView)}onDestroy(e){bT(this._lView,e)}markForCheck(){py(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){em(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,kS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jg(this._lView),t=this._lView[_o];t!==null&&!e&&cy(t,this._lView),uS(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=Jg(this._lView),r=this._lView[_o];r!==null&&!t&&lS(r,this._lView),em(this._lView)}},Yd=(()=>{class n{static{this.__NG_ELEMENT_ID__=bL}}return n})(),CL=Yd,DL=class extends CL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=uL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new zi(i)}};function bL(){return TL(xt(),Ne())}function TL(n,e){return n.type&4?new DL(e,n,Gd(n,e)):null}var f7=new RegExp(`^(\\d+)*(${lF}|${uF})*(.*)`);var SL=()=>null;function Rb(n,e){return SL(n,e)}var wo=class{},Zd=new q("",{providedIn:"root",factory:()=>!1});var VS=new q(""),US=new q(""),_m=class{},Md=class{};function AL(n){let e=Error(`No component factory found for ${St(n)}.`);return e[RL]=n,e}var RL="ngComponent";var vm=class{resolveComponentFactory(e){throw AL(e)}},Eo=class{static{this.NULL=new vm}},Co=class{},gr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>NL()}}return n})();function NL(){let n=Ne(),e=xt(),t=ti(e.index,n);return(Yr(t)?t:n)[nt]}var ML=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function Im(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=rb(i,a);else if(s==2){let c=a,l=e[++o];r=rb(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var xd=class extends Eo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ji(e);return new dc(t,this.ngModule)}};function Nb(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Zr.None;e?t.push({propName:o,templateName:r,isSignal:(a&Zr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function xL(n){let e=n.toLowerCase();return e==="svg"?l1:e==="math"?d1:null}var dc=class extends Md{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Nb(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Nb(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=HO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof Yt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new nm(e,o):e,c=a.get(Co,null);if(c===null)throw new B(407,!1);let l=a.get(ML,null),h=a.get(wo,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",w=r?FF(g,r,this.componentDef.encapsulation,a):cS(g,y,xL(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;w!==null&&(R=sy(w,a,!0));let k=dy(0,null,null,1,0,null,null,null,null,null,null),U=Wd(null,k,null,N,null,null,f,g,a,null,R);Wm(U);let $,X,xe=null;try{let ee=this.componentDef,D,_=null;ee.findHostDirectiveDefs?(D=[],_=new Map,ee.findHostDirectiveDefs(ee,D,_),D.push(ee)):D=[ee];let v=PL(U,w);xe=kL(v,w,ee,D,U,f,g),X=ET(k,Pn),w&&LL(g,ee,w,r),t!==void 0&&VL(X,this.ngContentSelectors,t),$=FL(xe,ee,D,_,U,[UL]),fy(k,U,null)}catch(ee){throw xe!==null&&lm(xe),lm(U),ee}finally{Km()}return new wm(this.componentType,$,Gd(X,U),U,X)}finally{we(s)}}},wm=class extends _m{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;hy(s[ue],s,i,e,t),this.previousInputValues.set(e,t);let o=ti(this._tNode.index,s);py(o,1)}}get injector(){return new Vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PL(n,e){let t=n[ue],r=Pn;return n[r]=e,Kd(t,r,2,"#host",null)}function kL(n,e,t,r,i,s,o){let a=i[ue];OL(r,n,e,o);let c=null;e!==null&&(c=sy(e,i[yo]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=Wd(i,DS(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&gm(a,n,r.length-1),Qd(i,f),i[n.index]=f}function OL(n,e,t,r){for(let i of n)e.mergedAttrs=cc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Im(e,e.mergedAttrs,!0),t!==null&&mS(r,t,e))}function FL(n,e,t,r,i,s){let o=xt(),a=i[ue],c=Xt(o,i);SS(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let f=o.directiveStart+h,g=Io(i,a,f,o);Gi(g,i)}AS(a,i,o),c&&Gi(c,i);let l=Io(i,a,o.directiveStart+o.componentOffset,o);if(n[gn]=i[gn]=l,s!==null)for(let h of s)h(l,e);return wS(a,o,i),l}function LL(n,e,t,r){if(r)Kg(n,t,["ng-version","18.2.11"]);else{let{attrs:i,classes:s}=qO(e.selectors[0]);i&&Kg(n,t,i),s&&s.length>0&&gS(n,t,s.join(" "))}}function VL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function UL(){let n=xt();Jm(Ne()[ue],n)}var Ao=(()=>{class n{static{this.__NG_ELEMENT_ID__=jL}}return n})();function jL(){let n=xt();return $L(n,Ne())}var BL=Ao,jS=class extends BL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Gd(this._hostTNode,this._hostLView)}get injector(){return new Vi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xm(this._hostTNode,this._hostLView);if(jT(e)){let t=Dd(e,this._hostLView),r=Cd(e),i=t[ue].data[r+8];return new Vi(i,t)}else return new Vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Mb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Rb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Ab(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!o1(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new dc(ji(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let N=(o?l:this.parentInjector).get(Yt,null);N&&(s=N)}let h=ji(c.componentType??{}),f=Rb(this._lContainer,h?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,Ab(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(f1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[At],l=new jS(c,c[mn],c[At]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return lL(o,i,s,r),e.attachToViewContainerRef(),Jb(Ug(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Mb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fm(this._lContainer,t);r&&(gd(Ug(this._lContainer),t),dS(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=fm(this._lContainer,t);return r&&gd(Ug(this._lContainer),t)!=null?new zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Mb(n){return n[vd]}function Ug(n){return n[vd]||(n[vd]=[])}function $L(n,e){let t,r=e[n.index];return fr(r)?t=r:(t=RS(r,e,null,n),e[n.index]=t,Qd(e,t)),qL(t,e,n,r),new jS(t,n,e)}function HL(n,e){let t=n[nt],r=t.createComment(""),i=Xt(e,n),s=fS(t,i);return Rd(t,s,r,DF(t,i),!1),r}var qL=WL,GL=()=>!1;function zL(n,e,t){return GL(n,e,t)}function WL(n,e,t,r){if(n[Bi])return;let i;t.type&8?i=kn(r):i=HL(e,t),n[Bi]=i}var xb=new Set;function yc(n){xb.has(n)||(xb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function KL(n){return typeof n=="function"&&n[sr]!==void 0}function _c(n,e){yc("NgSignals");let t=ND(n),r=t[sr];return e?.equal&&(r.equal=e.equal),t.set=i=>hg(r,i),t.update=i=>MD(r,i),t.asReadonly=QL.bind(t),t}function QL(){let n=this[sr];if(n.readonlyFn===void 0){let e=()=>this();e[sr]=n,n.readonlyFn=e}return n.readonlyFn}function BS(n){return KL(n)&&typeof n.set=="function"}function YL(n){return Object.getPrototypeOf(n.prototype).constructor}function en(n){let e=YL(n.type),t=!0,r=[n];for(;e;){let i;if(Jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=sd(n.inputs),o.inputTransforms=sd(n.inputTransforms),o.declaredInputs=sd(n.declaredInputs),o.outputs=sd(n.outputs);let a=i.hostBindings;a&&tV(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&XL(n,c),l&&eV(n,l),ZL(n,i),lO(n.outputs,i.outputs),Jr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}JL(r)}function ZL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function JL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=cc(i.hostAttrs,t=cc(t,i.hostAttrs))}}function sd(n){return n===po?{}:n===Wt?[]:n}function XL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function tV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Xr=class{},hc=class{};var Em=class extends Xr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xd(this);let s=aT(e);this._bootstrapComponents=aS(s.bootstrap),this._r3Injector=QT(e,t,[{provide:Xr,useValue:this},{provide:Eo,useValue:this.componentFactoryResolver},...r],St(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cm=class extends hc{constructor(e){super(),this.moduleType=e}create(e){return new Em(this.moduleType,e,[])}};var Pd=class extends Xr{constructor(e){super(),this.componentFactoryResolver=new xd(this),this.instance=null;let t=new uc([...e.providers,{provide:Xr,useValue:this},{provide:Eo,useValue:this.componentFactoryResolver}],e.parent||qm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gy(n,e,t=null){return new Pd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function $S(n){return my(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function my(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function HS(n,e,t){return n[e]=t}function ei(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function rV(n,e,t,r){let i=ei(n,e,t);return ei(n,e+1,r)||i}function iV(n){return(n.flags&32)===32}function sV(n,e,t,r,i,s,o,a,c){let l=e.consts,h=Kd(e,n,4,o||null,a||null);TS(e,t,h,Ed(l,c)),Jm(e,h);let f=h.tView=dy(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function oV(n,e,t,r,i,s,o,a,c,l){let h=t+Pn,f=e.firstCreatePass?sV(h,e,n,r,i,s,o,a,c):e.data[h];mc(f,!1);let g=aV(e,n,f,t);Ym()&&uy(e,n,g,f),Gi(g,n);let y=RS(g,n,g,f);return n[h]=y,Qd(n,y),zL(y,f,n),Gm(f)&&ES(e,n,f),c!=null&&CS(n,f,l),f}function yn(n,e,t,r,i,s,o,a){let c=Ne(),l=Mt(),h=Ed(l.consts,s);return oV(c,l,n,e,t,r,i,h,o,a),yn}var aV=cV;function cV(n,e,t,r){return Zm(!0),e[nt].createComment("")}var sc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(sc||{}),uV=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Pb=class n{constructor(){this.ngZone=L(De),this.scheduler=L(wo),this.errorHandler=L(ur,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[sc.EarlyRead,sc.Write,sc.MixedReadWrite,sc.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}};function Jd(n,e,t,r){let i=Ne(),s=qd();if(ei(i,s,e)){let o=Mt(),a=Qm();XF(a,i,n,e,t,r)}return Jd}function lV(n,e,t,r){return ei(n,qd(),t)?e+Vm(t)+r:Zi}function od(n,e){return n<<17|e<<2}function Wi(n){return n>>17&32767}function dV(n){return(n&2)==2}function hV(n,e){return n&131071|e<<17}function Dm(n){return n|2}function Do(n){return(n&131068)>>2}function jg(n,e){return n&-131069|e<<2}function fV(n){return(n&1)===1}function bm(n){return n|1}function pV(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Wi(o),c=Do(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||gc(f,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let g=Wi(n[a+1]);n[r+1]=od(g,a),g!==0&&(n[g+1]=jg(n[g+1],r)),n[a+1]=hV(n[a+1],r)}else n[r+1]=od(a,0),a!==0&&(n[a+1]=jg(n[a+1],r)),a=r;else n[r+1]=od(c,0),a===0?a=r:n[c+1]=jg(n[c+1],r),c=r;l&&(n[r+1]=Dm(n[r+1])),kb(n,h,r,!0),kb(n,h,r,!1),gV(e,h,n,r,s),o=od(a,c),s?e.classBindings=o:e.styleBindings=o}function gV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&gc(s,e)>=0&&(t[r+1]=bm(t[r+1]))}function kb(n,e,t,r){let i=n[t+1],s=e===null,o=r?Wi(i):Do(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];mV(c,e)&&(a=!0,n[o+1]=r?bm(l):Dm(l)),o=r?Wi(l):Do(l)}a&&(n[t+1]=r?Dm(i):bm(i))}function mV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gc(n,e)>=0:!1}function Ut(n,e,t){let r=Ne(),i=qd();if(ei(r,i,e)){let s=Mt(),o=Qm();bS(s,o,r,n,e,r[nt],t,!1)}return Ut}function Ob(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";hy(n,t,s[o],o,r)}function si(n,e,t){return qS(n,e,t,!1),si}function Xd(n,e){return qS(n,e,null,!0),Xd}function qS(n,e,t,r){let i=Ne(),s=Mt(),o=b1(2);if(s.firstUpdatePass&&_V(s,n,o,r),e!==Zi&&ei(i,o,e)){let a=s.data[To()];CV(s,a,i,i[nt],n,i[o+1]=DV(e,t),r,o)}}function yV(n,e){return e>=n.expandoStartIndex}function _V(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[To()],o=yV(n,t);bV(s,r)&&e===null&&!o&&(e=!1),e=vV(i,s,e,r),pV(i,s,e,t,o,r)}}function vV(n,e,t,r){let i=R1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bg(null,n,e,t,r),t=fc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Bg(i,n,e,t,r),s===null){let c=IV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Bg(null,n,e,c[1],r),c=fc(c,e.attrs,r),wV(n,e,r,c))}else s=EV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function IV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Do(r)!==0)return n[Wi(r)]}function wV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wi(i)]=r}function EV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=fc(r,o,t)}return fc(r,e.attrs,t)}function Bg(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=fc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function fc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),NO(n,o,t?!0:e[++s]))}return n===void 0?null:n}function CV(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=fV(l)?Fb(c,e,t,i,Do(l),o):void 0;if(!kd(h)){kd(s)||dV(l)&&(s=Fb(c,null,t,i,a,o));let f=wT(To(),t);MF(r,o,f,i,s)}}function Fb(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,f=h===null,g=t[i+1];g===Zi&&(g=f?Wt:void 0);let y=f?Mg(g,r):h===r?g:void 0;if(l&&!kd(y)&&(y=Mg(c,r)),kd(y)&&(a=y,o))return a;let w=n[i+1];i=o?Wi(w):Do(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Mg(c,r))}return a}function kd(n){return n!==void 0}function DV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=St(oy(n)))),n}function bV(n,e){return(n.flags&(e?8:16))!==0}function TV(n,e,t,r,i,s){let o=e.consts,a=Ed(o,i),c=Kd(e,n,2,r,a);return TS(e,t,c,Ed(o,s)),c.attrs!==null&&Im(c,c.attrs,!1),c.mergedAttrs!==null&&Im(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function H(n,e,t,r){let i=Ne(),s=Mt(),o=Pn+n,a=i[nt],c=s.firstCreatePass?TV(o,s,i,e,t,r):s.data[o],l=SV(s,i,c,a,e,n);i[o]=l;let h=Gm(c);return mc(c,!0),mS(a,l,c),!iV(c)&&Ym()&&uy(s,i,l,c),m1()===0&&Gi(l,i),y1(),h&&(ES(s,i,c),wS(s,c,i)),r!==null&&CS(i,c),H}function K(){let n=xt();RT()?C1():(n=n.parent,mc(n,!1));let e=n;I1(e)&&w1(),_1();let t=Mt();return t.firstCreatePass&&(Jm(t,n),mT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&F1(e)&&Ob(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&L1(e)&&Ob(t,e,Ne(),e.stylesWithoutHost,!1),K}function Ji(n,e,t,r){return H(n,e,t,r),K(),Ji}var SV=(n,e,t,r,i,s)=>(Zm(!0),cS(r,i,x1()));function oi(){return Ne()}var Li=void 0;function AV(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var RV=["en",[["a","p"],["AM","PM"],Li],[["AM","PM"],Li,Li],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Li,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Li,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Li,"{1} 'at' {0}",Li],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",AV],$g={};function yy(n){let e=NV(n),t=Lb(e);if(t)return t;let r=e.split("-")[0];if(t=Lb(r),t)return t;if(r==="en")return RV;throw new B(701,!1)}function Lb(n){return n in $g||($g[n]=rc.ng&&rc.ng.common&&rc.ng.common.locales&&rc.ng.common.locales[n]),$g[n]}var Ro=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ro||{});function NV(n){return n.toLowerCase().replace(/_/g,"-")}var Od="en-US";var MV=Od;function xV(n){typeof n=="string"&&(MV=n.toLowerCase().replace(/_/g,"-"))}var PV=(n,e,t)=>{};function Fe(n,e,t,r){let i=Ne(),s=Mt(),o=xt();return GS(s,i,i[nt],o,n,e,r),Fe}function kV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[_d],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function GS(n,e,t,r,i,s,o){let a=Gm(r),l=n.firstCreatePass&&iL(n),h=e[gn],f=rL(e),g=!0;if(r.type&3||o){let N=Xt(r,e),R=o?o(N):N,k=f.length,U=o?X=>o(kn(X[r.index])):r.index,$=null;if(!o&&a&&($=kV(n,e,i,r.index)),$!==null){let X=$.__ngLastListenerFn__||$;X.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,g=!1}else{s=Ub(r,e,h,s),PV(N,i,s);let X=t.listen(R,i,s);f.push(s,X),l&&l.push(i,U,k,k+1)}}else s=Ub(r,e,h,s);let y=r.outputs,w;if(g&&y!==null&&(w=y[i])){let N=w.length;if(N)for(let R=0;R<N;R+=2){let k=w[R],U=w[R+1],xe=e[k][U].subscribe(s),ee=f.length;f.push(s,xe),l&&l.push(i,r.index,ee,-(ee+1))}}}function Vb(n,e,t,r){let i=we(null);try{return Rn(6,e,t),t(r)!==!1}catch(s){return MS(n,s),!1}finally{Rn(7,e,t),we(i)}}function Ub(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?ti(n.index,e):e;py(o,5);let a=Vb(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Vb(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function mr(n=1){return M1(n)}function OV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ge(n,e=""){let t=Ne(),r=Mt(),i=n+Pn,s=r.firstCreatePass?Kd(r,i,1,e,null):r.data[i],o=FV(r,t,s,e,n);t[i]=o,Ym()&&uy(r,t,o,s),mc(s,!1)}var FV=(n,e,t,r,i)=>(Zm(!0),pF(e[nt],r));function ai(n){return Xi("",n,""),ai}function Xi(n,e,t){let r=Ne(),i=lV(r,n,e,t);return i!==Zi&&sL(r,To(),i),Xi}function _n(n,e,t){BS(e)&&(e=e());let r=Ne(),i=qd();if(ei(r,i,e)){let s=Mt(),o=Qm();bS(s,o,r,n,e,r[nt],t,!1)}return _n}function Vn(n,e){let t=BS(n);return t&&n.set(e),t}function vn(n,e){let t=Ne(),r=Mt(),i=xt();return GS(r,t,t[nt],i,n,e),vn}function LV(n,e,t){let r=Mt();if(r.firstCreatePass){let i=Jr(n);Tm(t,r.data,r.blueprint,i,!0),Tm(e,r.data,r.blueprint,i,!1)}}function Tm(n,e,t,r,i){if(n=Tt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Tm(n[s],e,t,r,i);else{let s=Mt(),o=Ne(),a=xt(),c=mo(n)?n:Tt(n.provide),l=fT(n),h=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(mo(n)||!n.multi){let y=new qi(l,i,G),w=qg(c,e,i?h:h+g,f);w===-1?(im(Td(a,o),s,c),Hg(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[w]=y,o[w]=y)}else{let y=qg(c,e,h+g,f),w=qg(c,e,h,h+g),N=y>=0&&t[y],R=w>=0&&t[w];if(i&&!R||!i&&!N){im(Td(a,o),s,c);let k=jV(i?UV:VV,t.length,i,r,l);!i&&R&&(t[w].providerFactory=k),Hg(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=zS(t[i?w:y],l,!i&&r);Hg(s,n,y>-1?y:w,k)}!i&&r&&R&&t[w].componentProviders++}}}function Hg(n,e,t,r){let i=mo(e),s=JO(e);if(i||s){let c=(s?Tt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function zS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function VV(n,e,t,r){return Sm(this.multi,[])}function UV(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Io(t,t[ue],this.providerFactory.index,r);s=a.slice(0,o),Sm(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Sm(i,s);return s}function Sm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function jV(n,e,t,r,i){let s=new qi(n,t,G);return s.multi=[],s.index=e,s.componentProviders=0,zS(s,i,r&&!t),s}function ci(n,e=[]){return t=>{t.providersResolver=(r,i)=>LV(r,i?i(n):n,e)}}var BV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=lT(!1,t.type),i=r.length>0?gy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(se(Yt))})}}return n})();function tn(n){yc("NgStandalone"),n.getStandaloneInjector=e=>e.get(BV).getOrCreateStandaloneInjector(n)}function WS(n,e,t,r){return $V(Ne(),MT(),n,e,t,r)}function KS(n,e){let t=n[e];return t===Zi?void 0:t}function $V(n,e,t,r,i,s){let o=e+t;return ei(n,o,i)?HS(n,o+1,s?r.call(s,i):r(i)):KS(n,o+1)}function HV(n,e,t,r,i,s,o){let a=e+t;return rV(n,a,i,s)?HS(n,a+2,o?r.call(o,i,s):r(i,s)):KS(n,a+2)}function _y(n,e){let t=Mt(),r,i=n+Pn;t.firstCreatePass?(r=qV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ui(r.type,!0)),o,a=Nt(G);try{let c=bd(!1),l=s();return bd(c),OV(t,Ne(),i,l),l}finally{Nt(a)}}function qV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function vy(n,e,t,r){let i=n+Pn,s=Ne(),o=h1(s,i);return GV(s,i)?HV(s,MT(),e,o.transform,t,r,o):o.transform(t,r)}function GV(n,e){return n[ue].data[e].pure}var lr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},QS=new lr("18.2.11");var eh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var YS=new q("");function es(n){return!!n&&typeof n.then=="function"}function ZS(n){return!!n&&typeof n.subscribe=="function"}var JS=new q(""),XS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=L(JS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(es(s))t.push(s);else if(ZS(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iy=new q("");function zV(){RD(()=>{throw new B(600,!1)})}function WV(n){return n.isBoundToModule}var KV=10;function QV(n,e,t){try{let r=t();return es(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ts=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(nF),this.afterRenderManager=L(uV),this.zonelessEnabled=L(Zd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ct,this.afterTick=new ct,this.componentTypes=[],this.components=[],this.isStable=L(So).hasPendingTasks.pipe(ie(t=>!t)),this._injector=L(Yt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Md;if(!this._injector.get(XS).done){let g=!i&&oT(t),y=!1;throw new B(405,y)}let o;i?o=t:o=this._injector.get(Eo).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=WV(o)?void 0:this._injector.get(Xr),c=r||o.selector,l=o.create(yt.NULL,[],c,a),h=l.location.nativeElement,f=l.injector.get(YS,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),dd(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new B(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Co,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<KV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)YV(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$d(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;dd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Iy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>dd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function YV(n,e,t,r){if(!t&&!$d(n))return;kS(n,e,t&&!r?0:1)}var Am=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},wy=(()=>{class n{compileModuleSync(t){return new Cm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=aT(t),s=aS(i.declarations).reduce((o,a)=>{let c=ji(a);return c&&o.push(new dc(c)),o},[]);return new Am(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ZV=(()=>{class n{constructor(){this.zone=L(De),this.changeDetectionScheduler=L(wo),this.applicationRef=L(ts)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JV=new q("",{factory:()=>!1});function e0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(de(O({},n0()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:go,multi:!0,useFactory:()=>{let r=L(ZV,{optional:!0});return()=>r.initialize()}},{provide:go,multi:!0,useFactory:()=>{let r=L(XV);return()=>{r.initialize()}}},e===!0?{provide:VS,useValue:!0}:[],{provide:US,useValue:t??YT}]}function t0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=e0({ngZoneFactory:()=>{let i=n0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&yc("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Jt([{provide:JV,useValue:!0},{provide:Zd,useValue:!1},r])}function n0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var XV=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=L(De),this.pendingTasks=L(So)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eU=(()=>{class n{constructor(){this.appRef=L(ts),this.taskService=L(So),this.ngZone=L(De),this.zonelessEnabled=L(Zd),this.disableScheduling=L(VS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ad):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(US,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof um||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ib:JT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ad+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ib(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tU(){return typeof $localize<"u"&&$localize.locale||Od}var th=new q("",{providedIn:"root",factory:()=>L(th,ae.Optional|ae.SkipSelf)||tU()});var Rm=new q("");function ad(n){return!n.moduleRef}function nU(n){let e=ad(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{ad(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ur,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),ad(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Rm);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Rm);o.add(s),n.moduleRef.onDestroy(()=>{dd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return QV(r,t,()=>{let s=e.get(XS);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(th,Od);if(xV(o||Od),ad(n)){let a=e.get(ts);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return rU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function rU(n,e){let t=n.injector.get(ts);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new B(-403,!1);e.push(n)}var hd=null;function iU(n=[],e){return yt.create({name:e,providers:[{provide:Ud,useValue:"platform"},{provide:Rm,useValue:new Set([()=>hd=null])},...n]})}function sU(n=[]){if(hd)return hd;let e=iU(n);return hd=e,zV(),oU(e),e}function oU(n){n.get(ry,null)?.forEach(t=>t())}var ns=(()=>{class n{static{this.__NG_ELEMENT_ID__=aU}}return n})();function aU(n){return cU(xt(),Ne(),(n&16)===16)}function cU(n,e,t){if(Bd(n)&&!t){let r=ti(n.index,e);return new zi(r,r)}else if(n.type&175){let r=e[xn];return new zi(r,e)}return null}var Nm=class{constructor(){}supports(e){return $S(e)}create(e){return new Mm(e)}},uU=(n,e)=>e,Mm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<jb(r,i,s)?t:r,a=jb(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,w=y+g;h<=w&&w<l&&(s[g]=y+1)}let f=o.previousIndex;s[f]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$S(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,nV(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new xm(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},xm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Pm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Fd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Pm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var km=class{constructor(){}supports(e){return e instanceof Map||my(e)}create(){return new Om}},Om=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||my(e)))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Fm(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Fm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Bb(){return new Ey([new Nm])}var Ey=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:Bb})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Bb()),deps:[[n,new jm,new ze]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();function $b(){return new Cy([new km])}var Cy=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:$b})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$b()),deps:[[n,new jm,new ze]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new B(901,!1)}}return n})();function r0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=sU(r),s=[e0({}),{provide:wo,useExisting:eU},...t||[]],o=new Pd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return nU({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function vc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ic(n,e){yc("NgSignals");let t=TD(n);return e?.equal&&(t[sr].equal=e.equal),t}function yr(n){let e=we(null);try{return n()}finally{we(e)}}var u0=null;function vr(){return u0}function l0(n){u0??=n}var nh=class{};var rn=new q(""),d0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(hU),providedIn:"platform"})}}return n})();var hU=(()=>{class n extends d0{constructor(){super(),this._doc=L(rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vr().getBaseHref(this._doc)}onPopState(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function h0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function i0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function rs(n){return n&&n[0]!=="?"?"?"+n:n}var sh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(f0),providedIn:"root"})}}return n})(),fU=new q(""),f0=(()=>{class n extends sh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return h0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+rs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+rs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(se(d0),se(fU,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Cc=(()=>{class n{constructor(t){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mU(i0(s0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rs(r))}normalize(t){return n.stripTrailingSlash(gU(this._basePath,s0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=rs}static{this.joinWithSlash=h0}static{this.stripTrailingSlash=i0}static{this.\u0275fac=function(r){return new(r||n)(se(sh))}}static{this.\u0275prov=z({token:n,factory:()=>pU(),providedIn:"root"})}}return n})();function pU(){return new Cc(se(sh))}function gU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function s0(n){return n.replace(/\/index.html$/,"")}function mU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var p0=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(p0||{});var _r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function wc(n,e){let t=yy(n),r=t[Ro.NumberSymbols][e];if(typeof r>"u"){if(e===_r.CurrencyDecimal)return t[Ro.NumberSymbols][_r.Decimal];if(e===_r.CurrencyGroup)return t[Ro.NumberSymbols][_r.Group]}return r}function yU(n,e){return yy(n)[Ro.NumberFormats][e]}var _U=/^(\d+)?\.((\d+)(-(\d+))?)?$/,o0=22,rh=".",Ec="0",vU=";",IU=",",Dy="#";function wU(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=wc(t,_r.Infinity);else{let l=bU(n);o&&(l=DU(l));let h=e.minInt,f=e.minFrac,g=e.maxFrac;if(s){let U=s.match(_U);if(U===null)throw new Error(`${s} is not a valid digit info`);let $=U[1],X=U[3],xe=U[5];$!=null&&(h=by($)),X!=null&&(f=by(X)),xe!=null?g=by(xe):X!=null&&f>g&&(g=f)}TU(l,f,g);let y=l.digits,w=l.integerLen,N=l.exponent,R=[];for(c=y.every(U=>!U);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?R=y.splice(w,y.length):(R=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(wc(t,r)),R.length&&(a+=wc(t,i)+R.join("")),N&&(a+=wc(t,_r.Exponential)+"+"+N)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function EU(n,e,t){let r=yU(e,p0.Decimal),i=CU(r,wc(e,_r.MinusSign));return wU(n,i,e,_r.Group,_r.Decimal,t)}function CU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(vU),i=r[0],s=r[1],o=i.indexOf(rh)!==-1?i.split(rh):[i.substring(0,i.lastIndexOf(Ec)+1),i.substring(i.lastIndexOf(Ec)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(Dy));for(let h=0;h<c.length;h++){let f=c.charAt(h);f===Ec?t.minFrac=t.maxFrac=h+1:f===Dy?t.maxFrac=h+1:t.posSuf+=f}let l=a.split(IU);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let h=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(Dy);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function DU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function bU(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(rh))>-1&&(e=e.replace(rh,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Ec;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ec;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>o0&&(r=r.splice(0,o0-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function TU(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,h=r.reduceRight(function(f,g,y,w){return g=g+f,w[y]=g<10?g:g-10,c&&(w[y]===0&&y>=l?w.pop():c=!1),g>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function by(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function g0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ty=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ui=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ty(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),a0(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);a0(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(G(Ao),G(Yd),G(Ey))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function a0(n,e){n.context.$implicit=e.item}var oh=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Sy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){c0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){c0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(G(Ao),G(Yd))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Sy=class{constructor(){this.$implicit=null,this.ngIf=null}};function c0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${St(e)}'.`)}var m0=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:On.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(G(Ln),G(Cy),G(gr))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function SU(n,e){return new B(2100,!1)}var y0=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!AU(t))return null;i||=this._locale;try{let s=RU(t);return EU(s,i,r)}catch(s){throw SU(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(G(th,16))}}static{this.\u0275pipe=rT({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function AU(n){return!(n==null||n===""||n!==n)}function RU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var In=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qi({type:n})}static{this.\u0275inj=Ki({})}}return n})(),_0="browser",NU="server";function Ay(n){return n===NU}var ih=class{};var My=class extends nh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xy=class n extends My{static makeCurrent(){l0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=MU();return t==null?null:xU(t)}resetBaseElement(){Dc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return g0(document.cookie,e)}},Dc=null;function MU(){return Dc=Dc||document.querySelector("base"),Dc?Dc.getAttribute("href"):null}function xU(n){return new URL(n,document.baseURI).pathname}var PU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Py=new q(""),E0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(Py),se(De))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ch=class{constructor(e){this._doc=e}},Ry="ng-app-id",C0=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ay(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ry}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Ry),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ry,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(rn),se(ny),se(iy,8),se(ii))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ny={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Oy=/%COMP%/g,D0="%COMP%",kU=`_nghost-${D0}`,OU=`_ngcontent-${D0}`,FU=!0,LU=new q("",{providedIn:"root",factory:()=>FU});function VU(n){return OU.replace(Oy,n)}function UU(n){return kU.replace(Oy,n)}function b0(n,e){return e.map(t=>t.replace(Oy,n))}var v0=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ay(a),this.defaultRenderer=new bc(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mn.ShadowDom&&(r=de(O({},r),{encapsulation:Mn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof uh?i.applyToHost(t):i instanceof Tc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Mn.Emulated:s=new uh(c,l,r,this.appId,h,o,a,f);break;case Mn.ShadowDom:return new ky(c,l,t,r,o,a,this.nonce,f);default:s=new Tc(c,l,r,h,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se(E0),se(C0),se(ny),se(LU),se(rn),se(ii),se(De),se(iy))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),bc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ny[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(I0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(I0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Ny[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ny[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(t,r,i&On.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&On.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function I0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ky=class extends bc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=b0(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tc=class extends bc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?b0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},uh=class extends Tc{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=VU(l),this.hostAttr=UU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},jU=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(rn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),w0=["alt","control","meta","shift"],BU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$U={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},HU=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),w0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=BU[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),w0.forEach(o=>{if(o!==i){let a=$U[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(rn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function T0(n,e){return r0(O({rootComponent:n},qU(e)))}function qU(n){return{appProviders:[...QU,...n?.providers??[]],platformProviders:KU}}function GU(){xy.makeCurrent()}function zU(){return new ur}function WU(){return sS(document),document}var KU=[{provide:ii,useValue:_0},{provide:ry,useValue:GU,multi:!0},{provide:rn,useFactory:WU,deps:[]}];var QU=[{provide:Ud,useValue:"root"},{provide:ur,useFactory:zU,deps:[]},{provide:Py,useClass:jU,multi:!0,deps:[rn,De,ii]},{provide:Py,useClass:HU,multi:!0,deps:[rn]},v0,C0,E0,{provide:Co,useExisting:v0},{provide:ih,useClass:PU,deps:[]},[]];var S0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(se(rn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Hc=Symbol("RouteTitle"),jy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oo(n){return new jy(n)}function ZU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function JU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}function Un(n,e){let t=n?By(n):void 0,r=e?By(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!O0(n[i],e[i]))return!1;return!0}function By(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function O0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function F0(n){return n.length>0?n[n.length-1]:null}function li(n){return bg(n)?n:es(n)?He(Promise.resolve(n)):ne(n)}var XU={exact:V0,subset:U0},L0={exact:ej,subset:tj,ignored:()=>!0};function A0(n,e,t){return XU[t.paths](n.root,e.root,t.matrixParams)&&L0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function ej(n,e){return Un(n,e)}function V0(n,e,t){if(!ss(n.segments,e.segments)||!hh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!V0(n.children[r],e.children[r],t))return!1;return!0}function tj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>O0(n[t],e[t]))}function U0(n,e,t){return j0(n,e,e.segments,t)}function j0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ss(i,t)||e.hasChildren()||!hh(i,t,r))}else if(n.segments.length===t.length){if(!ss(n.segments,t)||!hh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!U0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ss(n.segments,i)||!hh(n.segments,i,r)||!n.children[oe]?!1:j0(n.children[oe],e,s,r)}}function hh(n,e,t){return e.every((r,i)=>L0[t](n[i].parameters,r.parameters))}var wr=class{constructor(e=new be([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oo(this.queryParams),this._queryParamMap}toString(){return ij.serialize(this)}},be=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fh(this)}},is=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oo(this.parameters),this._parameterMap}toString(){return $0(this)}};function nj(n,e){return ss(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}function ss(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function rj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var f_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new Pc,providedIn:"root"})}}return n})(),Pc=class{parse(e){let t=new Hy(e);return new wr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Sc(e.root,!0)}`,r=aj(e.queryParams),i=typeof e.fragment=="string"?`#${sj(e.fragment)}`:"";return`${t}${r}${i}`}},ij=new Pc;function fh(n){return n.segments.map(e=>$0(e)).join("/")}function Sc(n,e){if(!n.hasChildren())return fh(n);if(e){let t=n.children[oe]?Sc(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${Sc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=rj(n,(r,i)=>i===oe?[Sc(n.children[oe],!1)]:[`${i}:${Sc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${fh(n)}/${t[0]}`:`${fh(n)}/(${t.join("//")})`}}function B0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lh(n){return B0(n).replace(/%3B/gi,";")}function sj(n){return encodeURI(n)}function $y(n){return B0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ph(n){return decodeURIComponent(n)}function R0(n){return ph(n.replace(/\+/g,"%20"))}function $0(n){return`${$y(n.path)}${oj(n.parameters)}`}function oj(n){return Object.entries(n).map(([e,t])=>`;${$y(e)}=${$y(t)}`).join("")}function aj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${lh(t)}=${lh(i)}`).join("&"):`${lh(t)}=${lh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var cj=/^[^\/()?;#]+/;function Fy(n){let e=n.match(cj);return e?e[0]:""}var uj=/^[^\/()?;=#]+/;function lj(n){let e=n.match(uj);return e?e[0]:""}var dj=/^[^=?&#]+/;function hj(n){let e=n.match(dj);return e?e[0]:""}var fj=/^[^&#]+/;function pj(n){let e=n.match(fj);return e?e[0]:""}var Hy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new be(e,t)),r}parseSegment(){let e=Fy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new is(ph(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=lj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Fy(this.remaining);i&&(r=i,this.capture(r))}e[ph(t)]=ph(r)}parseQueryParam(e){let t=hj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=pj(this.remaining);o&&(r=o,this.capture(r))}let i=R0(t),s=R0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Fy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[oe]:new be([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function H0(n){return n.segments.length>0?new be([],{[oe]:n}):n}function q0(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=q0(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new be(n.segments,e);return gj(t)}function gj(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new be(n.segments.concat(e.segments),e.children)}return n}function kc(n){return n instanceof wr}function mj(n,e,t=null,r=null){let i=G0(n);return z0(i,e,t,r)}function G0(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new be(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=H0(r);return e??i}function z0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ly(i,i,i,t,r);let s=yj(e);if(s.toRoot())return Ly(i,i,new be([],{}),t,r);let o=_j(s,i,n),a=o.processChildren?Nc(o.segmentGroup,o.index,s.commands):K0(o.segmentGroup,o.index,s.commands);return Ly(i,o.segmentGroup,a,t,r)}function gh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Oc(n){return typeof n=="object"&&n!=null&&n.outlets}function Ly(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=W0(n,e,t);let a=H0(q0(o));return new wr(a,s,i)}function W0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=W0(s,e,t)}),new be(n.segments,r)}var mh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gh(r[0]))throw new B(4003,!1);let i=r.find(Oc);if(i&&i!==F0(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mh(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new mh(t,e,r)}var xo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _j(n,e,t){if(n.isAbsolute)return new xo(e,!0,0);if(!t)return new xo(e,!1,NaN);if(t.parent===null)return new xo(t,!0,0);let r=gh(n.commands[0])?0:1,i=t.segments.length-1+r;return vj(t,i,n.numberOfDoubleDots)}function vj(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new xo(r,!1,i-s)}function Ij(n){return Oc(n[0])?n[0].outlets:{[oe]:n}}function K0(n,e,t){if(n??=new be([],{}),n.segments.length===0&&n.hasChildren())return Nc(n,e,t);let r=wj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new be(n.segments.slice(0,r.pathIndex),{});return s.children[oe]=new be(n.segments.slice(r.pathIndex),n.children),Nc(s,0,i)}else return r.match&&i.length===0?new be(n.segments,{}):r.match&&!n.hasChildren()?qy(n,e,t):r.match?Nc(n,0,i):qy(n,e,t)}function Nc(n,e,t){if(t.length===0)return new be(n.segments,{});{let r=Ij(t),i={};if(Object.keys(r).some(s=>s!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let s=Nc(n.children[oe],e,t);return new be(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=K0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new be(n.segments,i)}}function wj(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Oc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!M0(c,l,o))return s;r+=2}else{if(!M0(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function qy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Oc(s)){let c=Ej(s.outlets);return new be(r,c)}if(i===0&&gh(t[0])){let c=n.segments[e];r.push(new is(c.path,N0(t[0]))),i++;continue}let o=Oc(s)?s.outlets[oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&gh(a)?(r.push(new is(o,N0(a))),i+=2):(r.push(new is(o,{})),i++)}return new be(r,{})}function Ej(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=qy(new be([],{}),0,r))}),e}function N0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function M0(n,e,t){return n==t.path&&Un(e,t.parameters)}var Mc="imperative",lt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(lt||{}),sn=class{constructor(e,t){this.id=e,this.url=t}},Fc=class extends sn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},os=class extends sn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bt||{}),Gy=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gy||{}),Ir=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},as=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationSkipped}},Lc=class extends sn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yh=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends sn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ky=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zy=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e_=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t_=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vc=class{},Fo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Cj(n,e){return n.providers&&!n._injector&&(n._injector=gy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wn(n){return n.outlet||oe}function Dj(n,e){let t=n.filter(r=>wn(r)===e);return t.push(...n.filter(r=>wn(r)!==e)),t}function qc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var n_=class{get injector(){return qc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Dh(this.rootInjector),this.attachRef=null}},Dh=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new n_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(se(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_h=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=r_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=r_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=i_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return i_(e,this._root).map(t=>t.value)}};function r_(n,e){if(n===e.value)return e;for(let t of e.children){let r=r_(n,t);if(r)return r}return null}function i_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=i_(n,t);if(r.length)return r.unshift(e),r}return[]}var jt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Mo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vh=class extends _h{constructor(e,t){super(e),this.snapshot=t,p_(this,e)}toString(){return this.snapshot.toString()}};function Q0(n){let e=bj(n),t=new ut([new is("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),a=new jn(t,r,s,o,i,oe,n,e.root);return a.snapshot=e.root,new vh(new jt(a,[]),e)}function bj(n){let e={},t={},r={},i="",s=new Po([],e,r,i,t,oe,n,null,{});return new wh("",new jt(s,[]))}var jn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(l=>l[Hc]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Oo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Oo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ih(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&Z0(i)&&(r.resolve[Hc]=i.title),r}var Po=class{get title(){return this.data?.[Hc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wh=class extends _h{constructor(e,t){super(t),this.url=e,p_(this,t)}toString(){return Y0(this._root)}};function p_(n,e){e.value._routerState=n,e.children.forEach(t=>p_(n,t))}function Y0(n){let e=n.children.length>0?` { ${n.children.map(Y0).join(", ")} } `:"";return`${n.value}${e}`}function Vy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Un(e.params,t.params)||n.paramsSubject.next(t.params),JU(e.url,t.url)||n.urlSubject.next(t.url),Un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function s_(n,e){let t=Un(n.params,e.params)&&nj(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||s_(n.parent,e.parent))}function Z0(n){return typeof n.title=="string"||n.title===null}var g_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=L(Dh),this.location=L(Ao),this.changeDetector=L(ns),this.inputBinder=L(m_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new o_(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yi]})}}return n})(),o_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jn?this.route:e===Dh?this.childContexts:this.parent.get(e,t)}},m_=new q("");function Tj(n,e,t){let r=Uc(n,e._root,t?t._root:void 0);return new vh(r,e)}function Uc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Sj(n,e,t);return new jt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Uc(n,a)),o}}let r=Aj(e.value),i=e.children.map(s=>Uc(n,s));return new jt(r,i)}}function Sj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uc(n,r,i);return Uc(n,r)})}function Aj(n){return new jn(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var jc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},J0="ngNavigationCancelingError";function Eh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=kc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=X0(!1,Bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function X0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[J0]=!0,t.cancellationCode=e,t}function Rj(n){return eA(n)&&kc(n.url)}function eA(n){return!!n&&n[J0]}var Nj=(n,e,t,r)=>ie(i=>(new a_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),a_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Mo(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Mo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new t_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Vy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ch=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ko=class{constructor(e,t){this.component=e,this.route=t}};function Mj(n,e,t){let r=n._root,i=e?e._root:null;return Ac(r,i,t,[r.value])}function xj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Gb(n)?n:e.get(n):r}function Ac(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Mo(e);return n.children.forEach(o=>{Pj(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>xc(a,t.getContext(o),i)),i}function Pj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=kj(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ch(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ac(n,e,a?a.children:null,r,i):Ac(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ko(a.outlet.component,o))}else o&&xc(e,a,i),i.canActivateChecks.push(new Ch(r)),s.component?Ac(n,null,a?a.children:null,r,i):Ac(n,null,t,r,i);return i}function kj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ss(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s_(n,e)||!Un(n.queryParams,e.queryParams);case"paramsChange":default:return!s_(n,e)}}function xc(n,e,t){let r=Mo(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?xc(o,e.children.getContext(s),t):xc(o,null,t):xc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ko(e.outlet.component,i)):t.canDeactivateChecks.push(new ko(null,i)):t.canDeactivateChecks.push(new ko(null,i))}function Gc(n){return typeof n=="function"}function Oj(n){return typeof n=="boolean"}function Fj(n){return n&&Gc(n.canLoad)}function Lj(n){return n&&Gc(n.canActivate)}function Vj(n){return n&&Gc(n.canActivateChild)}function Uj(n){return n&&Gc(n.canDeactivate)}function jj(n){return n&&Gc(n.canMatch)}function tA(n){return n instanceof or||n?.name==="EmptyError"}var dh=Symbol("INITIAL_VALUE");function Lo(){return hn(n=>Xl(n.map(e=>e.pipe(ar(1),rd(dh)))).pipe(ie(e=>{for(let t of e)if(t!==!0){if(t===dh)return dh;if(t===!1||Bj(t))return t}return!0}),zt(e=>e!==dh),ar(1)))}function Bj(n){return kc(n)||n instanceof jc}function $j(n,e){return et(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ne(de(O({},t),{guardsResult:!0})):Hj(o,r,i,n).pipe(et(a=>a&&Oj(a)?qj(r,s,n,e):ne(a)),ie(a=>de(O({},t),{guardsResult:a})))})}function Hj(n,e,t,r){return He(n).pipe(et(i=>Qj(i.component,i.route,t,e,r)),An(i=>i!==!0,!0))}function qj(n,e,t,r){return He(e).pipe(oo(i=>so(zj(i.route.parent,r),Gj(i.route,r),Kj(n,i.path,t),Wj(n,i.route,t))),An(i=>i!==!0,!0))}function Gj(n,e){return n!==null&&e&&e(new e_(n)),ne(!0)}function zj(n,e){return n!==null&&e&&e(new Jy(n)),ne(!0)}function Wj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(s=>ed(()=>{let o=qc(e)??t,a=Vo(s,o),c=Lj(a)?a.canActivate(e,n):dr(o,()=>a(e,n));return li(c).pipe(An())}));return ne(i).pipe(Lo())}function Kj(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>xj(o)).filter(o=>o!==null).map(o=>ed(()=>{let a=o.guards.map(c=>{let l=qc(o.node)??t,h=Vo(c,l),f=Vj(h)?h.canActivateChild(r,n):dr(l,()=>h(r,n));return li(f).pipe(An())});return ne(a).pipe(Lo())}));return ne(s).pipe(Lo())}function Qj(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ne(!0);let o=s.map(a=>{let c=qc(e)??i,l=Vo(a,c),h=Uj(l)?l.canDeactivate(n,e,t,r):dr(c,()=>l(n,e,t,r));return li(h).pipe(An())});return ne(o).pipe(Lo())}function Yj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let s=i.map(o=>{let a=Vo(o,n),c=Fj(a)?a.canLoad(e,t):dr(n,()=>a(e,t));return li(c)});return ne(s).pipe(Lo(),nA(r))}function nA(n){return kl(tt(e=>{if(typeof e!="boolean")throw Eh(n,e)}),ie(e=>e===!0))}function Zj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let s=i.map(o=>{let a=Vo(o,n),c=jj(a)?a.canMatch(e,t):dr(n,()=>a(e,t));return li(c)});return ne(s).pipe(Lo(),nA(r))}var Bc=class{constructor(e){this.segmentGroup=e||null}},$c=class extends Error{constructor(e){super(),this.urlTree=e}};function No(n){return io(new Bc(n))}function Jj(n){return io(new B(4e3,!1))}function Xj(n){return io(X0(!1,Bt.GuardRejected))}var c_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[oe])return Jj(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:f,outlet:g,params:y,data:w,title:N}=i,R=dr(s,()=>a({params:y,data:w,queryParams:c,fragment:l,routeConfig:h,url:f,outlet:g,title:N}));if(R instanceof wr)throw new $c(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new $c(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new wr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new be(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},u_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function e2(n,e,t,r,i){let s=rA(n,e,t);return s.matched?(r=Cj(e,r),Zj(r,e,t,i).pipe(ie(o=>o===!0?s:O({},u_)))):ne(s)}function rA(n,e,t){if(e.path==="**")return t2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},u_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ZU)(t,n,e);if(!i)return O({},u_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function t2(n){return{matched:!0,parameters:n.length>0?F0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function x0(n,e,t,r){return t.length>0&&i2(n,t,r)?{segmentGroup:new be(e,r2(r,new be(t,n.children))),slicedSegments:[]}:t.length===0&&s2(n,t,r)?{segmentGroup:new be(n.segments,n2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new be(n.segments,n.children),slicedSegments:t}}function n2(n,e,t,r){let i={};for(let s of t)if(bh(n,e,s)&&!r[wn(s)]){let o=new be([],{});i[wn(s)]=o}return O(O({},r),i)}function r2(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&wn(r)!==oe){let i=new be([],{});t[wn(r)]=i}return t}function i2(n,e,t){return t.some(r=>bh(n,e,r)&&wn(r)!==oe)}function s2(n,e,t){return t.some(r=>bh(n,e,r))}function bh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function o2(n,e,t){return e.length===0&&!n.children[t]}var l_=class{};function a2(n,e,t,r,i,s,o="emptyOnly"){return new d_(n,e,t,r,i,o,s).recognize()}var c2=31,d_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new c_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=x0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:t,rootSnapshot:r})=>{let i=new jt(r,t),s=new wh("",i),o=mj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Po([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(ie(r=>({children:r,rootSnapshot:t})),zr(r=>{if(r instanceof $c)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ie(o=>o instanceof jt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return He(s).pipe(oo(o=>{let a=r.children[o],c=Dj(t,o);return this.processSegmentGroup(e,c,a,o,i)}),nd((o,a)=>(o.push(...a),o)),Wr(null),Rg(),et(o=>{if(o===null)return No(r);let a=iA(o);return u2(a),ne(a)}))}processSegment(e,t,r,i,s,o,a){return He(t).pipe(oo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(zr(l=>{if(l instanceof Bc)return ne(null);throw l}))),An(c=>!!c),zr(c=>{if(tA(c))return o2(r,i,s)?ne(new l_):No(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return wn(r)!==o&&(o===oe||!bh(i,s,r))?No(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):No(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:g}=rA(t,i,s);if(!c)return No(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c2&&(this.allowRedirects=!1));let y=new Po(s,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,P0(i),wn(i),i.component??i._loadedComponent??null,i,k0(i)),w=Ih(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(et(R=>this.processSegment(e,r,t,R.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=e2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(hn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(hn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,w=new Po(g,f,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,P0(r),wn(r),r.component??r._loadedComponent??null,r,k0(r)),N=Ih(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=x0(t,g,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,w).pipe(ie($=>new jt(w,$)));if(l.length===0&&k.length===0)return ne(new jt(w,[]));let U=wn(r)===s;return this.processSegment(h,l,R,k,U?oe:s,!0,w).pipe(ie($=>new jt(w,$ instanceof jt?[$]:[])))}))):No(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):Yj(e,t,r,this.urlSerializer).pipe(et(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Xj(t))):ne({routes:[],injector:e})}};function u2(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function l2(n){let e=n.value.routeConfig;return e&&e.path===""}function iA(n){let e=[],t=new Set;for(let r of n){if(!l2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=iA(r.children);e.push(new jt(r.value,i))}return e.filter(r=>!t.has(r))}function P0(n){return n.data||{}}function k0(n){return n.resolve||{}}function d2(n,e,t,r,i,s){return et(o=>a2(n,e,t,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:c})=>de(O({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function h2(n,e){return et(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of sA(c))o.add(l);let a=0;return He(o).pipe(oo(c=>s.has(c)?f2(c,r,n,e):(c.data=Ih(c,c.parent,n).resolve,ne(void 0))),tt(()=>a++),ao(1),et(c=>a===o.size?ne(t):Vt))})}function sA(n){let e=n.children.map(t=>sA(t)).flat();return[n,...e]}function f2(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Z0(i)&&(s[Hc]=i.title),p2(s,n,e,r).pipe(ie(o=>(n._resolvedData=o,n.data=Ih(n,n.parent,t).resolve,null)))}function p2(n,e,t,r){let i=By(n);if(i.length===0)return ne({});let s={};return He(i).pipe(et(o=>g2(n[o],e,t,r).pipe(An(),tt(a=>{if(a instanceof jc)throw Eh(new Pc,a);s[o]=a}))),ao(1),Ag(s),zr(o=>tA(o)?Vt:io(o)))}function g2(n,e,t,r){let i=qc(e)??r,s=Vo(n,i),o=s.resolve?s.resolve(e,t):dr(i,()=>s(e,t));return li(o)}function Uy(n){return hn(e=>{let t=n(e);return t?He(t).pipe(ie(()=>e)):ne(e)})}var oA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Hc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(m2),providedIn:"root"})}}return n})(),m2=(()=>{class n extends oA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(se(S0))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),y_=new q("",{providedIn:"root",factory:()=>({})}),y2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Zt({type:n,selectors:[["ng-component"]],standalone:!0,features:[tn],decls:1,vars:0,template:function(r,i){r&1&&Ji(0,"router-outlet")},dependencies:[g_],encapsulation:2})}}return n})();function __(n){let e=n.children&&n.children.map(__),t=e?de(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=y2),t}var v_=new q(""),_2=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(wy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=li(t.loadComponent()).pipe(ie(aA),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),nc(()=>{this.componentLoaders.delete(t)})),i=new eo(r,()=>new ct).pipe(Xs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=v2(r,this.compiler,t,this.onLoadEndListener).pipe(nc(()=>{this.childrenLoaders.delete(r)})),o=new eo(s,()=>new ct).pipe(Xs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v2(n,e,t,r){return li(n.loadChildren()).pipe(ie(aA),et(i=>i instanceof hc||Array.isArray(i)?ne(i):He(e.compileModuleAsync(i))),ie(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(v_,[],{optional:!0,self:!0}).flat()),{routes:o.map(__),injector:s}}))}function I2(n){return n&&typeof n=="object"&&"default"in n}function aA(n){return I2(n)?n.default:n}var I_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(w2),providedIn:"root"})}}return n})(),w2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),E2=new q("");var C2=new q(""),D2=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ct,this.transitionAbortSubject=new ct,this.configLoader=L(_2),this.environmentInjector=L(Yt),this.urlSerializer=L(f_),this.rootContexts=L(Dh),this.location=L(Cc),this.inputBindingEnabled=L(m_,{optional:!0})!==null,this.titleStrategy=L(oA),this.options=L(y_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(I_),this.createViewTransition=L(E2,{optional:!0}),this.navigationErrorHandler=L(C2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Yy(i)),r=i=>this.events.next(new Zy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(O(O({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zt(s=>s.id!==0),ie(s=>de(O({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),hn(s=>{let o=!1,a=!1;return ne(s).pipe(hn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),Vt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?de(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new as(c.id,this.urlSerializer.serialize(c.rawUrl),f,Gy.IgnoredSameUrlNavigation)),c.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ne(c).pipe(hn(f=>{let g=this.transitions?.getValue();return this.events.next(new Fc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Vt:Promise.resolve(f)}),d2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=de(O({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new yh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:w,extras:N}=c,R=new Fc(f,this.urlSerializer.serialize(g),y,w);this.events.next(R);let k=Q0(this.rootComponentType).snapshot;return this.currentTransition=s=de(O({},c),{targetSnapshot:k,urlAfterRedirects:g,extras:de(O({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ne(s)}else{let f="";return this.events.next(new as(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Gy.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Vt}}),tt(c=>{let l=new zy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ie(c=>(this.currentTransition=s=de(O({},c),{guards:Mj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),$j(this.environmentInjector,c=>this.events.next(c)),tt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Eh(this.urlSerializer,c.guardsResult);let l=new Wy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),zt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Bt.GuardRejected),!1)),Uy(c=>{if(c.guards.canActivateChecks.length)return ne(c).pipe(tt(l=>{let h=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),hn(l=>{let h=!1;return ne(l).pipe(h2(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Bt.NoDataFromResolver)}}))}),tt(l=>{let h=new Qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Uy(c=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(tt(g=>{h.component=g}),ie(()=>{})));for(let g of h.children)f.push(...l(g));return f};return Xl(l(c.targetSnapshot.root)).pipe(Wr(null),ar(1))}),Uy(()=>this.afterPreactivation()),hn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?He(h).pipe(ie(()=>s)):ne(s)}),ie(c=>{let l=Tj(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=de(O({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),tt(()=>{this.events.next(new Vc)}),Nj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ar(1),tt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new os(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Ng(this.transitionAbortSubject.pipe(tt(c=>{throw c}))),nc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),zr(c=>{if(a=!0,eA(c))this.events.next(new Ir(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Rj(c)?this.events.next(new Fo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Lc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=dr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof jc){let{message:f,cancellationCode:g}=Eh(this.urlSerializer,h);this.events.next(new Ir(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Fo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Vt}))}))}cancelNavigationTransition(t,r,i){let s=new Ir(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b2(n){return n!==Mc}var T2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(S2),providedIn:"root"})}}return n})(),h_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},S2=(()=>{class n extends h_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>L(A2),providedIn:"root"})}}return n})(),A2=(()=>{class n extends cA{constructor(){super(...arguments),this.location=L(Cc),this.urlSerializer=L(f_),this.options=L(y_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(I_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new wr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Q0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Fc)this.stateMemento=this.createStateMemento();else if(t instanceof as)this.rawUrlTree=r.initialUrl;else if(t instanceof yh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Vc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ir&&(t.code===Bt.GuardRejected||t.code===Bt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Lc?this.restoreHistory(r,!0):t instanceof os&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof wr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=O(O({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Rc||{});function R2(n,e){n.events.pipe(zt(t=>t instanceof os||t instanceof Ir||t instanceof Lc||t instanceof as),ie(t=>t instanceof os||t instanceof as?Rc.COMPLETE:(t instanceof Ir?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?Rc.REDIRECTING:Rc.FAILED),zt(t=>t!==Rc.REDIRECTING),ar(1)).subscribe(()=>{e()})}function N2(n){throw n}var M2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},x2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(eh),this.stateManager=L(cA),this.options=L(y_,{optional:!0})||{},this.pendingTasks=L(So),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(D2),this.urlSerializer=L(f_),this.location=L(Cc),this.urlHandlingStrategy=L(I_),this._events=new ct,this.errorHandler=this.options.errorHandler||N2,this.navigated=!1,this.routeReuseStrategy=L(T2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(v_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(m_,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ir&&r.code!==Bt.Redirect&&r.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof os)this.navigated=!0;else if(r instanceof Fo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||b2(i.source)},o);this.scheduleNavigation(a,Mc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}k2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(__),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=G0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return z0(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=kc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Mc,null,r)}navigate(t,r={skipLocationChange:!1}){return P2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},M2):r===!1?i=O({},x2):i=r,kc(t))return A0(this.currentUrlTree,t,i);let s=this.parseUrl(t);return A0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let h=this.pendingTasks.add();return R2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}function k2(n){return!(n instanceof Vc)&&!(n instanceof Fo)}var O2=new q("");function uA(n,...e){return Jt([{provide:v_,multi:!0,useValue:n},[],{provide:jn,useFactory:F2,deps:[Bn]},{provide:Iy,multi:!0,useFactory:L2},e.map(t=>t.\u0275providers)])}function F2(n){return n.routerState.root}function L2(){let n=L(yt);return e=>{let t=n.get(ts);if(e!==t.components[0])return;let r=n.get(Bn),i=n.get(V2);n.get(U2)===1&&r.initialNavigation(),n.get(j2,null,ae.Optional)?.setUpPreloading(),n.get(O2,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var V2=new q("",{factory:()=>new ct}),U2=new q("",{providedIn:"root",factory:()=>1});var j2=new q("");var E_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var F=function(n,e){if(!n)throw us(e)},us=function(n){return new Error("Firebase Database ("+E_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var dA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},B2=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ah={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(g=64)),r.push(t[h],t[f],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):B2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new C_;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let w=l<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},C_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},b_=function(n){let e=dA(n);return Ah.encodeByteArray(e,!0)},zc=function(n){return b_(n).replace(/\./g,"")},Wc=function(n){try{return Ah.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hA(n){return fA(void 0,n)}function fA(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!$2(t)||(n[t]=fA(n[t],e[t]));return n}function $2(n){return n!=="__proto__"}function H2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var q2=()=>H2().__FIREBASE_DEFAULTS__,G2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},z2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wc(n[1]);return e&&JSON.parse(e)},Rh=()=>{try{return q2()||G2()||z2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},T_=n=>{var e,t;return(t=(e=Rh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Nh=n=>{let e=T_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},S_=()=>{var n;return(n=Rh())===null||n===void 0?void 0:n.config},A_=n=>{var e;return(e=Rh())===null||e===void 0?void 0:e[`_${n}`]};var cs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Mh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zc(JSON.stringify(t)),zc(JSON.stringify(o)),""].join(".")}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function W2(){var n;let e=(n=Rh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mA(){let n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $n(){return E_.NODE_CLIENT===!0||E_.NODE_ADMIN===!0}function yA(){return!W2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R_(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var K2="FirebaseError",$t=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=K2,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Q2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $t(i,a,r)}};function Q2(n,e){return n.replace(Y2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Y2=/\{\$([^}]+)}/g;function Uo(n){return JSON.parse(n)}function it(n){return JSON.stringify(n)}var vA=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Uo(Wc(s[0])||""),t=Uo(Wc(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var IA=function(n){let e=vA(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},wA=function(n){let e=vA(n).claims;return typeof e=="object"&&e.admin===!0};function Hn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ls(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Qc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yc(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function ds(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(lA(s)&&lA(o)){if(!ds(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function lA(n){return n!==null&&typeof n=="object"}function hs(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Sh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)r[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){let g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,h;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):f<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let g=(i<<5|i>>>27)+l+c+h+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function EA(n,e){let t=new D_(n,e);return t.subscribe.bind(t)}var D_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=w_),i.error===void 0&&(i.error=w_),i.complete===void 0&&(i.complete=w_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Z2(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function w_(){}function CA(n,e){return`${n} failed: ${e} argument `}var DA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,F(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Zc=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var LY=4*60*60*1e3;function We(n){return n&&n._delegate?n._delegate:n}var Pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fs="[DEFAULT]";var Ph=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new cs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X2(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function J2(n){return n===fs?void 0:n}function X2(n){return n.instantiationMode==="EAGER"}var Jc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ph(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var eB=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),tB={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},nB=ce.INFO,rB={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},iB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=rB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=nB,this._logHandler=iB,this._userLogHandler=null,eB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var sB=(n,e)=>e.some(t=>n instanceof t),bA,TA;function oB(){return bA||(bA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aB(){return TA||(TA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SA=new WeakMap,M_=new WeakMap,AA=new WeakMap,N_=new WeakMap,P_=new WeakMap;function cB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Gn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&SA.set(t,n)}).catch(()=>{}),P_.set(e,n),e}function uB(n){if(M_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});M_.set(n,e)}var x_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return M_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RA(n){x_=n(x_)}function lB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kh(this),e,...t);return AA.set(r,e.sort?e.sort():[e]),Gn(r)}:aB().includes(n)?function(...e){return n.apply(kh(this),e),Gn(SA.get(this))}:function(...e){return Gn(n.apply(kh(this),e))}}function dB(n){return typeof n=="function"?lB(n):(n instanceof IDBTransaction&&uB(n),sB(n,oB())?new Proxy(n,x_):n)}function Gn(n){if(n instanceof IDBRequest)return cB(n);if(N_.has(n))return N_.get(n);let e=dB(n);return e!==n&&(N_.set(n,e),P_.set(e,n)),e}var kh=n=>P_.get(n);function MA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Gn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gn(o.result),c.oldVersion,c.newVersion,Gn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var hB=["get","getKey","getAll","getAllKeys","count"],fB=["put","add","delete","clear"],k_=new Map;function NA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(k_.get(e))return k_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=fB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hB.includes(t)))return;let s=function(o,...a){return E(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return k_.set(e,s),s}RA(n=>de(O({},n),{get:(e,t,r)=>NA(e,t)||n.get(e,t,r),has:(e,t)=>!!NA(e,t)||n.has(e,t)}));var F_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function pB(n){let e=n.getComponent();return e?.type==="VERSION"}var L_="@firebase/app",xA="0.10.13";var Cr=new qn("@firebase/app"),gB="@firebase/app-compat",mB="@firebase/analytics-compat",yB="@firebase/analytics",_B="@firebase/app-check-compat",vB="@firebase/app-check",IB="@firebase/auth",wB="@firebase/auth-compat",EB="@firebase/database",CB="@firebase/data-connect",DB="@firebase/database-compat",bB="@firebase/functions",TB="@firebase/functions-compat",SB="@firebase/installations",AB="@firebase/installations-compat",RB="@firebase/messaging",NB="@firebase/messaging-compat",MB="@firebase/performance",xB="@firebase/performance-compat",PB="@firebase/remote-config",kB="@firebase/remote-config-compat",OB="@firebase/storage",FB="@firebase/storage-compat",LB="@firebase/firestore",VB="@firebase/vertexai-preview",UB="@firebase/firestore-compat",jB="firebase",BB="10.14.1";var V_="[DEFAULT]",$B={[L_]:"fire-core",[gB]:"fire-core-compat",[yB]:"fire-analytics",[mB]:"fire-analytics-compat",[vB]:"fire-app-check",[_B]:"fire-app-check-compat",[IB]:"fire-auth",[wB]:"fire-auth-compat",[EB]:"fire-rtdb",[CB]:"fire-data-connect",[DB]:"fire-rtdb-compat",[bB]:"fire-fn",[TB]:"fire-fn-compat",[SB]:"fire-iid",[AB]:"fire-iid-compat",[RB]:"fire-fcm",[NB]:"fire-fcm-compat",[MB]:"fire-perf",[xB]:"fire-perf-compat",[PB]:"fire-rc",[kB]:"fire-rc-compat",[OB]:"fire-gcs",[FB]:"fire-gcs-compat",[LB]:"fire-fst",[UB]:"fire-fst-compat",[VB]:"fire-vertex","fire-js":"fire-js",[jB]:"fire-js-all"};var Xc=new Map,HB=new Map,U_=new Map;function PA(n,e){try{n.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zn(n){let e=n.name;if(U_.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;U_.set(e,n);for(let t of Xc.values())PA(t,n);for(let t of HB.values())PA(t,n);return!0}function ps(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dr(n){return n.settings!==void 0}var qB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Er("app","Firebase",qB);var j_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}};var Wn=BB;function H_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:V_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(t||(t=S_()),!t)throw di.create("no-options");let s=Xc.get(i);if(s){if(ds(t,s.options)&&ds(r,s.config))return s;throw di.create("duplicate-app",{appName:i})}let o=new Jc(i);for(let c of U_.values())o.addComponent(c);let a=new j_(t,r,o);return Xc.set(i,a),a}function hi(n=V_){let e=Xc.get(n);if(!e&&n===V_&&S_())return H_();if(!e)throw di.create("no-app",{appName:n});return e}function Oh(){return Array.from(Xc.values())}function Le(n,e,t){var r;let i=(r=$B[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}zn(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var GB="firebase-heartbeat-database",zB=1,eu="firebase-heartbeat-store",O_=null;function LA(){return O_||(O_=MA(GB,zB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw di.create("idb-open",{originalErrorMessage:n.message})})),O_}function WB(n){return E(this,null,function*(){try{let t=(yield LA()).transaction(eu),r=yield t.objectStore(eu).get(VA(n));return yield t.done,r}catch(e){if(e instanceof $t)Cr.warn(e.message);else{let t=di.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(t.message)}}})}function kA(n,e){return E(this,null,function*(){try{let r=(yield LA()).transaction(eu,"readwrite");yield r.objectStore(eu).put(e,VA(n)),yield r.done}catch(t){if(t instanceof $t)Cr.warn(t.message);else{let r=di.create("idb-set",{originalErrorMessage:t?.message});Cr.warn(r.message)}}})}function VA(n){return`${n.name}!${n.options.appId}`}var KB=1024,QB=30*24*60*60*1e3,B_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=QB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=OA(),{heartbeatsToSend:r,unsentEntries:i}=YB(this._heartbeatsCache.heartbeats),s=zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Cr.warn(t),""}})}};function OA(){return new Date().toISOString().substring(0,10)}function YB(n,e=KB){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),FA(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var $_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return R_()?_A().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield WB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return kA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return kA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FA(n){return zc(JSON.stringify({version:2,heartbeats:n})).length}function ZB(n){zn(new Pt("platform-logger",e=>new F_(e),"PRIVATE")),zn(new Pt("heartbeat",e=>new B_(e),"PRIVATE")),Le(L_,xA,n),Le(L_,xA,"esm2017"),Le("fire-js","")}ZB("");var JB="firebase",XB="10.14.1";Le(JB,XB,"app");var br=new lr("ANGULARFIRE2_VERSION");function Bo(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ms=(n,e)=>{let t=e?[e]:Oh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},fi=class{constructor(){return ms(e$)}},e$="app-check";function jo(){}var Fh=class{zone;delegate;constructor(e,t=Cg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},q_=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jo,{},jo,jo)),t.pipe(tt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},pi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Fh(Zone.current)),this.insideAngular=t.run(()=>new Fh(Zone.current,Eg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(se(De))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function t$(n){return Lh().ngZone.runOutsideAngular(()=>n())}function gs(n){return Lh().ngZone.run(()=>n())}function n$(n){return r$(Lh())(n)}function r$(n){return function(t){return t=t.lift(new q_(n.ngZone)),t.pipe(Gr(n.outsideAngular),qr(n.insideAngular))}}var i$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gs(()=>n.apply(void 0,r))},dt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=gs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jo,{},jo,jo))),r[s]=i$(r[s],t));let i=t$(()=>n.apply(this,r));if(!e)if(i instanceof he){let s=Lh();return i.pipe(Gr(s.outsideAngular),qr(s.insideAngular))}else return gs(()=>i);return i instanceof he?i.pipe(n$):i instanceof Promise?gs(()=>new Promise((s,o)=>i.then(a=>gs(()=>s(a)),a=>gs(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:gs(()=>i)};var En=class{constructor(e){return e}},Tr=class{constructor(){return Oh()}};function s$(n){return n&&n.length===1?n[0]:new En(hi())}var G_=new q("angularfire2._apps"),o$={provide:En,useFactory:s$,deps:[[new ze,G_]]},a$={provide:Tr,deps:[[new ze,G_]]};function c$(n){return(e,t)=>{let r=t.get(ii);Le("angularfire",br.full,"core"),Le("angularfire",br.full,"app"),Le("angular",QS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new En(i)}}function UA(n,...e){return Jt([o$,a$,{provide:G_,useFactory:c$(n),multi:!0,deps:[De,yt,pi,...e]}])}var jA=dt(H_,!0);function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var nR=tR,rR=new Er("auth","Firebase",tR());var Hh=new qn("@firebase/auth");function u$(n,...e){Hh.logLevel<=ce.WARN&&Hh.warn(`Auth (${Wn}): ${n}`,...e)}function Uh(n,...e){Hh.logLevel<=ce.ERROR&&Hh.error(`Auth (${Wn}): ${n}`,...e)}function mi(n,...e){throw dv(n,...e)}function _s(n,...e){return dv(n,...e)}function iR(n,e,t){let r=Object.assign(Object.assign({},nR()),{[e]:t});return new Er("auth","Firebase",r).create(e,{appName:n.name})}function ys(n){return iR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return rR.create(n,...e)}function Z(n,e,...t){if(!n)throw dv(e,...t)}function Sr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Uh(e),new Error(e)}function yi(n,e){n||Sr(e)}function Q_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function l$(){return BA()==="http:"||BA()==="https:"}function BA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function d$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l$()||gA()||"connection"in navigator)?navigator.onLine:!0}function h$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var vs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,yi(t>e,"Short delay should be less than long delay!"),this.isMobile=Kc()||xh()}get(){return d$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hv(n,e){yi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var f$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var p$=new vs(3e4,6e4);function fv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ho(s,o,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return sR(n,i,()=>E(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let f=hs(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return pA()||(y.referrerPolicy="no-referrer"),qh.fetch()(oR(n,n.config.apiHost,t,f),y)}))})}function sR(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},f$),e);try{let i=new Y_(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Vh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vh(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iR(n,h,l);mi(n,h)}}catch(i){if(i instanceof $t)throw i;mi(n,"network-request-failed",{message:String(i)})}})}function g$(s,o,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let l=yield Ho(n,e,t,r,i);return"mfaPendingCredential"in l&&mi(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function oR(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?hv(n.config,i):`${n.config.apiScheme}://${i}`}var Y_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_s(this.auth,"network-request-failed")),p$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Vh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=_s(n,e,r);return i.customData._tokenResponse=t,i}function m$(n,e){return E(this,null,function*(){return Ho(n,"POST","/v1/accounts:delete",e)})}function aR(n,e){return E(this,null,function*(){return Ho(n,"POST","/v1/accounts:lookup",e)})}function tu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function pv(n,e=!1){return E(this,null,function*(){let t=We(n),r=yield t.getIdToken(e),i=gv(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:tu(z_(i.auth_time)),issuedAtTime:tu(z_(i.iat)),expirationTime:tu(z_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function z_(n){return Number(n)*1e3}function gv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wc(t);return i?JSON.parse(i):(Uh("Failed to decode base64 JWT payload"),null)}catch(i){return Uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $A(n){let e=gv(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ru(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof $t&&y$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function y$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Z_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var iu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Gh(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ru(n,aR(t,{idToken:r}));Z(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cR(s.providerUserInfo):[],a=_$(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new iu(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function mv(n){return E(this,null,function*(){let e=We(n);yield Gh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cR(n){return n.map(e=>{var{providerId:t}=e,r=Dg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function v$(n,e){return E(this,null,function*(){let t=yield sR(n,{},()=>E(this,null,function*(){let r=hs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=oR(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function I$(n,e){return E(this,null,function*(){return Ho(n,"POST","/v2/accounts:revokeToken",fv(n,e))})}var nu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$A(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=$A(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield v$(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Sr("not implemented")}};function gi(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var $o=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield ru(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return pv(this,e)}reload(){return mv(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Gh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Dr(this.auth.app))return Promise.reject(ys(this.auth));let e=yield this.getIdToken();return yield ru(this,m$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,U=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:X,isAnonymous:xe,providerData:ee,stsTokenManager:D}=t;Z($&&D,e,"internal-error");let _=nu.fromJSON(this.name,D);Z(typeof $=="string",e,"internal-error"),gi(f,e.name),gi(g,e.name),Z(typeof X=="boolean",e,"internal-error"),Z(typeof xe=="boolean",e,"internal-error"),gi(y,e.name),gi(w,e.name),gi(N,e.name),gi(R,e.name),gi(k,e.name),gi(U,e.name);let v=new n({uid:$,auth:e,email:g,emailVerified:X,displayName:f,isAnonymous:xe,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:k,lastLoginAt:U});return ee&&Array.isArray(ee)&&(v.providerData=ee.map(C=>Object.assign({},C))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new nu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Gh(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?cR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new nu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new iu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var HA=new Map;function Ar(n){yi(n instanceof Function,"Expected a class definition");let e=HA.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,HA.set(n,e),e)}var w$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),J_=w$;function jh(n,e,t){return`firebase:${n}:${e}:${t}`}var zh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=jh(this.userKey,i.apiKey,s),this.fullPersistenceKey=jh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?$o._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Ar(J_),e,r);let i=(yield Promise.all(t.map(l=>E(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Ar(J_),o=jh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let f=$o._fromJSON(e,h);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>E(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function qA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pR(e))return"Blackberry";if(gR(e))return"Webos";if(lR(e))return"Safari";if((e.includes("chrome/")||dR(e))&&!e.includes("edge/"))return"Chrome";if(fR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uR(n=rt()){return/firefox\//i.test(n)}function lR(n=rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dR(n=rt()){return/crios\//i.test(n)}function hR(n=rt()){return/iemobile/i.test(n)}function fR(n=rt()){return/android/i.test(n)}function pR(n=rt()){return/blackberry/i.test(n)}function gR(n=rt()){return/webos/i.test(n)}function yv(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E$(n=rt()){var e;return yv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C$(){return mA()&&document.documentMode===10}function mR(n=rt()){return yv(n)||fR(n)||gR(n)||pR(n)||/windows phone/i.test(n)||hR(n)}function yR(n,e=[]){let t;switch(n){case"Browser":t=qA(rt());break;case"Worker":t=`${qA(rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wn}/${r}`}var X_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function D$(t){return E(this,arguments,function*(n,e={}){return Ho(n,"GET","/v2/passwordPolicy",fv(n,e))})}var b$=6,ev=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:b$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var tv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wh(this),this.idTokenSubscription=new Wh(this),this.beforeStateQueue=new X_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield zh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield aR(this,{idToken:e}),r=yield $o._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Dr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Gh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=h$()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Dr(this.app))return Promise.reject(ys(this));let t=e?We(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Dr(this.app)?Promise.reject(ys(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dr(this.app)?Promise.reject(ys(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield D$(this),t=new ev(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield I$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ar(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield zh.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&u$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function _v(n){return We(n)}var Wh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T$(n){vv=n}function S$(n){return vv.loadJS(n)}function A$(){return vv.gapiScript}function _R(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Iv(n,e){let t=ps(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ds(s,e??{}))return i;mi(i,"already-initialized")}return t.initialize({options:e})}function R$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ar);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wv(n,e,t){let r=_v(n);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=vR(e),{host:o,port:a}=N$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||M$()}function vR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function N$(n){let e=vR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:GA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:GA(o)}}}function GA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function M$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Kh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}};function W_(n,e){return E(this,null,function*(){return g$(n,"POST","/v1/accounts:signInWithIdp",fv(n,e))})}var Qh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var nv=class extends Qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var su=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield $o._fromIdTokenResponse(e,r,i),o=zA(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=zA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function zA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var rv=class n extends $t{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function IR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rv._fromErrorAndOperation(n,s,e,r):s})}function x$(n,e,t=!1){return E(this,null,function*(){let r=yield ru(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return su._forOperation(n,"link",r)})}function P$(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Dr(r.app))return Promise.reject(ys(r));let i="reauthenticate";try{let s=yield ru(n,IR(r,i,e,n),t);Z(s.idToken,r,"internal-error");let o=gv(s.idToken);Z(o,r,"internal-error");let{sub:a}=o;return Z(n.uid===a,r,"user-mismatch"),su._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&mi(r,"user-mismatch"),s}})}function k$(n,e,t=!1){return E(this,null,function*(){if(Dr(n.app))return Promise.reject(ys(n));let r="signIn",i=yield IR(n,r,e),s=yield su._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Ev(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function Cv(n,e,t){return We(n).beforeAuthStateChanged(e,t)}var Yh="__sak";var Zh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var O$=1e3,F$=10,L$=(()=>{class n extends Zh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);C$()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,F$):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},O$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield $r(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield $r(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield $r(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),wR=L$;var V$=(()=>{class n extends Zh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Dv=V$;function U$(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var j$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>E(this,null,function*(){return h(r.origin,o)})),l=yield U$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ER(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var iv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=ER("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Kn(){return window}function B$(n){Kn().location.href=n}function CR(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}function $$(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function H$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function q$(){return CR()?self:null}var DR="firebaseLocalStorageDb",G$=1,Jh="firebaseLocalStorage",bR="fbase_key",Is=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ef(n,e){return n.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function z$(){let n=indexedDB.deleteDatabase(DR);return new Is(n).toPromise()}function sv(){let n=indexedDB.open(DR,G$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Jh,{keyPath:bR})}catch(i){t(i)}}),n.addEventListener("success",()=>E(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),yield z$(),e(yield sv()))}))})}function WA(n,e,t){return E(this,null,function*(){let r=ef(n,!0).put({[bR]:e,value:t});return new Is(r).toPromise()})}function W$(n,e){return E(this,null,function*(){let t=ef(n,!1).get(e),r=yield new Is(t).toPromise();return r===void 0?null:r.value})}function KA(n,e){let t=ef(n,!0).delete(e);return new Is(t).toPromise()}var K$=800,Q$=3,Y$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield sv(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Q$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return CR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=j$._getInstance(q$()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield $$(),!this.activeServiceWorker)return;this.sender=new iv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||H$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield sv();return yield WA(t,Yh,"1"),yield KA(t,Yh),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>WA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>W$(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>KA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=ef(s,!1).getAll();return new Is(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),K$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),TR=Y$;var xZ=_R("rcb"),PZ=new vs(3e4,6e4);function Z$(n,e){return e?Ar(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ou=class extends Kh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return W_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return W_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return W_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function J$(n){return k$(n.auth,new ou(n),n.bypassAuthState)}function X$(n){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),P$(t,new ou(n),n.bypassAuthState)}function eH(n){return E(this,null,function*(){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),x$(t,new ou(n),n.bypassAuthState)})}var ov=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J$;case"linkViaPopup":case"linkViaRedirect":return eH;case"reauthViaPopup":case"reauthViaRedirect":return X$;default:mi(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kZ=new vs(2e3,1e4);var tH="pendingRedirect",Bh=new Map,av=class n extends ov{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Bh.get(this.auth._key());if(!e){try{let r=(yield nH(this.resolver,this.auth))?yield $r(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return $r(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,$r(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function nH(n,e){return E(this,null,function*(){let t=sH(e),r=iH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function rH(n,e){Bh.set(n._key(),e)}function iH(n){return Ar(n._redirectPersistence)}function sH(n){return jh(tH,n.config.apiKey,n.name)}function oH(n,e,t=!1){return E(this,null,function*(){if(Dr(n.app))return Promise.reject(ys(n));let r=_v(n),i=Z$(r,e),o=yield new av(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var aH=10*60*1e3,cv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!SR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_s(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aH&&this.cachedEventUids.clear(),this.cachedEventUids.has(QA(e))}saveEventToCache(e){this.cachedEventUids.add(QA(e)),this.lastProcessedEventTime=Date.now()}};function QA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function SR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SR(n);default:return!1}}function uH(t){return E(this,arguments,function*(n,e={}){return Ho(n,"GET","/v1/projects",e)})}var lH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dH=/^https?/;function hH(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uH(n);for(let t of e)try{if(fH(t))return}catch{}mi(n,"unauthorized-domain")})}function fH(n){let e=Q_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!dH.test(t))return!1;if(lH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var pH=new vs(3e4,6e4);function YA(){let n=Kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gH(n){return new Promise((e,t)=>{var r,i,s;function o(){YA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YA(),t(_s(n,"network-request-failed"))},timeout:pH.get()})}if(!((i=(r=Kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Kn().gapi)===null||s===void 0)&&s.load)o();else{let a=_R("iframefcb");return Kn()[a]=()=>{gapi.load?o():t(_s(n,"network-request-failed"))},S$(`${A$()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $h=null,e})}var $h=null;function mH(n){return $h=$h||gH(n),$h}var yH=new vs(5e3,15e3),_H="__/auth/iframe",vH="emulator/auth/iframe",IH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EH(n){let e=n.config;Z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?hv(e,vH):`https://${n.config.authDomain}/${_H}`,r={apiKey:e.apiKey,appName:n.name,v:Wn},i=wH.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${hs(r).slice(1)}`}function CH(n){return E(this,null,function*(){let e=yield mH(n),t=Kn().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:EH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IH,dontclear:!0},r=>new Promise((i,s)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=_s(n,"network-request-failed"),a=Kn().setTimeout(()=>{s(o)},yH.get());function c(){Kn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var DH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bH=500,TH=600,SH="_blank",AH="http://localhost",Xh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function RH(n,e,t,r=bH,i=TH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},DH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=rt().toLowerCase();t&&(a=dR(l)?SH:t),uR(l)&&(e=e||AH,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(E$(l)&&a!=="_self")return NH(e||"",a),new Xh(null);let f=window.open(e||"",a,h);Z(f,n,"popup-blocked");try{f.focus()}catch{}return new Xh(f)}function NH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var MH="__/auth/handler",xH="emulator/auth/handler",PH=encodeURIComponent("fac");function ZA(n,e,t,r,i,s){return E(this,null,function*(){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wn,eventId:i};if(e instanceof Qh){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Qc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof nv){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${PH}=${encodeURIComponent(c)}`:"";return`${kH(n)}?${hs(a).slice(1)}${l}`})}function kH({config:n}){return n.emulator?hv(n,xH):`https://${n.authDomain}/${MH}`}var K_="webStorageSupport",uv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dv,this._completeRedirectFn=oH,this._overrideRedirectResult=rH}_openPopup(e,t,r,i){return E(this,null,function*(){var s;yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ZA(e,t,r,Q_(),i);return RH(e,o,ER())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield ZA(e,t,r,Q_(),i);return B$(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(yi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield CH(e),r=new cv(e);return t.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(K_,{type:K_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[K_];o!==void 0&&t(!!o),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mR()||lR()||yv()}},AR=uv;var JA="@firebase/auth",XA="1.7.9";var lv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FH(n){zn(new Pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(n)},l=new tv(r,i,s,c);return R$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zn(new Pt("auth-internal",e=>{let t=_v(e.getProvider("auth").getImmediate());return(r=>new lv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(JA,XA,OH(n)),Le(JA,XA,"esm2017")}var LH=5*60,VH=A_("authIdTokenMaxAge")||LH,eR=null,UH=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VH)return;let i=t?.token;eR!==i&&(eR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function bv(n=hi()){let e=ps(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Iv(n,{popupRedirectResolver:AR,persistence:[TR,wR,Dv]}),r=A_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=UH(s.toString());Cv(t,o,()=>o(t.currentUser)),Ev(t,a=>o(a))}}let i=T_("auth");return i&&wv(t,`http://${i}`),t}function jH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}T$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=_s("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",jH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FH("Browser");var RR="auth",au=class{constructor(e){return e}},ws=class{constructor(){return ms(RR)}};var Tv=new q("angularfire2.auth-instances");function kq(n,e){let t=Bo(RR,n,e);return t&&new au(t)}function Oq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new au(r)}}var Fq={provide:ws,deps:[[new ze,Tv]]},Lq={provide:au,useFactory:kq,deps:[[new ze,Tv],En]};function NR(n,...e){return Le("angularfire",br.full,"auth"),Jt([Lq,Fq,{provide:Tv,useFactory:Oq(n),multi:!0,deps:[De,yt,pi,Tr,[new ze,fi],...e]}])}var MR=dt(bv,!0);var xR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PR={};var _i,Sv;(function(){var n;function e(D,_){function v(){}v.prototype=_.prototype,D.D=_.prototype,D.prototype=new v,D.prototype.constructor=D,D.C=function(C,b,S){for(var I=Array(arguments.length-2),nr=2;nr<arguments.length;nr++)I[nr-2]=arguments[nr];return _.prototype[b].apply(C,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,v){v||(v=0);var C=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)C[b]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(b=0;16>b;++b)C[b]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=D.g[0],v=D.g[1],b=D.g[2];var S=D.g[3],I=_+(S^v&(b^S))+C[0]+3614090360&4294967295;_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[3]+3250441966&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[4]+4118548399&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[7]+4249261313&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[8]+1770035416&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[11]+2304563134&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(S^v&(b^S))+C[12]+1804603682&4294967295,_=v+(I<<7&4294967295|I>>>25),I=S+(b^_&(v^b))+C[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(v^S&(_^v))+C[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=v+(_^b&(S^_))+C[15]+1236535329&4294967295,v=b+(I<<22&4294967295|I>>>10),I=_+(b^S&(v^b))+C[1]+4129170786&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[0]+3921069994&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[5]+3593408605&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[4]+3889429448&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[9]+568446438&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[8]+1163531501&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(v^b))+C[13]+2850285829&4294967295,_=v+(I<<5&4294967295|I>>>27),I=S+(v^b&(_^v))+C[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^v&(S^_))+C[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=v+(S^_&(b^S))+C[12]+2368359562&4294967295,v=b+(I<<20&4294967295|I>>>12),I=_+(v^b^S)+C[5]+4294588738&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[14]+4259657740&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[1]+2763975236&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[10]+3200236656&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[13]+681279174&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[6]+76029189&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(v^b^S)+C[9]+3654602809&4294967295,_=v+(I<<4&4294967295|I>>>28),I=S+(_^v^b)+C[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^v)+C[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=v+(b^S^_)+C[2]+3299628645&4294967295,v=b+(I<<23&4294967295|I>>>9),I=_+(b^(v|~S))+C[0]+4096336452&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[5]+4237533241&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[12]+1700485571&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[1]+2240044497&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[8]+1873313359&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[13]+1309151649&4294967295,v=b+(I<<21&4294967295|I>>>11),I=_+(b^(v|~S))+C[4]+4149444226&4294967295,_=v+(I<<6&4294967295|I>>>26),I=S+(v^(_|~b))+C[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~v))+C[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=v+(S^(b|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var v=_-this.blockSize,C=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=v;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<_;)if(C[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<_;)if(C[b++]=D[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var v=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=v&255,v/=256;for(this.u(D),D=Array(16),_=v=0;4>_;++_)for(var C=0;32>C;C+=8)D[v++]=this.g[_]>>>C&255;return D};function s(D,_){var v=a;return Object.prototype.hasOwnProperty.call(v,D)?v[D]:v[D]=_(D)}function o(D,_){this.h=_;for(var v=[],C=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;C&&S==_||(v[b]=S,C=!1)}this.g=v}var a={};function c(D){return-128<=D&&128>D?s(D,function(_){return new o([_|0],0>_?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return R(l(-D));for(var _=[],v=1,C=0;D>=v;C++)_[C]=D/v|0,v*=4294967296;return new o(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return R(h(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(_,8)),C=f,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),C=C.j(S).add(l(I))):(C=C.j(v),C=C.add(l(I)))}return C}var f=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-R(this).m();for(var D=0,_=1,v=0;v<this.g.length;v++){var C=this.i(v);D+=(0<=C?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var _=l(Math.pow(D,6)),v=this,C="";;){var b=X(v,_).g;v=k(v,b.j(_));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(D);if(v=b,w(v))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=k(this,D),N(D)?-1:w(D)?0:1};function R(D){for(var _=D.g.length,v=[],C=0;C<_;C++)v[C]=~D.g[C];return new o(v,~D.h).add(g)}n.abs=function(){return N(this)?R(this):this},n.add=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0,b=0;b<=_;b++){var S=C+(this.i(b)&65535)+(D.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);C=I>>>16,S&=65535,I&=65535,v[b]=I<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function k(D,_){return D.add(R(_))}n.j=function(D){if(w(this)||w(D))return f;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var _=this.g.length+D.g.length,v=[],C=0;C<2*_;C++)v[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<D.g.length;b++){var S=this.i(C)>>>16,I=this.i(C)&65535,nr=D.i(b)>>>16,Pa=D.i(b)&65535;v[2*C+2*b]+=I*Pa,U(v,2*C+2*b),v[2*C+2*b+1]+=S*Pa,U(v,2*C+2*b+1),v[2*C+2*b+1]+=I*nr,U(v,2*C+2*b+1),v[2*C+2*b+2]+=S*nr,U(v,2*C+2*b+2)}for(C=0;C<_;C++)v[C]=v[2*C+1]<<16|v[2*C];for(C=_;C<2*_;C++)v[C]=0;return new o(v,0)};function U(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function $(D,_){this.g=D,this.h=_}function X(D,_){if(w(_))throw Error("division by zero");if(w(D))return new $(f,f);if(N(D))return _=X(R(D),_),new $(R(_.g),R(_.h));if(N(_))return _=X(D,R(_)),new $(R(_.g),_.h);if(30<D.g.length){if(N(D)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var v=g,C=_;0>=C.l(D);)v=xe(v),C=xe(C);var b=ee(v,1),S=ee(C,1);for(C=ee(C,2),v=ee(v,2);!w(C);){var I=S.add(C);0>=I.l(D)&&(b=b.add(v),S=I),C=ee(C,1),v=ee(v,1)}return _=k(D,b.j(_)),new $(b,_)}for(b=f;0<=D.l(_);){for(v=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(v)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(v),I=S.j(_);N(I)||0<I.l(D);)v-=C,S=l(v),I=S.j(_);w(S)&&(S=g),b=b.add(S),D=k(D,I)}return new $(b,D)}n.A=function(D){return X(this,D).h},n.and=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)&D.i(C);return new o(v,this.h&D.h)},n.or=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)|D.i(C);return new o(v,this.h|D.h)},n.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),v=[],C=0;C<_;C++)v[C]=this.i(C)^D.i(C);return new o(v,this.h^D.h)};function xe(D){for(var _=D.g.length+1,v=[],C=0;C<_;C++)v[C]=D.i(C)<<1|D.i(C-1)>>>31;return new o(v,D.h)}function ee(D,_){var v=_>>5;_%=32;for(var C=D.g.length-v,b=[],S=0;S<C;S++)b[S]=0<_?D.i(S+v)>>>_|D.i(S+v+1)<<32-_:D.i(S+v);return new o(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sv=PR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,_i=PR.Integer=o}).apply(typeof xR<"u"?xR:typeof self<"u"?self:typeof window<"u"?window:{});var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rr={};var Av,Vq,qo,Rv,cu,nf,Nv,Mv,xv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,p){return u==Array.prototype||u==Object.prototype||(u[d]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof tf=="object"&&tf];for(var d=0;d<u.length;++d){var p=u[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var T=u[m];if(!(T in p))break e;p=p[T]}u=u[u.length-1],m=p[u],d=d(m),d!=m&&d!=null&&e(p,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var p=0,m=!1,T={next:function(){if(!m&&p<u.length){var A=p++;return{value:d(A,u[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,p){return p})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,p){return u.call.apply(u.bind,arguments)}function f(u,d,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),u.apply(d,T)}}return function(){return u.apply(d,arguments)}}function g(u,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function y(u,d){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,d){function p(){}p.prototype=d.prototype,u.aa=d.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,T,A){for(var P=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)P[Ae-2]=arguments[Ae];return d.prototype[T].apply(m,P)}}function N(u){let d=u.length;if(0<d){let p=Array(d);for(let m=0;m<d;m++)p[m]=u[m];return p}return[]}function R(u,d){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let T=u.length||0,A=m.length||0;u.length=T+A;for(let P=0;P<A;P++)u[T+P]=m[P]}else u.push(m)}}class k{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function X(u){return X[" "](u),u}X[" "]=function(){};var xe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ee(u,d,p){for(let m in u)d.call(p,u[m],m,u)}function D(u,d){for(let p in u)d.call(void 0,u[p],p,u)}function _(u){let d={};for(let p in u)d[p]=u[p];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,d){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)u[p]=m[p];for(let A=0;A<v.length;A++)p=v[A],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var d=1;u=u.split(":");let p=[];for(;0<d&&u.length;)p.push(u.shift()),d--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Op;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class nr{constructor(){this.h=this.g=null}add(d,p){let m=Pa.get();m.set(d,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Pa=new k(()=>new KP,u=>u.reset());class KP{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ka,Oa=!1,Op=new nr,gC=()=>{let u=a.Promise.resolve(void 0);ka=()=>{u.then(QP)}};var QP=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var d=Pa;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Oa=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var YP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return u}();function Fa(u,d){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(xe){e:{try{X(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else p=="mouseover"?d=u.fromElement:p=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ZP[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Fa.aa.h.call(this)}}w(Fa,ft);var ZP={2:"touch",3:"pen",4:"mouse"};Fa.prototype.h=function(){Fa.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),JP=0;function XP(u,d,p,m,T){this.listener=u,this.proxy=null,this.src=d,this.type=p,this.capture=!!m,this.ha=T,this.key=++JP,this.da=this.fa=!1}function al(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cl(u){this.src=u,this.g={},this.h=0}cl.prototype.add=function(u,d,p,m,T){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var P=Lp(u,d,m,T);return-1<P?(d=u[P],p||(d.fa=!1)):(d=new XP(d,this.src,A,!!m,T),d.fa=p,u.push(d)),d};function Fp(u,d){var p=d.type;if(p in u.g){var m=u.g[p],T=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(m,T,1),A&&(al(d),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Lp(u,d,p,m){for(var T=0;T<u.length;++T){var A=u[T];if(!A.da&&A.listener==d&&A.capture==!!p&&A.ha==m)return T}return-1}var Vp="closure_lm_"+(1e6*Math.random()|0),Up={};function mC(u,d,p,m,T){if(m&&m.once)return _C(u,d,p,m,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)mC(u,d[A],p,m,T);return null}return p=Hp(p),u&&u[La]?u.K(d,p,l(m)?!!m.capture:!!m,T):yC(u,d,p,!1,m,T)}function yC(u,d,p,m,T,A){if(!d)throw Error("Invalid event type");var P=l(T)?!!T.capture:!!T,Ae=Bp(u);if(Ae||(u[Vp]=Ae=new cl(u)),p=Ae.add(d,p,m,P,A),p.proxy)return p;if(m=ek(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)YP||(T=P),T===void 0&&(T=!1),u.addEventListener(d.toString(),m,T);else if(u.attachEvent)u.attachEvent(IC(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ek(){function u(p){return d.call(u.src,u.listener,p)}let d=tk;return u}function _C(u,d,p,m,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)_C(u,d[A],p,m,T);return null}return p=Hp(p),u&&u[La]?u.L(d,p,l(m)?!!m.capture:!!m,T):yC(u,d,p,!0,m,T)}function vC(u,d,p,m,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)vC(u,d[A],p,m,T);else m=l(m)?!!m.capture:!!m,p=Hp(p),u&&u[La]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],p=Lp(A,p,m,T),-1<p&&(al(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=Bp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Lp(d,p,m,T)),(p=-1<u?d[u]:null)&&jp(p))}function jp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[La])Fp(d.i,u);else{var p=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(p,m,u.capture):d.detachEvent?d.detachEvent(IC(p),m):d.addListener&&d.removeListener&&d.removeListener(m),(p=Bp(d))?(Fp(p,u),p.h==0&&(p.src=null,d[Vp]=null)):al(u)}}}function IC(u){return u in Up?Up[u]:Up[u]="on"+u}function tk(u,d){if(u.da)u=!0;else{d=new Fa(d,this);var p=u.listener,m=u.ha||u.src;u.fa&&jp(u),u=p.call(m,d)}return u}function Bp(u){return u=u[Vp],u instanceof cl?u:null}var $p="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hp(u){return typeof u=="function"?u:(u[$p]||(u[$p]=function(d){return u.handleEvent(d)}),u[$p])}function pt(){Vr.call(this),this.i=new cl(this),this.M=this,this.F=null}w(pt,Vr),pt.prototype[La]=!0,pt.prototype.removeEventListener=function(u,d,p,m){vC(this,u,d,p,m)};function Dt(u,d){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new ft(d,u);else if(d instanceof ft)d.target=d.target||u;else{var T=d;d=new ft(m,u),C(d,T)}if(T=!0,p)for(var A=p.length-1;0<=A;A--){var P=d.g=p[A];T=ul(P,m,!0,d)&&T}if(P=d.g=u,T=ul(P,m,!0,d)&&T,T=ul(P,m,!1,d)&&T,p)for(A=0;A<p.length;A++)P=d.g=p[A],T=ul(P,m,!1,d)&&T}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var p=u.g[d],m=0;m<p.length;m++)al(p[m]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,p,m){return this.i.add(String(u),d,!1,p,m)},pt.prototype.L=function(u,d,p,m){return this.i.add(String(u),d,!0,p,m)};function ul(u,d,p,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==p){var Ae=P.listener,at=P.ha||P.src;P.fa&&Fp(u.i,P),T=Ae.call(at,m)!==!1&&T}}return T&&!m.defaultPrevented}function wC(u,d,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function EC(u){u.g=wC(()=>{u.g=null,u.i&&(u.i=!1,EC(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class nk extends Vr{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:EC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(u){Vr.call(this),this.h=u,this.g={}}w(Va,Vr);var CC=[];function DC(u){ee(u.g,function(d,p){this.g.hasOwnProperty(p)&&jp(d)},u),u.g={}}Va.prototype.N=function(){Va.aa.N.call(this),DC(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qp=a.JSON.stringify,rk=a.JSON.parse,ik=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gp(){}Gp.prototype.h=null;function bC(u){return u.h||(u.h=u.i())}function TC(){}var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zp(){ft.call(this,"d")}w(zp,ft);function Wp(){ft.call(this,"c")}w(Wp,ft);var Ri={},SC=null;function ll(){return SC=SC||new pt}Ri.La="serverreachability";function AC(u){ft.call(this,Ri.La,u)}w(AC,ft);function ja(u){let d=ll();Dt(d,new AC(d))}Ri.STAT_EVENT="statevent";function RC(u,d){ft.call(this,Ri.STAT_EVENT,u),this.stat=d}w(RC,ft);function bt(u){let d=ll();Dt(d,new RC(d,u))}Ri.Ma="timingevent";function NC(u,d){ft.call(this,Ri.Ma,u),this.size=d}w(NC,ft);function Ba(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function $a(){this.g=!0}$a.prototype.xa=function(){this.g=!1};function sk(u,d,p,m,T,A){u.info(function(){if(u.g)if(A)for(var P="",Ae=A.split("&"),at=0;at<Ae.length;at++){var Ee=Ae[at].split("=");if(1<Ee.length){var gt=Ee[0];Ee=Ee[1];var mt=gt.split("_");P=2<=mt.length&&mt[1]=="type"?P+(gt+"="+Ee+"&"):P+(gt+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+p+`
`+P})}function ok(u,d,p,m,T,A,P){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+p+`
`+A+" "+P})}function qs(u,d,p,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+ck(u,p)+(m?" "+m:"")})}function ak(u,d){u.info(function(){return"TIMEOUT: "+d})}$a.prototype.info=function(){};function ck(u,d){if(!u.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return qp(p)}catch{return d}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},MC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kp;function hl(){}w(hl,Gp),hl.prototype.g=function(){return new XMLHttpRequest},hl.prototype.i=function(){return{}},Kp=new hl;function Ur(u,d,p,m){this.j=u,this.i=d,this.l=p,this.R=m||1,this.U=new Va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xC}function xC(){this.i=null,this.g="",this.h=!1}var PC={},Qp={};function Yp(u,d,p){u.L=1,u.v=ml(rr(d)),u.m=p,u.P=!0,kC(u,null)}function kC(u,d){u.F=Date.now(),fl(u),u.A=rr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),KC(p.i,"t",m),u.C=0,p=u.j.J,u.h=new xC,u.g=hD(u.j,p?d:null,!u.m),0<u.O&&(u.M=new nk(g(u.Y,u,u.g),u.O)),d=u.U,p=u.g,m=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(CC[0]=T.toString()),T=CC);for(var A=0;A<T.length;A++){var P=mC(p,T[A],m||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),ja(),sk(u.i,u.u,u.A,u.l,u.R,u.m)}Ur.prototype.ca=function(u){u=u.target;let d=this.M;d&&ir(u)==3?d.j():this.Y(u)},Ur.prototype.Y=function(u){try{if(u==this.g)e:{let mt=ir(this.g);var d=this.g.Ba();let Ws=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||tD(this.g)))){this.J||mt!=4||d==7||(d==8||0>=Ws?ja(3):ja(2)),Zp(this);var p=this.g.Z();this.X=p;t:if(OC(this)){var m=tD(this.g);u="";var T=m.length,A=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),Ha(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(A&&d==T-1)});m.length=0,this.h.g+=u,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=p==200,ok(this.i,this.u,this.A,this.l,this.R,mt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,at=this.g;if((Ae=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ae)){var Ee=Ae;break t}}Ee=null}if(p=Ee)qs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jp(this,p);else{this.o=!1,this.s=3,bt(12),Ni(this),Ha(this);break e}}if(this.P){p=!0;let ln;for(;!this.J&&this.C<P.length;)if(ln=uk(this,P),ln==Qp){mt==4&&(this.s=4,bt(14),p=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==PC){this.s=4,bt(15),qs(this.i,this.l,P,"[Invalid Chunk]"),p=!1;break}else qs(this.i,this.l,ln,null),Jp(this,ln);if(OC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||P.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)qs(this.i,this.l,P,"[Invalid Chunked Response]"),Ni(this),Ha(this);else if(0<P.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),ig(gt),gt.M=!0,bt(11))}}else qs(this.i,this.l,P,null),Jp(this,P);mt==4&&Ni(this),this.o&&!this.J&&(mt==4?cD(this.j,this):(this.o=!1,fl(this)))}else Tk(this.g),p==400&&0<P.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Ni(this),Ha(this)}}}catch{}finally{}};function OC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function uk(u,d){var p=u.C,m=d.indexOf(`
`,p);return m==-1?Qp:(p=Number(d.substring(p,m)),isNaN(p)?PC:(m+=1,m+p>d.length?Qp:(d=d.slice(m,m+p),u.C=m+p,d)))}Ur.prototype.cancel=function(){this.J=!0,Ni(this)};function fl(u){u.S=Date.now()+u.I,FC(u,u.I)}function FC(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ba(g(u.ba,u),d)}function Zp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ur.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ak(this.i,this.A),this.L!=2&&(ja(),bt(17)),Ni(this),this.s=2,Ha(this)):FC(this,this.S-u)};function Ha(u){u.j.G==0||u.J||cD(u.j,u)}function Ni(u){Zp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,DC(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Jp(u,d){try{var p=u.j;if(p.G!=0&&(p.g==u||Xp(p.h,u))){if(!u.K&&Xp(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)wl(p),vl(p);else break e;rg(p),bt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ba(g(p.Za,p),6e3));if(1>=UC(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else xi(p,11)}else if((u.K||p.g==u)&&wl(p),!U(d))for(T=p.Da.g.parse(d),d=0;d<T.length;d++){let Ee=T[d];if(p.T=Ee[0],Ee=Ee[1],p.G==2)if(Ee[0]=="c"){p.K=Ee[1],p.ia=Ee[2];let gt=Ee[3];gt!=null&&(p.la=gt,p.j.info("VER="+p.la));let mt=Ee[4];mt!=null&&(p.Aa=mt,p.j.info("SVER="+p.Aa));let Ws=Ee[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(m=1.5*Ws,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ln=u.g;if(ln){let Cl=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cl){var A=m.h;A.g||Cl.indexOf("spdy")==-1&&Cl.indexOf("quic")==-1&&Cl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(eg(A,A.h),A.h=null))}if(m.D){let sg=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;sg&&(m.ya=sg,Pe(m.I,m.D,sg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var P=u;if(m.qa=dD(m,m.J?m.ia:null,m.W),P.K){jC(m.h,P);var Ae=P,at=m.L;at&&(Ae.I=at),Ae.B&&(Zp(Ae),fl(Ae)),m.g=P}else oD(m);0<p.i.length&&Il(p)}else Ee[0]!="stop"&&Ee[0]!="close"||xi(p,7);else p.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?xi(p,7):ng(p):Ee[0]!="noop"&&p.l&&p.l.ta(Ee),p.v=0)}}ja(4)}catch{}}var lk=class{constructor(u,d){this.g=u,this.map=d}};function LC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function VC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function UC(u){return u.h?1:u.g?u.g.size:0}function Xp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function eg(u,d){u.g?u.g.add(d):u.h=d}function jC(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}LC.prototype.cancel=function(){if(this.i=BC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function BC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let p of u.g.values())d=d.concat(p.D);return d}return N(u.i)}function dk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],p=u.length,m=0;m<p;m++)d.push(u[m]);return d}d=[],p=0;for(m in u)d[p++]=u[m];return d}function hk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var p=0;p<u;p++)d.push(p);return d}d=[],p=0;for(let m in u)d[p++]=m;return d}}}function $C(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var p=hk(u),m=dk(u),T=m.length,A=0;A<T;A++)d.call(void 0,m[A],p&&p[A],u)}var HC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fk(u,d){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),T=null;if(0<=m){var A=u[p].substring(0,m);T=u[p].substring(m+1)}else A=u[p];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Mi){this.h=u.h,pl(this,u.j),this.o=u.o,this.g=u.g,gl(this,u.s),this.l=u.l;var d=u.i,p=new za;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),qC(this,p),this.m=u.m}else u&&(d=String(u).match(HC))?(this.h=!1,pl(this,d[1]||"",!0),this.o=qa(d[2]||""),this.g=qa(d[3]||"",!0),gl(this,d[4]),this.l=qa(d[5]||"",!0),qC(this,d[6]||"",!0),this.m=qa(d[7]||"")):(this.h=!1,this.i=new za(null,this.h))}Mi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ga(d,GC,!0),":");var p=this.g;return(p||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ga(d,GC,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ga(p,p.charAt(0)=="/"?mk:gk,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ga(p,_k)),u.join("")};function rr(u){return new Mi(u)}function pl(u,d,p){u.j=p?qa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function gl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function qC(u,d,p){d instanceof za?(u.i=d,vk(u.i,u.h)):(p||(d=Ga(d,yk)),u.i=new za(d,u.h))}function Pe(u,d,p){u.i.set(d,p)}function ml(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ga(u,d,p){return typeof u=="string"?(u=encodeURI(u).replace(d,pk),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var GC=/[#\/\?@]/g,gk=/[#\?:]/g,mk=/[#\?]/g,yk=/[#\?@]/g,_k=/#/g;function za(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function jr(u){u.g||(u.g=new Map,u.h=0,u.i&&fk(u.i,function(d,p){u.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=za.prototype,n.add=function(u,d){jr(this),this.i=null,u=Gs(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(d),this.h+=1,this};function zC(u,d){jr(u),d=Gs(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function WC(u,d){return jr(u),d=Gs(u,d),u.g.has(d)}n.forEach=function(u,d){jr(this),this.g.forEach(function(p,m){p.forEach(function(T){u.call(d,T,m,this)},this)},this)},n.na=function(){jr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let m=0;m<d.length;m++){let T=u[m];for(let A=0;A<T.length;A++)p.push(d[m])}return p},n.V=function(u){jr(this);let d=[];if(typeof u=="string")WC(this,u)&&(d=d.concat(this.g.get(Gs(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)d=d.concat(u[p])}return d},n.set=function(u,d){return jr(this),this.i=null,u=Gs(this,u),WC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function KC(u,d,p){zC(u,d),0<p.length&&(u.i=null,u.g.set(Gs(u,d),N(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var m=d[p];let A=encodeURIComponent(String(m)),P=this.V(m);for(m=0;m<P.length;m++){var T=A;P[m]!==""&&(T+="="+encodeURIComponent(String(P[m]))),u.push(T)}}return this.i=u.join("&")};function Gs(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function vk(u,d){d&&!u.j&&(jr(u),u.i=null,u.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(zC(this,m),KC(this,T,p))},u)),u.j=d}function Ik(u,d){let p=new $a;if(a.Image){let m=new Image;m.onload=y(Br,p,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Br,p,"TestLoadImage: error",!1,d,m),m.onabort=y(Br,p,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Br,p,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function wk(u,d){let p=new $a,m=new AbortController,T=setTimeout(()=>{m.abort(),Br(p,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(A=>{clearTimeout(T),A.ok?Br(p,"TestPingServer: ok",!0,d):Br(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Br(p,"TestPingServer: error",!1,d)})}function Br(u,d,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function Ek(){this.g=new ik}function Ck(u,d,p){let m=p||"";try{$C(u,function(T,A){let P=T;l(T)&&(P=qp(T)),d.push(m+A+"="+encodeURIComponent(P))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function Wa(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Wa,Gp),Wa.prototype.g=function(){return new yl(this.l,this.j)},Wa.prototype.i=function(u){return function(){return u}}({});function yl(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(yl,pt),n=yl.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Qa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QC(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function QC(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ka(this):Qa(this),this.readyState==3&&QC(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ka(this))},n.Qa=function(u){this.g&&(this.response=u,Ka(this))},n.ga=function(){this.g&&Ka(this)};function Ka(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Qa(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=d.next();return u.join(`\r
`)};function Qa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function YC(u){let d="";return ee(u,function(p,m){d+=m,d+=":",d+=p,d+=`\r
`}),d}function tg(u,d,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=YC(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Pe(u,d,p))}function Be(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Be,pt);var Dk=/^https?$/i,bk=["POST","PUT"];n=Be.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kp.g(),this.v=this.o?bC(this.o):bC(Kp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){ZC(this,A);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())p.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bk,d,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of p)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eD(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){ZC(this,A)}};function ZC(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,JC(u),_l(u)}function JC(u){u.A||(u.A=!0,Dt(u,"complete"),Dt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Dt(this,"complete"),Dt(this,"abort"),_l(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?XC(this):this.bb())},n.bb=function(){XC(this)};function XC(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ir(u)!=4||u.Z()!=2)){if(u.u&&ir(u)==4)wC(u.Ea,0,u);else if(Dt(u,"readystatechange"),ir(u)==4){u.h=!1;try{let P=u.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var m;if(m=P===0){var T=String(u.D).match(HC)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!Dk.test(T?T.toLowerCase():"")}p=m}if(p)Dt(u,"complete"),Dt(u,"success");else{u.m=6;try{var A=2<ir(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",JC(u)}}finally{_l(u)}}}}function _l(u,d){if(u.g){eD(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Dt(u,"ready");try{p.onreadystatechange=m}catch{}}}function eD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ir(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),rk(d)}};function tD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Tk(u){let d={};u=(u.g&&2<=ir(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(U(u[m]))continue;var p=b(u[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=d[T]||[];d[T]=A,A.push(p)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ya(u,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||d}function nD(u){this.Aa=0,this.i=[],this.j=new $a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,u),this.cb=Ya("retryDelaySeedMs",1e4,u),this.Wa=Ya("forwardChannelMaxRetries",2,u),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new LC(u&&u.concurrentRequestLimit),this.Da=new Ek,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nD.prototype,n.la=8,n.G=1,n.connect=function(u,d,p,m){bt(0),this.W=u,this.H=d||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=dD(this,null,this.W),Il(this)};function ng(u){if(rD(u),u.G==3){var d=u.U++,p=rr(u.I);if(Pe(p,"SID",u.K),Pe(p,"RID",d),Pe(p,"TYPE","terminate"),Za(u,p),d=new Ur(u,u.j,d),d.L=2,d.v=ml(rr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=hD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fl(d)}lD(u)}function vl(u){u.g&&(ig(u),u.g.cancel(),u.g=null)}function rD(u){vl(u),u.u&&(a.clearTimeout(u.u),u.u=null),wl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Il(u){if(!VC(u.h)&&!u.s){u.s=!0;var d=u.Ga;ka||gC(),Oa||(ka(),Oa=!0),Op.add(d,u),u.B=0}}function Sk(u,d){return UC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ba(g(u.Ga,u,d),uD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new Ur(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),C(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=sD(this,T,d),p=rr(this.I),Pe(p,"RID",u),Pe(p,"CVER",22),this.D&&Pe(p,"X-HTTP-Session-Id",this.D),Za(this,p),A&&(this.O?d="headers="+encodeURIComponent(String(YC(A)))+"&"+d:this.m&&tg(p,this.m,A)),eg(this.h,T),this.Ua&&Pe(p,"TYPE","init"),this.P?(Pe(p,"$req",d),Pe(p,"SID","null"),T.T=!0,Yp(T,p,null)):Yp(T,p,d),this.G=2}}else this.G==3&&(u?iD(this,u):this.i.length==0||VC(this.h)||iD(this))};function iD(u,d){var p;d?p=d.l:p=u.U++;let m=rr(u.I);Pe(m,"SID",u.K),Pe(m,"RID",p),Pe(m,"AID",u.T),Za(u,m),u.m&&u.o&&tg(m,u.m,u.o),p=new Ur(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),d&&(u.i=d.D.concat(u.i)),d=sD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),eg(u.h,p),Yp(p,m,d)}function Za(u,d){u.H&&ee(u.H,function(p,m){Pe(d,m,p)}),u.l&&$C({},function(p,m){Pe(d,m,p)})}function sD(u,d,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var T=u.i;let A=-1;for(;;){let P=["count="+p];A==-1?0<p?(A=T[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ae=!0;for(let at=0;at<p;at++){let Ee=T[at].g,gt=T[at].map;if(Ee-=A,0>Ee)A=Math.max(0,T[at].g-100),Ae=!1;else try{Ck(gt,P,"req"+Ee+"_")}catch{m&&m(gt)}}if(Ae){m=P.join("&");break e}}}return u=u.i.splice(0,p),d.D=u,m}function oD(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;ka||gC(),Oa||(ka(),Oa=!0),Op.add(d,u),u.v=0}}function rg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ba(g(u.Fa,u),uD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,aD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ba(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),vl(this),aD(this))};function ig(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function aD(u){u.g=new Ur(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=rr(u.qa);Pe(d,"RID","rpc"),Pe(d,"SID",u.K),Pe(d,"AID",u.T),Pe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(d,"TO",u.ja),Pe(d,"TYPE","xmlhttp"),Za(u,d),u.m&&u.o&&tg(d,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ml(rr(d)),p.m=null,p.P=!0,kC(p,u)}n.Za=function(){this.C!=null&&(this.C=null,vl(this),rg(this),bt(19))};function wl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function cD(u,d){var p=null;if(u.g==d){wl(u),ig(u),u.g=null;var m=2}else if(Xp(u.h,d))p=d.D,jC(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var T=u.B;m=ll(),Dt(m,new NC(m,p)),Il(u)}else oD(u);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&Sk(u,d)||m==2&&rg(u)))switch(p&&0<p.length&&(d=u.h,d.i=d.i.concat(p)),T){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function uD(u,d){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*d}function xi(u,d){if(u.j.info("Error code "+d),d==2){var p=g(u.fb,u),m=u.Xa;let T=!m;m=new Mi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pl(m,"https"),ml(m),T?Ik(m.toString(),p):wk(m.toString(),p)}else bt(2);u.G=0,u.l&&u.l.sa(d),lD(u),rD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function lD(u){if(u.G=0,u.ka=[],u.l){let d=BC(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function dD(u,d,p){var m=p instanceof Mi?rr(p):new Mi(p);if(m.g!="")d&&(m.g=d+"."+m.g),gl(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new Mi(null);m&&pl(A,m),d&&(A.g=d),T&&gl(A,T),p&&(A.l=p),m=A}return p=u.D,d=u.ya,p&&d&&Pe(m,p,d),Pe(m,"VER",u.la),Za(u,m),m}function hD(u,d,p){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Be(new Wa({eb:p})):new Be(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fD(){}n=fD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function El(){}El.prototype.g=function(u,d){return new Ft(u,d)};function Ft(u,d){pt.call(this),this.g=new nD(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!U(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new zs(this)}w(Ft,pt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){ng(this.g)},Ft.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=qp(u),u=p);d.i.push(new lk(d.Ya++,u)),d.G==3&&Il(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,ng(this.g),delete this.g,Ft.aa.N.call(this)};function pD(u){zp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let p in d){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}w(pD,zp);function gD(){Wp.call(this),this.status=1}w(gD,Wp);function zs(u){this.g=u}w(zs,fD),zs.prototype.ua=function(){Dt(this.g,"a")},zs.prototype.ta=function(u){Dt(this.g,new pD(u))},zs.prototype.sa=function(u){Dt(this.g,new gD)},zs.prototype.ra=function(){Dt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,xv=Rr.createWebChannelTransport=function(){return new El},Mv=Rr.getStatEventTarget=function(){return ll()},Nv=Rr.Event=Ri,nf=Rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,cu=Rr.ErrorCode=dl,MC.COMPLETE="complete",Rv=Rr.EventType=MC,TC.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",pt.prototype.listen=pt.prototype.K,qo=Rr.WebChannel=TC,Vq=Rr.FetchXmlHttpFactory=Wa,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Av=Rr.XhrIo=Be}).apply(typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{});var kR="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var da="10.14.0";var bs=new qn("@firebase/firestore");function uu(){return bs.logLevel}function j(n,...e){if(bs.logLevel<=ce.DEBUG){let t=e.map(yw);bs.debug(`Firestore (${da}): ${n}`,...t)}}function xr(n,...e){if(bs.logLevel<=ce.ERROR){let t=e.map(yw);bs.error(`Firestore (${da}): ${n}`,...t)}}function Zo(n,...e){if(bs.logLevel<=ce.WARN){let t=e.map(yw);bs.warn(`Firestore (${da}): ${n}`,...t)}}function yw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+n;throw xr(e),new Error(e)}function Te(n,e){n||Q()}function J(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var cf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},Vv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Uv=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new cf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new st(e)}},jv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Bv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$v=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Hv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Te(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new $v(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Uq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var uf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Uq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Ce(n,e){return n<e?-1:n>e?1:0}function Jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ht=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ht(0,0))}static max(){return new n(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ue=class n extends lf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},jq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class n extends lf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return jq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ue.fromString(e))}static fromName(e){return new n(Ue.fromString(e).popFirst(5))}static empty(){return new n(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ue(e.slice()))}};var qv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};qv.UNKNOWN_ID=-1;function Bq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new Ts(i,W.empty(),e)}function $q(n){return new Ts(n.readTime,n.key,-1)}var Ts=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),W.empty(),-1)}static max(){return new n(re.max(),W.empty(),-1)}};function Hq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var qq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Au(n){return E(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==qq)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Gq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ru(n){return n.name==="IndexedDbTransactionError"}var mN=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Uf(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function zq(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Wq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PJ=[...Wq,"documentOverlays"],Kq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Qq=Kq,Yq=[...Qq,"indexConfiguration","indexState","indexEntries"];var kJ=[...Yq,"globals"];function OR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vt=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new df(this.data.getIterator())}getIteratorFrom(e){return new df(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},df=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var on=class n{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new n([])}unionWith(e){let t=new vt(qt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hf("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var Zq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(n){if(Te(!!n),typeof n=="string"){let e=0,t=Zq.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(n.seconds),nanos:Ve(n.nanos)}}function Ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}function _w(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vw(n){let e=n.mapValue.fields.__previous_value__;return _w(e)?vw(e):e}function mu(n){let e=Pr(n.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}var zv=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ff=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var rf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_w(n)?4:vN(n)?9007199254740991:_N(n)?10:11:Q()}function Xn(n,e){if(n===e)return!0;let t=Ss(n);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mu(n).isEqual(mu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Pr(i.timestampValue),a=Pr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return wi(i.bytesValue).isEqual(wi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?gu(o)===gu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(OR(o)!==OR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Xn(o[c],a[c])))return!1;return!0}(n,e);default:return Q()}}function yu(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function Xo(n,e){if(n===e)return 0;let t=Ss(n),r=Ss(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ve(s.integerValue||s.doubleValue),c=Ve(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return FR(n.timestampValue,e.timestampValue);case 4:return FR(mu(n),mu(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(s,o){let a=wi(s),c=wi(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Ce(a[l],c[l]);if(h!==0)return h}return Ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ce(Ve(s.latitude),Ve(o.latitude));return a!==0?a:Ce(Ve(s.longitude),Ve(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LR(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,N=Ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:LR(y,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===rf.mapValue&&o===rf.mapValue)return 0;if(s===rf.mapValue)return 1;if(o===rf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){let g=Ce(c[f],h[f]);if(g!==0)return g;let y=Xo(a[c[f]],l[h[f]]);if(y!==0)return y}return Ce(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function FR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=Pr(n),r=Pr(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function LR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Xo(t[i],r[i]);if(s)return s}return Ce(t.length,r.length)}function ea(n){return Wv(n)}function Wv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Pr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Wv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Wv(t.fields[o])}`;return i+"}"}(n.mapValue):Q()}function VR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kv(n){return!!n&&"integerValue"in n}function Iw(n){return!!n&&"arrayValue"in n}function UR(n){return!!n&&"nullValue"in n}function jR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function of(n){return!!n&&"mapValue"in n}function _N(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function du(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=du(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=du(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ht=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(t)}setAll(e){let t=qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=du(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xs(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(du(this.value))}};function IN(n){let e=[];return xs(n.fields,(t,r)=>{let i=new qt([t]);if(of(r)){let s=IN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}var Cn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),Ht.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),Ht.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),Ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ta=class{constructor(e,t){this.position=e,this.inclusive=t}};function BR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),t.key):r=Xo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $R(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var na=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Jq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pf=class{},Je=class n extends pf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Yv(e,t,r):t==="array-contains"?new Xv(e,r):t==="in"?new eI(e,r):t==="not-in"?new tI(e,r):t==="array-contains-any"?new nI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zv(e,r):new Jv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xo(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dn=class n extends pf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wN(n){return n.op==="and"}function EN(n){return Xq(n)&&wN(n)}function Xq(n){for(let e of n.filters)if(e instanceof Dn)return!1;return!0}function Qv(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(EN(n))return n.filters.map(e=>Qv(e)).join(",");{let e=n.filters.map(t=>Qv(t)).join(",");return`${n.op}(${e})`}}function CN(n,e){return n instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CN(o,i.filters[a]),!0):!1}(n,e):void Q()}function DN(n){return n instanceof Je?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(n):n instanceof Dn?function(t){return t.op.toString()+" {"+t.getFilters().map(DN).join(" ,")+"}"}(n):"Filter"}var Yv=class extends Je{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},Zv=class extends Je{constructor(e,t){super(e,"in",t),this.keys=bN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Jv=class extends Je{constructor(e,t){super(e,"not-in",t),this.keys=bN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var Xv=class extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Iw(t)&&yu(t.arrayValue,this.value)}},eI=class extends Je{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}},tI=class extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!yu(this.value.arrayValue,t)}},nI=class extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Iw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yu(this.value.arrayValue,r))}};var rI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function HR(n,e=null,t=[],r=[],i=null,s=null,o=null){return new rI(n,e,t,r,i,s,o)}function ww(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ea(r)).join(",")),e.ue=t}return e.ue}function Ew(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Jq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$R(n.startAt,e.startAt)&&$R(n.endAt,e.endAt)}function iI(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var As=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function eG(n,e,t,r,i,s,o,a){return new As(n,e,t,r,i,s,o,a)}function Cw(n){return new As(n)}function qR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TN(n){return n.collectionGroup!==null}function hu(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new na(s,r))}),t.has(qt.keyField().canonicalString())||e.ce.push(new na(qt.keyField(),r))}return e.ce}function Zn(n){let e=J(n);return e.le||(e.le=tG(e,hu(n))),e.le}function tG(n,e){if(n.limitType==="F")return HR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new na(i.field,s)});let t=n.endAt?new ta(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ta(n.startAt.position,n.startAt.inclusive):null;return HR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sI(n,e){let t=n.filters.concat([e]);return new As(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oI(n,e,t){return new As(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return Ew(Zn(n),Zn(e))&&n.limitType===e.limitType}function SN(n){return`${ww(Zn(n))}|lt:${n.limitType}`}function Go(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DN(i)).join(", ")}]`),Uf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ea(i)).join(",")),`Target(${r})`}(Zn(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of hu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=BR(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,hu(r),i)||r.endAt&&!function(o,a,c){let l=BR(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,hu(r),i))}(n,e)}function nG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AN(n){return(e,t)=>{let r=!1;for(let i of hu(n)){let s=rG(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rG(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Xo(c,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var Ei=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return yN(this.inner)}size(){return this.innerSize}};var iG=new Ge(W.comparator);function kr(){return iG}var RN=new Ge(W.comparator);function lu(...n){let e=RN;for(let t of n)e=e.insert(t.key,t);return e}function NN(n){let e=RN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Es(){return fu()}function MN(){return fu()}function fu(){return new Ei(n=>n.toString(),(n,e)=>n.isEqual(e))}var sG=new Ge(W.comparator),oG=new vt(W.comparator);function pe(...n){let e=oG;for(let t of n)e=e.add(t);return e}var aG=new vt(Ce);function cG(){return aG}function Dw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function xN(n){return{integerValue:""+n}}function uG(n,e){return zq(e)?xN(e):Dw(n,e)}var ra=class{constructor(){this._=void 0}};function lG(n,e,t){return n instanceof ia?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_w(s)&&(s=vw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Rs?kN(n,e):n instanceof Ns?ON(n,e):function(i,s){let o=PN(i,s),a=GR(o)+GR(i.Pe);return Kv(o)&&Kv(i.Pe)?xN(a):Dw(i.serializer,a)}(n,e)}function dG(n,e,t){return n instanceof Rs?kN(n,e):n instanceof Ns?ON(n,e):t}function PN(n,e){return n instanceof sa?function(r){return Kv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ia=class extends ra{},Rs=class extends ra{constructor(e){super(),this.elements=e}};function kN(n,e){let t=FN(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ns=class extends ra{constructor(e){super(),this.elements=e}};function ON(n,e){let t=FN(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var sa=class extends ra{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function GR(n){return Ve(n.integerValue||n.doubleValue)}function FN(n){return Iw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Ns&&i instanceof Ns?Jo(r.elements,i.elements,Xn):r instanceof sa&&i instanceof sa?Xn(r.Pe,i.Pe):r instanceof ia&&i instanceof ia}(n.transform,e.transform)}var aI=class{constructor(e,t){this.version=e,this.transformResults=t}},Mr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function af(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var oa=class{};function LN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _u(n.key,Mr.none()):new Ms(n.key,n.data,Mr.none());{let t=n.data,r=Ht.empty(),i=new vt(qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new er(n.key,r,new on(i.toArray()),Mr.none())}}function fG(n,e,t){n instanceof Ms?function(i,s,o){let a=i.value.clone(),c=WR(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof er?function(i,s,o){if(!af(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=WR(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(VN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function pu(n,e,t,r){return n instanceof Ms?function(s,o,a,c){if(!af(s.precondition,o))return a;let l=s.value.clone(),h=KR(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof er?function(s,o,a,c){if(!af(s.precondition,o))return a;let l=KR(s.fieldTransforms,c,o),h=o.data;return h.setAll(VN(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return af(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function pG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=PN(r.transform,i||null);s!=null&&(t===null&&(t=Ht.empty()),t.set(r.field,s))}return t||null}function zR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jo(r,i,(s,o)=>hG(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ms=class extends oa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},er=class extends oa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function VN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function WR(n,e,t){let r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dG(o,a,t[i]))}return r}function KR(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,lG(s,o,e))}return r}var _u=class extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cI=class extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&fG(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=MN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=LN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,r)=>zR(t,r))&&Jo(this.baseMutations,e.baseMutations,(t,r)=>zR(t,r))}},lI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length);let i=function(){return sG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var dI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ye,_e;function gG(n){switch(n){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function UN(n){if(n===void 0)return xr("GRPC error has no .code"),M.UNKNOWN;switch(n){case Ye.OK:return M.OK;case Ye.CANCELLED:return M.CANCELLED;case Ye.UNKNOWN:return M.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return M.INTERNAL;case Ye.UNAVAILABLE:return M.UNAVAILABLE;case Ye.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ye.NOT_FOUND:return M.NOT_FOUND;case Ye.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ye.ABORTED:return M.ABORTED;case Ye.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ye.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(_e=Ye||(Ye={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var QR=null;function mG(){return new TextEncoder}var yG=new _i([4294967295,4294967295],0);function YR(n){let e=mG().encode(n),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function ZR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _i([t,r],0),new _i([i,s],0)]}var fI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cs(`Invalid padding: ${t}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=_i.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(_i.fromNumber(r)));return i.compare(yG)===1&&(i=new _i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=YR(e),[r,i]=ZR(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=YR(e),[r,i]=ZR(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new Ge(Ce),kr(),pe())}},vu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var Qo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},mf=class{constructor(e,t){this.targetId=e,this.me=t}},yf=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_f=class{constructor(){this.fe=0,this.ge=XR(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),t=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new vu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=XR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kr(),this.qe=JR(),this.Qe=new Ge(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(iI(s))if(r===0){let o=new W(s.path);this.Ue(t,o,Cn.newNoDocument(o,re.min()))}else Te(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}QR?.et(function(h,f,g,y,w){var N,R,k,U,$,X;let xe={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ee=f.unchangedNames;return ee&&(xe.bloomFilter={applied:w===0,hashCount:(N=ee?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(k=(R=ee?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&U!==void 0?U:0,padding:(X=($=ee?.bits)===null||$===void 0?void 0:$.padding)!==null&&X!==void 0?X:0,mightContain:D=>{var _;return(_=y?.mightContain(D))!==null&&_!==void 0&&_}}),xe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=wi(r).toUint8Array()}catch(c){if(c instanceof hf)return Zo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fI(o,i,s)}catch(c){return Zo(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&iI(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Cn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new gf(e,t,this.Qe,this.ke,r);return this.ke=kr(),this.qe=JR(),this.Qe=new Ge(Ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new _f,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vt(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _f),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function JR(){return new Ge(W.comparator)}function XR(){return new Ge(W.comparator)}var _G={asc:"ASCENDING",desc:"DESCENDING"},vG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IG={and:"AND",or:"OR"},gI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mI(n,e){return n.useProto3Json||Uf(e)?e:{value:e}}function vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wG(n,e){return vf(n,e.toTimestamp())}function Jn(n){return Te(!!n),re.fromTimestamp(function(t){let r=Pr(t);return new ht(r.seconds,r.nanos)}(n))}function bw(n,e){return yI(n,e).canonicalString()}function yI(n,e){let t=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function BN(n){let e=Ue.fromString(n);return Te(zN(e)),e}function _I(n,e){return bw(n.databaseId,e.path)}function Pv(n,e){let t=BN(e);if(t.get(1)!==n.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(HN(t))}function $N(n,e){return bw(n.databaseId,e)}function EG(n){let e=BN(n);return e.length===4?Ue.emptyPath():HN(e)}function vI(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HN(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function eN(n,e,t){return{name:_I(n,e),fields:t.value.mapValue.fields}}function CG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:UN(l.code);return new V(h,l.message||"")}(o);t=new yf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pv(n,r.document.name),s=Jn(r.document.updateTime),o=r.document.createTime?Jn(r.document.createTime):re.min(),a=new Ht({mapValue:{fields:r.document.fields}}),c=Cn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Qo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pv(n,r.document),s=r.readTime?Jn(r.readTime):re.min(),o=Cn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Qo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pv(n,r.document),s=r.removedTargetIds||[];t=new Qo([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new hI(i,s),a=r.targetId;t=new mf(a,o)}}return t}function DG(n,e){let t;if(e instanceof Ms)t={update:eN(n,e.key,e.value)};else if(e instanceof _u)t={delete:_I(n,e.key)};else if(e instanceof er)t={update:eN(n,e.key,e.data),updateMask:PG(e.fieldMask)};else{if(!(e instanceof cI))return Q();t={verify:_I(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(n,e.precondition)),t}function bG(n,e){return n&&n.length>0?(Te(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Jn(i.updateTime):Jn(s);return o.isEqual(re.min())&&(o=Jn(s)),new aI(o,i.transformResults||[])}(t,e))):[]}function TG(n,e){return{documents:[$N(n,e.path)]}}function SG(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$N(n,i);let s=function(l){if(l.length!==0)return GN(Dn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:zo(g.field),direction:NG(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=mI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function AG(n){let e=EG(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){let g=qN(f);return g instanceof Dn&&EN(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new na(Wo(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Uf(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new ta(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new ta(y,g)}(t.endAt)),eG(e,i,o,s,a,"F",c,l)}function RG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Wo(t.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wo(t.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wo(t.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wo(t.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return Je.create(Wo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Dn.create(t.compositeFilter.filters.map(r=>qN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function NG(n){return _G[n]}function MG(n){return vG[n]}function xG(n){return IG[n]}function zo(n){return{fieldPath:n.canonicalString()}}function Wo(n){return qt.fromServerFormat(n.fieldPath)}function GN(n){return n instanceof Je?function(t){if(t.op==="=="){if(jR(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(UR(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jR(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(UR(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:MG(t.op),value:t.value}}}(n):n instanceof Dn?function(t){let r=t.getFilters().map(i=>GN(i));return r.length===1?r[0]:{compositeFilter:{op:xG(t.op),filters:r}}}(n):Q()}function PG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Iu=class n{constructor(e,t,r,i,s=re.min(),o=re.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var II=class{constructor(e){this.ct=e}};function kG(n){let e=AG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oI(e,e.limit,"L"):e}var If=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),gu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Pr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?vN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_N(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ve(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};If.vt=new If;var wI=class{constructor(){this.un=new EI}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ts.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},EI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vt(Ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Ue.comparator)).toArray()}};var FJ=new Uint8Array(0);var Qn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);var wu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var CI=class{constructor(){this.changes=new Ei(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var bI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pu(r.mutation,i,on.empty(),ht.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=lu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=kr(),o=fu(),a=function(){return fu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof er)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),pu(h.mutation,l,h.mutation.getFieldMask(),ht.now())):o.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new DI(h,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=fu(),i=new Ge((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||on.empty();h=a.applyToLocalView(l,h),r.set(c,h);let f=(i.get(a.batchId)||pe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,f=MN();h.forEach(g=>{if(!s.has(g)){let y=LN(t.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve(Es()),a=-1,c=s;return o.next(l=>x.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,pe())).next(h=>({batchId:a,changes:NN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=lu();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,c=>{let l=function(f,g){return new As(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Cn.newInvalidDocument(h)))});let a=lu();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&pu(h.mutation,l,on.empty(),ht.now()),Bf(t,l)&&(a=a.insert(c,l))}),a})}};var TI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:kG(i.bundledQuery),readTime:Jn(i.readTime)}}(t)),x.resolve()}};var SI=class{constructor(){this.overlays=new Ge(W.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Es();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Es(),s=t.length+1,o=new W(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ge((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Es(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Es(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dI(t,r));let s=this.Ir.get(t);s===void 0&&(s=pe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var AI=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Eu=class{constructor(){this.Tr=new vt(Ze.Er),this.dr=new vt(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Ue([])),r=new Ze(t,e),i=new Ze(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Ue([])),r=new Ze(t,e),i=new Ze(t,e+1),s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||W.comparator(e.key,t.key)}};var RI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vt(Ze.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new uI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vt(Ce);return t.forEach(i=>{let s=new Ze(i,0),o=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new Ze(new W(s),0),a=new vt(Ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let s=new Ze(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ze(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var NI=class{constructor(e){this.Mr=e,this.docs=function(){return new Ge(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=kr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=kr(),o=t.path,a=new W(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Hq($q(h),r)<=0||(i.has(h.key)||Bf(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MI(this)}getSize(e){return x.resolve(this.size)}},MI=class extends CI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var xI=class{constructor(e){this.persistence=e,this.Nr=new Ei(t=>ww(t),Ew),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Eu,this.targetCount=0,this.kr=wu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var PI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mN(0),this.Kr=!1,this.Kr=!0,this.$r=new AI,this.referenceDelegate=e(this),this.Ur=new xI(this),this.indexManager=new wI,this.remoteDocumentCache=function(i){return new NI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new II(t),this.Gr=new TI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new RI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new kI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},kI=class extends Gv{constructor(e){super(),this.currentSequenceNumber=e}},OI=class n{constructor(e){this.persistence=e,this.Jr=new Eu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var FI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pe(),i=pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var LI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var VI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yA()?8:Gq(rt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new LI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(uu()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(uu()<=ce.DEBUG&&j("QueryEngine","Query:",Go(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(uu()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(t))):x.resolve())}Yi(e,t){if(qR(t))return x.resolve(null);let r=Zn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=oI(t,null,"F"),r=Zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,oI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return qR(t)||i.isEqual(re.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?x.resolve(null):(uu()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Go(t)),this.rs(e,o,t,Bq(i,-1)).next(a=>a))})}ts(e,t){let r=new vt(AN(e));return t.forEach((i,s)=>{Bf(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return uu()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Go(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ts.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var UI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ge(Ce),this._s=new Ei(s=>ww(s),Ew),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function OG(n,e,t,r){return new UI(n,e,t,r)}function WN(n,e){return E(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=pe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function FG(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(c,w)).next(N=>{let R=l.docVersions.get(w);Te(R!==null),N.version.compareTo(R)<0&&(f.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KN(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function LG(n,e){let t=J(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(s,y))});let c=kr(),l=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(VG(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function VG(n,e,t){let r=pe(),i=pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=kr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function UG(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jG(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Iu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function jI(n,e,t){return E(this,null,function*(){let r=J(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ru(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function tN(n,e,t){let r=J(n),i=re.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let f=J(c),g=f._s.get(h);return g!==void 0?x.resolve(f.os.get(g)):f.Ur.getTargetData(l,h)}(r,o,Zn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:re.min(),t?s:pe())).next(a=>(BG(r,nG(e),a),{documents:a,Ts:s})))}function BG(n,e,t){let r=n.us.get(e)||re.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var wf=class{constructor(){this.activeTargetIds=cG()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var BI=class{constructor(){this.so=new wf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $I=class{_o(e){}shutdown(){}};var Ef=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sf=null;function kv(){return sf===null?sf=function(){return 268435456+Math.round(2147483648*Math.random())}():sf++,"0x"+sf.toString(16)}var $G={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var HI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _t="WebChannelConnection",qI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=kv(),c=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(j("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Zo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=$G[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=kv();return new Promise((o,a)=>{let c=new Av;c.setWithCredentials(!0),c.listenOnce(Rv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cu.NO_ERROR:let h=c.getResponseJson();j(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case cu.TIMEOUT:j(_t,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:let f=c.getStatus();if(j(_t,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let w=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(y.status);a(new V(w,y.message))}else a(new V(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{j(_t,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(_t,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=kv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xv(),a=Mv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");j(_t,`Creating RPC '${e}' stream ${i}: ${h}`,c);let f=o.createWebChannel(h,c),g=!1,y=!1,w=new HI({Io:R=>{y?j(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(j(_t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),j(_t,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},To:()=>f.close()}),N=(R,k,U)=>{R.listen(k,$=>{try{U($)}catch(X){setTimeout(()=>{throw X},0)}})};return N(f,qo.EventType.OPEN,()=>{y||(j(_t,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),N(f,qo.EventType.CLOSE,()=>{y||(y=!0,j(_t,`RPC '${e}' stream ${i} transport closed`),w.So())}),N(f,qo.EventType.ERROR,R=>{y||(y=!0,Zo(_t,`RPC '${e}' stream ${i} transport errored:`,R),w.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(f,qo.EventType.MESSAGE,R=>{var k;if(!y){let U=R.data[0];Te(!!U);let $=U,X=$.error||((k=$[0])===null||k===void 0?void 0:k.error);if(X){j(_t,`RPC '${e}' stream ${i} received error:`,X);let xe=X.status,ee=function(v){let C=Ye[v];if(C!==void 0)return UN(C)}(xe),D=X.message;ee===void 0&&(ee=M.INTERNAL,D="Unknown error status: "+xe+" with message "+X.message),y=!0,w.So(new V(ee,D)),f.close()}else j(_t,`RPC '${e}' stream ${i} received:`,U),w.bo(U)}}),N(a,Nv.STAT_EVENT,R=>{R.stat===nf.PROXY?j(_t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===nf.NOPROXY&&j(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function Ov(){return typeof document<"u"?document:null}function $f(n){return new gI(n,!0)}var Cf=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Df=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Cf(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},GI=class extends Df{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CG(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Jn(o.readTime):re.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=vI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=iI(c)?{documents:TG(s,c)}:{query:SG(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jN(s,o.resumeToken);let l=mI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=vf(s,o.snapshotVersion.toTimestamp());let l=mI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=RG(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=vI(this.serializer),t.removeTarget=e,this.a_(t)}},zI=class extends Df{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bG(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=vI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>DG(this.serializer,r))};this.a_(t)}};var WI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,yI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},KI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var QI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>E(this,null,function*(){Ps(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let l=J(c);l.L_.add(4),yield Nu(l),l.q_.set("Unknown"),l.L_.delete(4),yield Hf(l)})}(this))}))}),this.q_=new KI(r,i)}};function Hf(n){return E(this,null,function*(){if(Ps(n))for(let e of n.B_)yield e(!0)})}function Nu(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function QN(n,e){let t=J(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Rw(t)?Aw(t):ha(t).r_()&&Sw(t,e))}function Tw(n,e){let t=J(n),r=ha(t);t.N_.delete(e),r.r_()&&YN(t,e),t.N_.size===0&&(r.r_()?r.o_():Ps(t)&&t.q_.set("Unknown"))}function Sw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ha(n).A_(e)}function YN(n,e){n.Q_.xe(e),ha(n).R_(e)}function Aw(n){n.Q_=new pI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ha(n).start(),n.q_.v_()}function Rw(n){return Ps(n)&&!ha(n).n_()&&n.N_.size>0}function Ps(n){return J(n).L_.size===0}function ZN(n){n.Q_=void 0}function HG(n){return E(this,null,function*(){n.q_.set("Online")})}function qG(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{Sw(n,e)})})}function GG(n,e){return E(this,null,function*(){ZN(n),Rw(n)?(n.q_.M_(e),Aw(n)):n.q_.set("Unknown")})}function zG(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof yf&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bf(n,r)}else if(e instanceof Qo?n.Q_.Ke(e):e instanceof mf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(re.min()))try{let r=yield KN(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),YN(s,c);let f=new Iu(h.target,c,l,h.sequenceNumber);Sw(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield bf(n,r)}})}function bf(n,e,t){return E(this,null,function*(){if(!Ru(e))throw e;n.L_.add(1),yield Nu(n),n.q_.set("Offline"),t||(t=()=>KN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Hf(n)}))})}function JN(n,e){return e().catch(t=>bf(n,t,e))}function qf(n){return E(this,null,function*(){let e=J(n),t=Ci(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WG(e);)try{let i=yield UG(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,KG(e,i)}catch(i){yield bf(e,i)}XN(e)&&eM(e)})}function WG(n){return Ps(n)&&n.O_.length<10}function KG(n,e){n.O_.push(e);let t=Ci(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XN(n){return Ps(n)&&!Ci(n).n_()&&n.O_.length>0}function eM(n){Ci(n).start()}function QG(n){return E(this,null,function*(){Ci(n).p_()})}function YG(n){return E(this,null,function*(){let e=Ci(n);for(let t of n.O_)e.m_(t.mutations)})}function ZG(n,e,t){return E(this,null,function*(){let r=n.O_.shift(),i=lI.from(r,e,t);yield JN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qf(n)})}function JG(n,e){return E(this,null,function*(){e&&Ci(n).V_&&(yield function(r,i){return E(this,null,function*(){if(function(o){return gG(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Ci(r).s_(),yield JN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield qf(r)}})}(n,e)),XN(n)&&eM(n)})}function nN(n,e){return E(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Ps(t);t.L_.add(3),yield Nu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Hf(t)})}function XG(n,e){return E(this,null,function*(){let t=J(n);e?(t.L_.delete(2),yield Hf(t)):e||(t.L_.add(2),yield Nu(t),t.q_.set("Unknown"))})}function ha(n){return n.K_||(n.K_=function(t,r,i){let s=J(t);return s.w_(),new GI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:HG.bind(null,n),Ro:qG.bind(null,n),mo:GG.bind(null,n),d_:zG.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),Rw(n)?Aw(n):n.q_.set("Unknown")):(yield n.K_.stop(),ZN(n))}))),n.K_}function Ci(n){return n.U_||(n.U_=function(t,r,i){let s=J(t);return s.w_(),new zI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QG.bind(null,n),mo:JG.bind(null,n),f_:YG.bind(null,n),g_:ZG.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.U_.s_(),yield qf(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var YI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Nw(n,e){if(xr("AsyncQueue",`${e}: ${n}`),Ru(n))return new V(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Tf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=lu(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Sf=class{constructor(){this.W_=new Ge(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},aa=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Tf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ZI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},JI=class{constructor(){this.queries=rN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=J(t),s=i.queries;i.queries=rN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function rN(){return new Ei(n=>SN(n),jf)}function ez(n,e){return E(this,null,function*(){let t=J(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new ZI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Nw(o,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Mw(t)})}function tz(n,e){return E(this,null,function*(){let t=J(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function nz(n,e){let t=J(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Mw(t)}function rz(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Mw(n){n.Y_.forEach(e=>{e.next()})}var XI,iN;(iN=XI||(XI={})).ea="default",iN.Cache="cache";var ew=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==XI.Cache}};var Af=class{constructor(e){this.key=e}},Rf=class{constructor(e){this.key=e}},tw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=AN(e),this.Ra=new Tf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Sf,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let g=i.get(h),y=Bf(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?w!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(g,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,f)=>function(y,w){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return N(y)-N(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new aa(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Rf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Af(r))}),t}ba(e){this.Ta=e.Ts,this.da=pe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return aa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},nw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},rw=class{constructor(e){this.key=e,this.va=!1}},iw=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ei(a=>SN(a),jf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(W.comparator),this.Na=new Map,this.La=new Eu,this.Ba={},this.ka=new Map,this.qa=wu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function iz(n,e,t=!0){return E(this,null,function*(){let r=oM(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield tM(r,e,t,!0),i})}function sz(n,e){return E(this,null,function*(){let t=oM(n);yield tM(t,e,!0,!1)})}function tM(n,e,t,r){return E(this,null,function*(){let i=yield jG(n.localStore,Zn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield oz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&QN(n.remoteStore,i),a})}function oz(n,e,t,r,i){return E(this,null,function*(){n.Ka=(f,g,y)=>function(N,R,k,U){return E(this,null,function*(){let $=R.view.ma(k);$.ns&&($=yield tN(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,$)));let X=U&&U.targetChanges.get(R.targetId),xe=U&&U.targetMismatches.get(R.targetId)!=null,ee=R.view.applyChanges($,N.isPrimaryClient,X,xe);return oN(N,R.targetId,ee.wa),ee.snapshot})}(n,f,g,y);let s=yield tN(n.localStore,e,!0),o=new tw(e,s.Ts),a=o.ma(s.documents),c=vu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);oN(n,t,l.wa);let h=new nw(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function az(n,e,t){return E(this,null,function*(){let r=J(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Tw(r.remoteStore,i.targetId),sw(r,i.targetId)}).catch(Au))):(sw(r,i.targetId),yield jI(r.localStore,i.targetId,!0))})}function cz(n,e){return E(this,null,function*(){let t=J(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Tw(t.remoteStore,r.targetId))})}function uz(n,e,t){return E(this,null,function*(){let r=mz(n);try{let i=yield function(o,a){let c=J(o),l=ht.now(),h=a.reduce((y,w)=>y.add(w.key),pe()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=kr(),N=pe();return c.cs.getEntries(y,h).next(R=>{w=R,w.forEach((k,U)=>{U.isValidDocument()||(N=N.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(R=>{f=R;let k=[];for(let U of a){let $=pG(U,f.get(U.key).overlayedDocument);$!=null&&k.push(new er(U.key,$,IN($.value.mapValue),Mr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{g=R;let k=R.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:g.batchId,changes:NN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ge(Ce)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Mu(r,i.changes),yield qf(r.remoteStore)}catch(i){let s=Nw(i,"Failed to persist write");t.reject(s)}})}function nM(n,e){return E(this,null,function*(){let t=J(n);try{let r=yield LG(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),yield Mu(t,r,e)}catch(r){yield Au(r)}})}function sN(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=J(o);c.onlineState=a;let l=!1;c.queries.forEach((h,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&Mw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lz(n,e,t){return E(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ge(W.comparator);o=o.insert(s,Cn.newNoDocument(s,re.min()));let a=pe().add(s),c=new gf(re.min(),new Map,new Ge(Ce),o,a);yield nM(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),xw(r)}else yield jI(r.localStore,e,!1).then(()=>sw(r,e,t)).catch(Au)})}function dz(n,e){return E(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield FG(t.localStore,e);iM(t,r,null),rM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mu(t,i)}catch(i){yield Au(i)}})}function hz(n,e,t){return E(this,null,function*(){let r=J(n);try{let i=yield function(o,a){let c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Te(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);iM(r,e,t),rM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mu(r,i)}catch(i){yield Au(i)}})}function rM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function iM(n,e,t){let r=J(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function sw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||sM(n,r)})}function sM(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Tw(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),xw(n))}function oN(n,e,t){for(let r of t)r instanceof Af?(n.La.addReference(r.key,e),fz(n,r)):r instanceof Rf?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||sM(n,r.key)):Q()}function fz(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),xw(n))}function xw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Ue.fromString(e)),r=n.qa.next();n.Na.set(r,new rw(t)),n.Oa=n.Oa.insert(t,r),QN(n.remoteStore,new Iu(Zn(Cw(t.path)),r,"TargetPurposeLimboResolution",mN.oe))}}function Mu(n,e,t){return E(this,null,function*(){let r=J(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=FI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return E(this,null,function*(){let h=J(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Ru(f))throw f;j("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=h.os.get(g),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(g,N)}}})}(r.localStore,s))})}function pz(n,e){return E(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield WN(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mu(t,r.hs)}})}function gz(n,e){let t=J(n),r=t.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function oM(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lz.bind(null,e),e.Ca.d_=nz.bind(null,e.eventManager),e.Ca.$a=rz.bind(null,e.eventManager),e}function mz(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hz.bind(null,e),e}var aN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=$f(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return OG(this.persistence,new VI,t.initialUser,this.serializer)}Ga(t){return new PI(OI.Zr,this.serializer)}Wa(t){return new BI}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var yz=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pz.bind(null,this.syncEngine),yield XG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new JI}()}createDatastore(t){let r=$f(t.databaseInfo.databaseId),i=function(o){return new qI(o)}(t.databaseInfo);return function(o,a,c,l){return new WI(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new QI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>sN(this.syncEngine,r,0),function(){return Ef.D()?new Ef:new $I}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,f){let g=new iw(s,o,a,c,l,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(s){return E(this,null,function*(){let o=J(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Nu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ow=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var aw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>E(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Nw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Fv(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield WN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function cN(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _z(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nN(e.remoteStore,i)),n._onlineComponents=e})}function _z(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Fv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Zo("Error using user provided cache. Falling back to memory cache: "+t),yield Fv(n,new aN)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Fv(n,new aN);return n._offlineComponents})}function aM(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield cN(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield cN(n,new yz))),n._onlineComponents})}function vz(n){return aM(n).then(e=>e.syncEngine)}function uN(n){return E(this,null,function*(){let e=yield aM(n),t=e.eventManager;return t.onListen=iz.bind(null,e.syncEngine),t.onUnlisten=az.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cz.bind(null,e.syncEngine),t})}function cM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lN=new Map;function uM(n,e,t){if(!t)throw new V(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Iz(n,e,t,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dN(n){if(!W.isDocumentKey(n))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hN(n){if(W.isDocumentKey(n))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function vi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Gf(n);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Nf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Iz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ca=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lv;switch(r.type){case"firstParty":return new Bv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=lN.get(t);r&&(j("ComponentProvider","Removing Datastore"),lN.delete(t),r.terminate())}(this),Promise.resolve()}};function lM(n,e,t,r={}){var i;let s=(n=vi(n,ca))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=st.MOCK_USER;else{a=Mh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new st(l)}n._authCredentials=new Vv(new cf(a,c))}}var ua=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ii=class n extends ua{constructor(e,t,r){super(e,t,Cw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function dM(n,e,...t){if(n=We(n),uM("collection","path",e),n instanceof ca){let r=Ue.fromString(e,...t);return hN(r),new Ii(n,null,r)}{if(!(n instanceof kt||n instanceof Ii))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return hN(r),new Ii(n.firestore,null,r)}}function Pw(n,e,...t){if(n=We(n),arguments.length===1&&(e=uf.newId()),uM("doc","path",e),n instanceof ca){let r=Ue.fromString(e,...t);return dN(r),new kt(n,null,new W(r))}{if(!(n instanceof kt||n instanceof Ii))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return dN(r),new kt(n.firestore,n instanceof Ii?n.converter:null,new W(r))}}var Mf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Cf(this,"async_queue_retry"),this.Vu=()=>{let r=Ov();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Ov();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ov();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ru(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=YI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function fN(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Di=class extends ca{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mf(e),this._firestoreClient=void 0,yield e}})}};function hM(n,e){let t=typeof n=="object"?n:hi(),r=typeof n=="string"?n:e||"(default)",i=ps(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Nh("firestore");s&&lM(i,...s)}return i}function fM(n){if(n._terminated)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wz(n),n._firestoreClient}function wz(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new zv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,cM(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new aw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Cu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var la=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Du=class{constructor(e){this._methodName=e}};var bu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var Tu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Ez=/^__.*__$/,cw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new er(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ms(e,this.data,t,this.fieldTransforms)}},xf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new er(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function pM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var uw=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pM(this.Cu)&&Ez.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},lw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$f(e)}Qu(e,t,r,i=!1){return new uw({Cu:e,methodName:t,qu:r,path:qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function kw(n){let e=n._freezeSettings(),t=$f(n._databaseId);return new lw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cz(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Ow("Data must be an object, but it was:",o,r);let a=gM(r,o),c,l;if(s.merge)c=new on(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let f of s.mergeFields){let g=dw(e,f,t);if(!o.contains(g))throw new V(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yM(h,g)||h.push(g)}c=new on(h),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new cw(new Ht(a),c,l)}var Pf=class n extends Du{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Dz(n,e,t,r){let i=n.Qu(1,e,t);Ow("Data must be an object, but it was:",i,r);let s=[],o=Ht.empty();xs(r,(c,l)=>{let h=Fw(e,c,t);l=We(l);let f=i.Nu(h);if(l instanceof Pf)s.push(h);else{let g=xu(l,f);g!=null&&(s.push(h),o.set(h,g))}});let a=new on(s);return new xf(o,a,i.fieldTransforms)}function bz(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[dw(e,r,t)],c=[i];if(s.length%2!=0)throw new V(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(dw(e,s[g])),c.push(s[g+1]);let l=[],h=Ht.empty();for(let g=a.length-1;g>=0;--g)if(!yM(l,a[g])){let y=a[g],w=c[g];w=We(w);let N=o.Nu(y);if(w instanceof Pf)l.push(y);else{let R=xu(w,N);R!=null&&(l.push(y),h.set(y,R))}}let f=new on(l);return new xf(h,f,o.fieldTransforms)}function Tz(n,e,t,r=!1){return xu(t,n.Qu(r?4:3,e))}function xu(n,e){if(mM(n=We(n)))return Ow("Unsupported field value:",e,n),gM(n,e);if(n instanceof Du)return function(r,i){if(!pM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=xu(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ht.fromDate(r);return{timestampValue:vf(i.serializer,s)}}if(r instanceof ht){let s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vf(i.serializer,s)}}if(r instanceof bu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cu)return{bytesValue:jN(i.serializer,r._byteString)};if(r instanceof kt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Dw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gf(r)}`)}(n,e)}function gM(n,e){let t={};return yN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(n,(r,i)=>{let s=xu(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function mM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof bu||n instanceof Cu||n instanceof kt||n instanceof Du||n instanceof Tu)}function Ow(n,e,t){if(!mM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Gf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function dw(n,e,t){if((e=We(e))instanceof la)return e._internalPath;if(typeof e=="string")return Fw(n,e);throw kf("Field path arguments must be of type string or ",n,!1,void 0,t)}var Sz=new RegExp("[~\\*/\\[\\]]");function Fw(n,e,t){if(e.search(Sz)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kf(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(M.INVALID_ARGUMENT,a+n+c)}function yM(n,e){return n.some(t=>t.isEqual(e))}var Of=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Lw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},hw=class extends Of{data(){return super.data()}};function Lw(n,e){return typeof e=="string"?Fw(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}function Az(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Su=class{},fw=class extends Su{};function _M(n,e,...t){let r=[];e instanceof Su&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof pw).length,a=s.filter(c=>c instanceof Ff).length;if(o>1||o>0&&a>0)throw new V(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ff=class n extends fw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return IM(e._query,t),new ua(e.firestore,e.converter,sI(e._query,t))}_parse(e){let t=kw(e.firestore);return function(s,o,a,c,l,h,f){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gN(f,h);let y=[];for(let w of f)y.push(pN(c,s,w));g={arrayValue:{values:y}}}else g=pN(c,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gN(f,h),g=Tz(a,o,f,h==="in"||h==="not-in");return Je.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function vM(n,e,t){let r=e,i=Lw("where",n);return Ff._create(i,r,t)}var pw=class n extends Su{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)IM(o,c),o=sI(o,c)}(e._query,t),new ua(e.firestore,e.converter,sI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pN(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new V(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&t.indexOf("/")!==-1)throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ue.fromString(t));if(!W.isDocumentKey(r))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return VR(n,new W(r))}if(t instanceof kt)return VR(n,t._key);throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(t)}.`)}function gN(n,e){if(!Array.isArray(n)||n.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IM(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var gw=class{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xs(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new Tu(s)}convertGeoPoint(e){return new bu(Ve(e.latitude),Ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){let t=Pr(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ue.fromString(e);Te(zN(r));let i=new ff(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(t)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Rz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ds=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lf=class extends Of{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Lw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Yo=class extends Lf{data(e={}){return super.data(e)}},mw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yo(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Nz(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Nz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var Vf=class extends gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}};function wM(n,e,t,...r){n=vi(n,kt);let i=vi(n.firestore,Di),s=kw(i),o;return o=typeof(e=We(e))=="string"||e instanceof la?bz(s,"updateDoc",n._key,e,t,r):Dz(s,"updateDoc",n._key,e),Uw(i,[o.toMutation(n._key,Mr.exists(!0))])}function EM(n){return Uw(vi(n.firestore,Di),[new _u(n._key,Mr.none())])}function CM(n,e){let t=vi(n.firestore,Di),r=Pw(n),i=Rz(n.converter,e);return Uw(t,[Cz(kw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}function Vw(n,...e){var t,r,i;n=We(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fN(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,h;if(n instanceof kt)l=vi(n.firestore,Di),h=Cw(n._key.path),c={next:f=>{e[o]&&e[o](Mz(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=vi(n,ua);l=vi(f.firestore,Di),h=f._query;let g=new Vf(l);c={next:y=>{e[o]&&e[o](new mw(l,g,f,y))},error:e[o+1],complete:e[o+2]},Az(n._query)}return function(g,y,w,N){let R=new ow(N),k=new ew(y,R,w);return g.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return ez(yield uN(g),k)})),()=>{R.Za(),g.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return tz(yield uN(g),k)}))}}(fM(l),h,a,c)}function Uw(n,e){return function(r,i){let s=new Nr;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return uz(yield vz(r),i,s)})),s.promise}(fM(n),e)}function Mz(n,e,t){let r=t.docs.get(e._key),i=new Vf(n);return new Lf(n,i,e._key,r,new Ds(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){da=i})(Wn),zn(new Pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Di(new Uv(r.getProvider("auth-internal")),new Hv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ff(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Le(kR,"4.7.3",e),Le(kR,"4.7.3","esm2017")})();var zf=function(){return zf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},zf.apply(this,arguments)};var kz={includeMetadataChanges:!1};function jw(n,e){return e===void 0&&(e=kz),new he(function(t){var r=Vw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function DM(n){return jw(n,{includeMetadataChanges:!0})}function bM(n,e){return e===void 0&&(e={}),DM(n).pipe(ie(function(t){return Bw(t,e)}))}function Bw(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:zf(zf({},r),(t={},t[e.idField]=n.id,t))}function TM(n){return jw(n,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function SM(n,e){return e===void 0&&(e={}),TM(n).pipe(ie(function(t){return t.map(function(r){return Bw(r,e)})}))}var Or=class{constructor(e){return e}},AM="firestore",$w=class{constructor(){return ms(AM)}};var Hw=new q("angularfire2.firestore-instances");function Oz(n,e){let t=Bo(AM,n,e);return t&&new Or(t)}function Fz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Or(r)}}var Lz={provide:$w,deps:[[new ze,Hw]]},Vz={provide:Or,useFactory:Oz,deps:[[new ze,Hw],En]};function RM(n,...e){return Le("angularfire",br.full,"fst"),Jt([Vz,Lz,{provide:Hw,useFactory:Fz(n),multi:!0,deps:[De,yt,pi,Tr,[new ze,ws],[new ze,fi],...e]}])}var Pu=dt(SM,!0);var qw=dt(bM,!0);var Gw=dt(CM,!0);var ks=dt(dM,!0);var zw=dt(EM,!0);var Os=dt(Pw,!0);var NM=dt(hM,!0);var Ww=dt(_M,!0);var Kw=dt(wM,!0);var Wf=dt(vM,!0);var xM="@firebase/database",PM="1.0.8";var zE="";function Uz(n){zE=n}var nE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Uo(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var rE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Hn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var dx=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nE(e)}}catch{}return new rE},Ls=dx("localStorage"),iE=dx("sessionStorage");var ma=new qn("@firebase/database"),jz=function(){let n=1;return function(){return n++}}(),hx=function(n){let e=DA(n),t=new Sh;t.update(e);let r=t.digest();return Ah.encodeByteArray(r)},zu=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zu.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e},Vs=null,kM=!0,Bz=function(n,e){F(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(ma.logLevel=ce.VERBOSE,Vs=ma.log.bind(ma),e&&iE.set("logging_enabled",!0)):typeof n=="function"?Vs=n:(Vs=null,iE.remove("logging_enabled"))},wt=function(...n){if(kM===!0&&(kM=!1,Vs===null&&iE.get("logging_enabled")===!0&&Bz(!0)),Vs){let e=zu.apply(null,n);Vs(e)}},Wu=function(n){return function(...e){wt(n,...e)}},sE=function(...n){let e="FIREBASE INTERNAL ERROR: "+zu(...n);ma.error(e)},Lr=function(...n){let e=`FIREBASE FATAL ERROR: ${zu(...n)}`;throw ma.error(e),new Error(e)},Gt=function(...n){let e="FIREBASE WARNING: "+zu(...n);ma.warn(e)},$z=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fx=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Hz=function(n){if($n()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},_a="[MIN_NAME]",Us="[MAX_NAME]",ba=function(n,e){if(n===e)return 0;if(n===_a||e===Us)return-1;if(e===_a||n===Us)return 1;{let t=OM(n),r=OM(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},qz=function(n,e){return n===e?0:n<e?-1:1},ku=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+it(e))},WE=function(n){if(typeof n!="object"||n===null)return it(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=it(e[r]),t+=":",t+=WE(n[e[r]]);return t+="}",t},px=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function un(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var gx=function(n){F(!fx(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(h.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},Gz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var Wz=new RegExp("^-?(0*)\\d{1,10}$"),Kz=-2147483648,Qz=2147483647,OM=function(n){if(Wz.test(n)){let e=Number(n);if(e>=Kz&&e<=Qz)return e}return null},Ku=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Gt("Exception was thrown by user callback.",t),e},Math.floor(0))}},Yz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Uu=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var oE=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var aE=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(e)}},ju=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Qf="5",mx="v",yx="s",_x="r",vx="f",Ix=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wx="ls",Ex="p",cE="ac",Cx="websocket",Dx="long_polling";var Yf=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ls.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ls.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Zz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function bx(n,e,t){F(typeof e=="string","typeof type must == string"),F(typeof t=="object","typeof params must == object");let r;if(e===Cx)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Dx)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Zz(n)&&(t.ns=n.namespace);let i=[];return un(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var uE=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Hn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return hA(this.counters_)}};var Qw={},Yw={};function KE(n){let e=n.toString();return Qw[e]||(Qw[e]=new uE),Qw[e]}function Jz(n,e){let t=n.toString();return Yw[t]||(Yw[t]=e()),Yw[t]}var lE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ku(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var FM="start",Xz="close",eW="pLPCommand",tW="pRTLPCB",Tx="id",Sx="pw",Ax="ser",nW="cb",rW="seg",iW="ts",sW="d",oW="dframe",Rx=1870,Nx=30,aW=Rx-Nx,cW=25e3,uW=3e4,dE=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wu(e),this.stats_=KE(t),this.urlFn=c=>(this.appCheckToken&&(c[cE]=this.appCheckToken),bx(t,Dx,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uW)),Hz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hE((...s)=>{let[o,a,c,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===FM)this.id=a,this.password=c;else if(o===Xz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[FM]="t",r[Ax]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[nW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mx]=Qf,this.transportSessionId&&(r[yx]=this.transportSessionId),this.lastSessionId&&(r[wx]=this.lastSessionId),this.applicationId&&(r[Ex]=this.applicationId),this.appCheckToken&&(r[cE]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ix.test(location.hostname)&&(r[_x]=vx);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return $n()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Gz()&&!zz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=it(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=b_(t),i=px(r,aW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if($n())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[oW]="t",r[Tx]=e,r[Sx]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=it(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},hE=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,$n())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jz(),window[eW+this.uniqueCallbackIdentifier]=e,window[tW+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){wt("frame writing exception"),a.stack&&wt(a.stack),wt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||wt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Tx]=this.myID,e[Sx]=this.myPW,e[Ax]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Nx+r.length<=Rx;){let o=this.pendingSegs.shift();r=r+"&"+rW+i+"="+o.seg+"&"+iW+i+"="+o.ts+"&"+sW+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(cW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){$n()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{wt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var lW=16384,dW=45e3,Zf=null;typeof MozWebSocket<"u"?Zf=MozWebSocket:typeof WebSocket<"u"&&(Zf=WebSocket);var Ou=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wu(this.connId),this.stats_=KE(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[mx]=Qf,!$n()&&typeof location<"u"&&location.hostname&&Ix.test(location.hostname)&&(a[_x]=vx),r&&(a[yx]=r),i&&(a[wx]=i),s&&(a[cE]=s),o&&(a[Ex]=o),bx(t,Cx,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ls.set("previous_websocket_failure",!0);try{let i;if($n()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Qf}/${zE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Zf!==null&&!n.forceDisallow_}static previouslyFailed(){return Ls.isInMemoryStorage||Ls.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ls.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Uo(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(F(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=it(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=px(r,lW);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dW))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),hW=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[dE,Ou]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Ou&&Ou.isAvailable(),i=r&&!Ou.previouslyFailed();if(t.webSocketOnly&&(r||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ou];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),fW=6e4,pW=5e3,gW=10*1024,mW=100*1024,Zw="t",LM="d",yW="s",VM="r",_W="e",UM="o",jM="a",BM="n",$M="p",vW="h",fE=class{constructor(e,t,r,i,s,o,a,c,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wu("c:"+this.id+":"),this.transportManager_=new hW(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Uu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Zw in e){let t=e[Zw];t===jM?this.upgradeIfSecondaryHealthy_():t===VM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===UM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=ku("t",e),r=ku("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$M,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=ku("t",e),r=ku("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=ku(Zw,e);if(LM in e){let r=e[LM];if(t===vW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===BM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===yW?this.onConnectionShutdown_(r):t===VM?this.onReset_(r):t===_W?sE("Server Error: "+r):t===UM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sE("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qf!==r&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Uu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$M,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ls.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Jf=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Xf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var ep=class n extends Xf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var HM=32,qM=768,Me=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Se(){return new Me("")}function ve(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ti(n){return n.pieces_.length-n.pieceNum_}function ke(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Me(n.pieces_,e)}function Mx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function IW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function xx(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Px(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Me(e,0)}function ot(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Me(t,0)}function me(n){return n.pieceNum_>=n.pieces_.length}function an(n,e){let t=ve(n),r=ve(e);if(t===null)return e;if(t===r)return an(ke(n),ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function kx(n,e){if(Ti(n)!==Ti(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Tn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ti(n)>Ti(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var pE=class{constructor(e,t){this.errorPrefix_=t,this.parts_=xx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zc(this.parts_[r]);Ox(this)}};function wW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Zc(e),Ox(n)}function EW(n){let e=n.parts_.pop();n.byteLength_-=Zc(e),n.parts_.length>0&&(n.byteLength_-=1)}function Ox(n){if(n.byteLength_>qM)throw new Error(n.errorPrefix_+"has a key path longer than "+qM+" bytes ("+n.byteLength_+").");if(n.parts_.length>HM)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+HM+") or object contains a cycle "+Fs(n))}function Fs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var gE=class n extends Xf{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var Fu=1e3,CW=60*5*1e3,GM=30*1e3,DW=1.3,bW=3e4,TW="server_kill",zM=3,QE=(()=>{class n extends Jf{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Wu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fu,this.maxReconnectDelay_=CW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!$n())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gE.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ep.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(it(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new cs,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,h=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Hn(t,"w")){let i=ls(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||wA(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=GM)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=IA(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+it(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):sE("Unrecognized action received from server: "+it(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bW&&(this.reconnectDelay_=Fu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*DW)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},h=function(g){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:h};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new fE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{Gt(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(TW)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Gt(g),l())}}})}interrupt(t){wt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){wt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Qc(this.interruptReasons_)&&(this.reconnectDelay_=Fu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>WE(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Me(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){wt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zM&&(this.reconnectDelay_=GM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){wt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";$n()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+zE.replace(/\./g,"-")]=1,Kc()?t["framework.cordova"]=1:xh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=ep.getInstance().currentlyOnline();return Qc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Ie=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var va=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Ie(_a,e),i=new Ie(_a,t);return this.compare(r,i)!==0}minPost(){return Ie.MIN}};var Kf,tp=class extends va{static get __EMPTY_NODE(){return Kf}static set __EMPTY_NODE(e){Kf=e}compare(e,t){return ba(e.name,t.name)}isDefinedOn(e){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Us,Kf)}makePost(e,t){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,Kf)}toString(){return".key"}},ya=new tp;var pa=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},bn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??cn.EMPTY_NODE,this.right=o??cn.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return cn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return cn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),mE=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new bn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},cn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,bn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pa(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pa(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pa(this.root_,null,this.comparator_,!0,e)}};cn.EMPTY_NODE=new mE;function SW(n,e){return ba(n.name,e.name)}function YE(n,e){return ba(n,e)}var yE;function AW(n){yE=n}var Fx=function(n){return typeof n=="number"?"number:"+gx(n):"string:"+n},Lx=function(n){if(n.isLeafNode()){let e=n.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Hn(e,".sv"),"Priority must be a string or number.")}else F(n===yE||n.isEmpty(),"priority of unexpected type.");F(n===yE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var WM,Ia=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Lx(this.priorityNode_)}static set __childrenNodeConstructor(t){WM=t}static get __childrenNodeConstructor(){return WM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return me(t)?this:ve(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=ve(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Ti(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Fx(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=gx(this.value_):t+=this.value_,this.lazyHash_=hx(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(F(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Vx,Ux;function RW(n){Vx=n}function NW(n){Ux=n}var _E=class extends va{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?ba(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Us,new Ia("[PRIORITY-POST]",Ux))}makePost(e,t){let r=Vx(e);return new Ie(t,new Ia("[PRIORITY-POST]",r))}toString(){return".priority"}},Ct=new _E;var MW=Math.log(2),vE=class{constructor(e){let t=s=>parseInt(Math.log(s)/MW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},np=function(n,e,t,r){n.sort(e);let i=function(c,l){let h=l-c,f,g;if(h===0)return null;if(h===1)return f=n[c],g=t?t(f):f,new bn(g,f.node,bn.BLACK,null,null);{let y=parseInt(h/2,10)+c,w=i(c,y),N=i(y+1,l);return f=n[y],g=t?t(f):f,new bn(g,f.node,bn.BLACK,w,N)}},s=function(c){let l=null,h=null,f=n.length,g=function(w,N){let R=f-w,k=f;f-=w;let U=i(R+1,k),$=n[R],X=t?t($):$;y(new bn(X,$.node,N,null,U))},y=function(w){l?(l.left=w,l=w):(h=w,l=w)};for(let w=0;w<c.count;++w){let N=c.nextBitIsOne(),R=Math.pow(2,c.count-(w+1));N?g(R,bn.BLACK):(g(R,bn.BLACK),g(R,bn.RED))}return h},o=new vE(n.length),a=s(o);return new cn(r||e,a)};var Jw,fa={},wa=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return F(fa&&Ct,"ChildrenNode.ts has not been loaded"),Jw=Jw||new n({".priority":fa},{".priority":Ct}),Jw}get(e){let t=ls(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cn?t:null}hasIndex(e){return Hn(this.indexSet_,e.toString())}addIndex(e,t){F(e!==ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Ie.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=np(r,e.getCompare()):a=fa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let h=Object.assign({},this.indexes_);return h[c]=a,new n(h,l)}addToIndexes(e,t){let r=Yc(this.indexes_,(i,s)=>{let o=ls(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===fa)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Ie.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),np(a,o.getCompare())}else return fa;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Ie(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Yc(this.indexes_,i=>{if(i===fa)return i;{let s=t.get(e.name);return s?i.remove(new Ie(e.name,s)):i}});return new n(r,this.indexSet_)}};var Lu,je=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Lx(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Lu||(Lu=new n(new cn(YE),null,wa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lu}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Lu:r}}getChild(t){let r=ve(t);return r===null?this:this.getImmediateChild(r).getChild(ke(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(F(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Ie(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Lu:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=ve(t);if(i===null)return r;{F(ve(t)!==".priority"||Ti(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ke(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ct,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Fx(this.getPriority().val())+":"),this.forEachChild(Ct,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":hx(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ie(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Ie(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Ie(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qu?-1:0}withIndex(t){if(t===ya||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ya||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ct),s=r.getIterator(Ct),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ya?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),IE=class extends je{constructor(){super(new cn(YE),je.EMPTY_NODE,wa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return je.EMPTY_NODE}isEmpty(){return!1}},Qu=new IE;Object.defineProperties(Ie,{MIN:{value:new Ie(_a,je.EMPTY_NODE)},MAX:{value:new Ie(Us,Qu)}});tp.__EMPTY_NODE=je.EMPTY_NODE;Ia.__childrenNodeConstructor=je;AW(Qu);NW(Qu);var xW=!0;function Et(n,e=null){if(n===null)return je.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Ia(t,Et(e))}if(!(n instanceof Array)&&xW){let t=[],r=!1;if(un(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Et(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Ie(o,c)))}}),t.length===0)return je.EMPTY_NODE;let s=np(t,SW,o=>o.name,YE);if(r){let o=np(t,Ct.getCompare());return new je(s,Et(e),new wa({".priority":o},{".priority":Ct}))}else return new je(s,Et(e),wa.Default)}else{let t=je.EMPTY_NODE;return un(n,(r,i)=>{if(Hn(n,r)&&r.substring(0,1)!=="."){let s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Et(e))}}RW(Et);var wE=class extends va{constructor(e){super(),this.indexPath_=e,F(!me(e)&&ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?ba(e.name,t.name):s}makePost(e,t){let r=Et(e),i=je.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ie(t,i)}maxPost(){let e=je.EMPTY_NODE.updateChild(this.indexPath_,Qu);return new Ie(Us,e)}toString(){return xx(this.indexPath_,0).join("/")}};var EE=class extends va{compare(e,t){let r=e.node.compareTo(t.node);return r===0?ba(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,t){let r=Et(e);return new Ie(t,r)}toString(){return".value"}},PW=new EE;function kW(n){return{type:"value",snapshotNode:n}}function OW(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function FW(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function KM(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function LW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var CE=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_a}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function QM(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Ct?t="$priority":n.index_===PW?t="$value":n.index_===ya?t="$key":(F(n.index_ instanceof wE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=it(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=it(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+it(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=it(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+it(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function YM(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ct&&(e.i=n.index_.toString()),e}var DE=class n extends Jf{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=QM(e._queryParams);this.restRequest_(s+".json",c,(l,h)=>{let f=h;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),ls(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=QM(e._queryParams),r=e._path.toString(),i=new cs;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hs(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Uo(a.responseText)}catch{Gt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Gt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var bE=class{constructor(){this.rootNode_=je.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function rp(){return{value:null,children:new Map}}function jx(n,e,t){if(me(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=ve(e);n.children.has(r)||n.children.set(r,rp());let i=n.children.get(r);e=ke(e),jx(i,e,t)}}function TE(n,e,t){n.value!==null?t(e,n.value):VW(n,(r,i)=>{let s=new Me(e.toString()+"/"+r);TE(i,s,t)})}function VW(n,e){n.children.forEach((t,r)=>{e(r,t)})}var SE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&un(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var ZM=10*1e3,UW=30*1e3,jW=5*60*1e3,AE=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new SE(e);let r=ZM+(UW-ZM)*Math.random();Uu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;un(e,(i,s)=>{s>0&&Hn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Uu(this.reportStats_.bind(this),Math.floor(Math.random()*2*jW))}};var Fr=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Fr||{});function Bx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $x(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Hx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var RE=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fr.ACK_USER_WRITE,this.source=Bx()}operationForChild(e){if(me(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Me(e));return new n(Se(),t,this.revert)}}else return F(ve(this.path)===e,"operationForChild called for unrelated child."),new n(ke(this.path),this.affectedTree,this.revert)}};var Ea=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fr.OVERWRITE}operationForChild(e){return me(this.path)?new n(this.source,Se(),this.snap.getImmediateChild(e)):new n(this.source,ke(this.path),this.snap)}};var ip=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fr.MERGE}operationForChild(e){if(me(this.path)){let t=this.children.subtree(new Me(e));return t.isEmpty()?null:t.value?new Ea(this.source,Se(),t.value):new n(this.source,Se(),t)}else return F(ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Hu=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;let t=ve(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function BW(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(LW(o.childName,o.snapshotNode))}),Vu(n,i,"child_removed",e,r,t),Vu(n,i,"child_added",e,r,t),Vu(n,i,"child_moved",s,r,t),Vu(n,i,"child_changed",e,r,t),Vu(n,i,"value",e,r,t),i}function Vu(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>HW(n,a,c)),o.forEach(a=>{let c=$W(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function $W(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function HW(n,e,t){if(e.childName==null||t.childName==null)throw us("Should only compare child_ events.");let r=new Ie(e.childName,e.snapshotNode),i=new Ie(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function qx(n,e){return{eventCache:n,serverCache:e}}function Bu(n,e,t,r){return qx(new Hu(e,t,r),n.serverCache)}function Gx(n,e,t,r){return qx(n.eventCache,new Hu(e,t,r))}function NE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function js(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Xw,qW=()=>(Xw||(Xw=new cn(qz)),Xw),Ot=class n{constructor(e,t=qW()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return un(e,(r,i)=>{t=t.set(new Me(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Se(),value:this.value};if(me(e))return null;{let r=ve(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ke(e),t);return s!=null?{path:ot(new Me(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{let t=ve(e),r=this.children.get(t);return r!==null?r.subtree(ke(e)):new n(null)}}set(e,t){if(me(e))return new n(t,this.children);{let r=ve(e),s=(this.children.get(r)||new n(null)).set(ke(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=ve(e),r=this.children.get(t);if(r){let i=r.remove(ke(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(me(e))return this.value;{let t=ve(e),r=this.children.get(t);return r?r.get(ke(e)):null}}setTree(e,t){if(me(e))return t;{let r=ve(e),s=(this.children.get(r)||new n(null)).setTree(ke(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Se(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ot(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Se(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(me(e))return null;{let s=ve(e),o=this.children.get(s);return o?o.findOnPath_(ke(e),ot(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Se(),t)}foreachOnPath_(e,t,r){if(me(e))return this;{this.value&&r(t,this.value);let i=ve(e),s=this.children.get(i);return s?s.foreachOnPath_(ke(e),ot(t,i),r):new n(null)}}foreach(e){this.foreach_(Se(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ot(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Sn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ot(null))}};function $u(n,e,t){if(me(e))return new Sn(new Ot(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=an(i,e);return s=s.updateChild(o,t),new Sn(n.writeTree_.set(i,s))}else{let i=new Ot(t),s=n.writeTree_.setTree(e,i);return new Sn(s)}}}function JM(n,e,t){let r=n;return un(t,(i,s)=>{r=$u(r,ot(e,i),s)}),r}function XM(n,e){if(me(e))return Sn.empty();{let t=n.writeTree_.setTree(e,new Ot(null));return new Sn(t)}}function ME(n,e){return Bs(n,e)!=null}function Bs(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(an(t.path,e)):null}function ex(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ct,(r,i)=>{e.push(new Ie(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ie(r,i.value))}),e}function bi(n,e){if(me(e))return n;{let t=Bs(n,e);return t!=null?new Sn(new Ot(t)):new Sn(n.writeTree_.subtree(e))}}function xE(n){return n.writeTree_.isEmpty()}function Ca(n,e){return zx(Se(),n.writeTree_,e)}function zx(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=zx(ot(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(ot(n,".priority"),r)),t}}function Wx(n,e){return Jx(e,n)}function GW(n,e,t,r,i){F(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$u(n.visibleWrites,e,t)),n.lastWriteId=r}function zW(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function WW(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);F(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&KW(a,r.path)?i=!1:Tn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return QW(n),!0;if(r.snap)n.visibleWrites=XM(n.visibleWrites,r.path);else{let a=r.children;un(a,c=>{n.visibleWrites=XM(n.visibleWrites,ot(r.path,c))})}return!0}else return!1}function KW(n,e){if(n.snap)return Tn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Tn(ot(n.path,t),e))return!0;return!1}function QW(n){n.visibleWrites=Kx(n.allWrites,YW,Se()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function YW(n){return n.visible}function Kx(n,e,t){let r=Sn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Tn(t,o)?(a=an(t,o),r=$u(r,a,s.snap)):Tn(o,t)&&(a=an(o,t),r=$u(r,Se(),s.snap.getChild(a)));else if(s.children){if(Tn(t,o))a=an(t,o),r=JM(r,a,s.children);else if(Tn(o,t))if(a=an(o,t),me(a))r=JM(r,Se(),s.children);else{let c=ls(s.children,ve(a));if(c){let l=c.getChild(ke(a));r=$u(r,Se(),l)}}}else throw us("WriteRecord should have .snap or .children")}}return r}function Qx(n,e,t,r,i){if(!r&&!i){let s=Bs(n.visibleWrites,e);if(s!=null)return s;{let o=bi(n.visibleWrites,e);if(xE(o))return t;if(t==null&&!ME(o,Se()))return null;{let a=t||je.EMPTY_NODE;return Ca(o,a)}}}else{let s=bi(n.visibleWrites,e);if(!i&&xE(s))return t;if(!i&&t==null&&!ME(s,Se()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Tn(l.path,e)||Tn(e,l.path))},a=Kx(n.allWrites,o,e),c=t||je.EMPTY_NODE;return Ca(a,c)}}}function ZW(n,e,t){let r=je.EMPTY_NODE,i=Bs(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ct,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=bi(n.visibleWrites,e);return t.forEachChild(Ct,(o,a)=>{let c=Ca(bi(s,new Me(o)),a);r=r.updateImmediateChild(o,c)}),ex(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=bi(n.visibleWrites,e);return ex(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function JW(n,e,t,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ot(e,t);if(ME(n.visibleWrites,s))return null;{let o=bi(n.visibleWrites,s);return xE(o)?i.getChild(t):Ca(o,i.getChild(t))}}function XW(n,e,t,r){let i=ot(e,t),s=Bs(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=bi(n.visibleWrites,i);return Ca(o,r.getNode().getImmediateChild(t))}else return null}function e4(n,e){return Bs(n.visibleWrites,e)}function t4(n,e,t,r,i,s,o){let a,c=bi(n.visibleWrites,e),l=Bs(c,Se());if(l!=null)a=l;else if(t!=null)a=Ca(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&h.length<i;)f(y,r)!==0&&h.push(y),y=g.getNext();return h}else return[]}function n4(){return{visibleWrites:Sn.empty(),allWrites:[],lastWriteId:-1}}function PE(n,e,t,r){return Qx(n.writeTree,n.treePath,e,t,r)}function Yx(n,e){return ZW(n.writeTree,n.treePath,e)}function tx(n,e,t,r){return JW(n.writeTree,n.treePath,e,t,r)}function sp(n,e){return e4(n.writeTree,ot(n.treePath,e))}function r4(n,e,t,r,i,s){return t4(n.writeTree,n.treePath,e,t,r,i,s)}function ZE(n,e,t){return XW(n.writeTree,n.treePath,e,t)}function Zx(n,e){return Jx(ot(n.treePath,e),n.writeTree)}function Jx(n,e){return{treePath:n,writeTree:e}}var kE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;F(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,KM(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,FW(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,OW(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,KM(r,e.snapshotNode,i.oldSnap));else throw us("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var OE=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Xx=new OE,qu=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Hu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZE(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:js(this.viewCache_),s=r4(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function i4(n,e){F(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function s4(n,e,t,r,i){let s=new kE,o,a;if(t.type===Fr.OVERWRITE){let l=t;l.source.fromUser?o=FE(n,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!me(l.path),o=op(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Fr.MERGE){let l=t;l.source.fromUser?o=a4(n,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=LE(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Fr.ACK_USER_WRITE){let l=t;l.revert?o=l4(n,e,l.path,r,i,s):o=c4(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Fr.LISTEN_COMPLETE)o=u4(n,e,t.path,r,s);else throw us("Unknown operation type: "+t.type);let c=s.getChanges();return o4(e,o,c),{viewCache:o,changes:c}}function o4(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=NE(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(kW(NE(e)))}}function eP(n,e,t,r,i,s){let o=e.eventCache;if(sp(r,t)!=null)return e;{let a,c;if(me(t))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=js(e),h=l instanceof je?l:je.EMPTY_NODE,f=Yx(r,h);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=PE(r,js(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=ve(t);if(l===".priority"){F(Ti(t)===1,"Can't have a priority with additional path components");let h=o.getNode();c=e.serverCache.getNode();let f=tx(r,t,h,c);f!=null?a=n.filter.updatePriority(h,f):a=o.getNode()}else{let h=ke(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=tx(r,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(h,g):f=o.getNode().getImmediateChild(l)}else f=ZE(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,h,i,s):a=o.getNode()}}return Bu(e,a,o.isFullyInitialized()||me(t),n.filter.filtersNodes())}}function op(n,e,t,r,i,s,o,a){let c=e.serverCache,l,h=o?n.filter:n.filter.getIndexedFilter();if(me(t))l=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(t,r);l=h.updateFullNode(c.getNode(),y,null)}else{let y=ve(t);if(!c.isCompleteForPath(t)&&Ti(t)>1)return e;let w=ke(t),R=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?l=h.updatePriority(c.getNode(),R):l=h.updateChild(c.getNode(),y,R,w,Xx,null)}let f=Gx(e,l,c.isFullyInitialized()||me(t),h.filtersNodes()),g=new qu(i,f,s);return eP(n,f,t,i,g,a)}function FE(n,e,t,r,i,s,o){let a=e.eventCache,c,l,h=new qu(i,e,s);if(me(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Bu(e,l,!0,n.filter.filtersNodes());else{let f=ve(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Bu(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=ke(t),y=a.getNode().getImmediateChild(f),w;if(me(g))w=r;else{let N=h.getCompleteChild(f);N!=null?Mx(g)===".priority"&&N.getChild(Px(g)).isEmpty()?w=N:w=N.updateChild(g,r):w=je.EMPTY_NODE}if(y.equals(w))c=e;else{let N=n.filter.updateChild(a.getNode(),f,w,g,h,o);c=Bu(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function nx(n,e){return n.eventCache.isCompleteForChild(e)}function a4(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let h=ot(t,c);nx(e,ve(h))&&(a=FE(n,a,h,l,i,s,o))}),r.foreach((c,l)=>{let h=ot(t,c);nx(e,ve(h))||(a=FE(n,a,h,l,i,s,o))}),a}function rx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function LE(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;me(t)?l=r:l=new Ot(null).setTree(t,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(h.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),w=rx(n,y,g);c=op(n,c,new Me(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!h.hasChild(f)&&!y){let w=e.serverCache.getNode().getImmediateChild(f),N=rx(n,w,g);c=op(n,c,new Me(f),N,i,s,o,a)}}),c}function c4(n,e,t,r,i,s,o){if(sp(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(me(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return op(n,e,t,c.getNode().getChild(t),i,s,a,o);if(me(t)){let l=new Ot(null);return c.getNode().forEachChild(ya,(h,f)=>{l=l.set(new Me(h),f)}),LE(n,e,t,l,i,s,a,o)}else return e}else{let l=new Ot(null);return r.foreach((h,f)=>{let g=ot(t,h);c.isCompleteForPath(g)&&(l=l.set(h,c.getNode().getChild(g)))}),LE(n,e,t,l,i,s,a,o)}}function u4(n,e,t,r,i){let s=e.serverCache,o=Gx(e,s.getNode(),s.isFullyInitialized()||me(t),s.isFiltered());return eP(n,o,t,r,Xx,i)}function l4(n,e,t,r,i,s){let o;if(sp(r,t)!=null)return e;{let a=new qu(r,e,i),c=e.eventCache.getNode(),l;if(me(t)||ve(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=PE(r,js(e));else{let f=e.serverCache.getNode();F(f instanceof je,"serverChildren would be complete if leaf node"),h=Yx(r,f)}h=h,l=n.filter.updateFullNode(c,h,s)}else{let h=ve(t),f=ZE(r,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=c.getImmediateChild(h)),f!=null?l=n.filter.updateChild(c,h,f,ke(t),a,s):e.eventCache.getNode().hasChild(h)?l=n.filter.updateChild(c,h,je.EMPTY_NODE,ke(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=PE(r,js(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||sp(r,Se())!=null,Bu(e,l,o,n.filter.filtersNodes())}}function d4(n,e){let t=js(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!me(e)&&!t.getImmediateChild(ve(e)).isEmpty())?t.getChild(e):null}function ix(n,e,t,r){e.type===Fr.MERGE&&e.source.queryId!==null&&(F(js(n.viewCache_),"We should always have a full cache before handling merges"),F(NE(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=s4(n.processor_,i,e,t,r);return i4(n.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,h4(n,s.changes,s.viewCache.eventCache.getNode(),null)}function h4(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return BW(n.eventGenerator_,e,t,i)}var sx;function f4(n){F(!sx,"__referenceConstructor has already been defined"),sx=n}function JE(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),ix(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(ix(o,e,t,r));return s}}function XE(n,e){let t=null;for(let r of n.views.values())t=t||d4(r,e);return t}var ox;function p4(n){F(!ox,"__referenceConstructor has already been defined"),ox=n}var ap=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ot(null),this.pendingWriteTree_=n4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function g4(n,e,t,r,i){return GW(n.pendingWriteTree_,e,t,r,i),i?up(n,new Ea(Bx(),e,t)):[]}function ga(n,e,t=!1){let r=zW(n.pendingWriteTree_,e);if(WW(n.pendingWriteTree_,e)){let s=new Ot(null);return r.snap!=null?s=s.set(Se(),!0):un(r.children,o=>{s=s.set(new Me(o),!0)}),up(n,new RE(r.path,s,t))}else return[]}function cp(n,e,t){return up(n,new Ea($x(),e,t))}function m4(n,e,t){let r=Ot.fromObject(t);return up(n,new ip($x(),e,r))}function y4(n,e,t,r){let i=iP(n,r);if(i!=null){let s=sP(i),o=s.path,a=s.queryId,c=an(o,e),l=new Ea(Hx(a),c,t);return oP(n,o,l)}else return[]}function _4(n,e,t,r){let i=iP(n,r);if(i){let s=sP(i),o=s.path,a=s.queryId,c=an(o,e),l=Ot.fromObject(t),h=new ip(Hx(a),c,l);return oP(n,o,h)}else return[]}function tP(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=an(o,e),l=XE(a,c);if(l)return l});return Qx(i,e,s,t,!0)}function up(n,e){return nP(e,n.syncPointTree_,null,Wx(n.pendingWriteTree_,Se()))}function nP(n,e,t,r){if(me(n.path))return rP(n,e,t,r);{let i=e.get(Se());t==null&&i!=null&&(t=XE(i,Se()));let s=[],o=ve(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,h=Zx(r,o);s=s.concat(nP(a,c,l,h))}return i&&(s=s.concat(JE(i,n,r,t))),s}}function rP(n,e,t,r){let i=e.get(Se());t==null&&i!=null&&(t=XE(i,Se()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Zx(r,o),h=n.operationForChild(o);h&&(s=s.concat(rP(h,a,c,l)))}),i&&(s=s.concat(JE(i,n,r,t))),s}function iP(n,e){return n.tagToQueryMap.get(e)}function sP(n){let e=n.indexOf("$");return F(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Me(n.substr(0,e))}}function oP(n,e,t){let r=n.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=Wx(n.pendingWriteTree_,e);return JE(r,t,i,null)}var VE=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},UE=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=ot(this.path_,e);return new n(this.syncTree_,t)}node(){return tP(this.syncTree_,this.path_)}},v4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},ax=function(n,e,t){if(!n||typeof n!="object")return n;if(F(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return I4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return w4(n[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},I4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:F(!1,"Unexpected server value: "+n)}},w4=function(n,e,t){n.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},E4=function(n,e,t,r){return eC(e,new UE(t,n),r)},C4=function(n,e,t){return eC(n,new VE(e),t)};function eC(n,e,t){let r=n.getPriority().val(),i=ax(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=ax(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Ia(a,Et(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ia(i))),o.forEachChild(Ct,(a,c)=>{let l=eC(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Gu=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function tC(n,e){let t=e instanceof Me?e:new Me(e),r=n,i=ve(t);for(;i!==null;){let s=ls(r.node.children,i)||{children:{},childCount:0};r=new Gu(i,r,s),t=ke(t),i=ve(t)}return r}function Ta(n){return n.node.value}function aP(n,e){n.node.value=e,jE(n)}function cP(n){return n.node.childCount>0}function D4(n){return Ta(n)===void 0&&!cP(n)}function lp(n,e){un(n.node.children,(t,r)=>{e(new Gu(t,n,r))})}function uP(n,e,t,r){t&&!r&&e(n),lp(n,i=>{uP(i,e,!0,r)}),t&&r&&e(n)}function b4(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Yu(n){return new Me(n.parent===null?n.name:Yu(n.parent)+"/"+n.name)}function jE(n){n.parent!==null&&T4(n.parent,n.name,n)}function T4(n,e,t){let r=D4(t),i=Hn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,jE(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,jE(n))}var S4=/[\[\].#$\/\u0000-\u001F\u007F]/,A4=/[\[\].#$\u0000-\u001F\u007F]/,eE=10*1024*1024,lP=function(n){return typeof n=="string"&&n.length!==0&&!S4.test(n)},R4=function(n){return typeof n=="string"&&n.length!==0&&!A4.test(n)},N4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),R4(n)};var dP=function(n,e,t){let r=t instanceof Me?new pE(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Fs(r));if(typeof e=="function")throw new Error(n+"contains a function "+Fs(r)+" with contents = "+e.toString());if(fx(e))throw new Error(n+"contains "+e.toString()+" "+Fs(r));if(typeof e=="string"&&e.length>eE/3&&Zc(e)>eE)throw new Error(n+"contains a string greater than "+eE+" utf8 bytes "+Fs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(un(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!lP(o)))throw new Error(n+" contains an invalid key ("+o+") "+Fs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wW(r,o),dP(n,a,r),EW(r)}),i&&s)throw new Error(n+' contains ".value" child '+Fs(r)+" in addition to actual children.")}};var M4=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!lP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!N4(t))throw new Error(CA(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var BE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function x4(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!kx(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function $s(n,e,t){x4(n,t),P4(n,r=>Tn(r,e)||Tn(e,r))}function P4(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(k4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function k4(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Vs&&wt("event: "+t.toString()),Ku(r)}}}var O4="repo_interrupt",F4=25,$E=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new BE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rp(),this.transactionQueueTree_=new Gu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function L4(n,e,t){if(n.stats_=KE(n.repoInfo_),n.forceRestClient_||Yz())n.server_=new DE(n.repoInfo_,(r,i,s,o)=>{cx(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ux(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new QE(n.repoInfo_,e,(r,i,s,o)=>{cx(n,r,i,s,o)},r=>{ux(n,r)},r=>{U4(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Jz(n.repoInfo_,()=>new AE(n.stats_,n.server_)),n.infoData_=new bE,n.infoSyncTree_=new ap({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=cp(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),nC(n,"connected",!1),n.serverSyncTree_=new ap({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);$s(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function V4(n){let t=n.infoData_.getNode(new Me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function hP(n){return v4({timestamp:V4(n)})}function cx(n,e,t,r,i){n.dataUpdateCount++;let s=new Me(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Yc(t,l=>Et(l));o=_4(n.serverSyncTree_,s,c,i)}else{let c=Et(t);o=y4(n.serverSyncTree_,s,c,i)}else if(r){let c=Yc(t,l=>Et(l));o=m4(n.serverSyncTree_,s,c)}else{let c=Et(t);o=cp(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=iC(n,s)),$s(n.eventQueue_,a,o)}function ux(n,e){nC(n,"connected",e),e===!1&&B4(n)}function U4(n,e){un(e,(t,r)=>{nC(n,t,r)})}function nC(n,e,t){let r=new Me("/.info/"+e),i=Et(t);n.infoData_.updateSnapshot(r,i);let s=cp(n.infoSyncTree_,r,i);$s(n.eventQueue_,r,s)}function j4(n){return n.nextWriteId_++}function B4(n){fP(n,"onDisconnectEvents");let e=hP(n),t=rp();TE(n.onDisconnect_,Se(),(i,s)=>{let o=E4(i,s,n.serverSyncTree_,e);jx(t,i,o)});let r=[];TE(t,Se(),(i,s)=>{r=r.concat(cp(n.serverSyncTree_,i,s));let o=G4(n,i);iC(n,o)}),n.onDisconnect_=rp(),$s(n.eventQueue_,Se(),r)}function $4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(O4)}function fP(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),wt(t,...e)}function pP(n,e,t){return tP(n.serverSyncTree_,e,t)||je.EMPTY_NODE}function rC(n,e=n.transactionQueueTree_){if(e||dp(n,e),Ta(e)){let t=mP(n,e);F(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&H4(n,Yu(e),t)}else cP(e)&&lp(e,t=>{rC(n,t)})}function H4(n,e,t){let r=t.map(l=>l.currentWriteId),i=pP(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let h=t[l];F(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let f=an(e,h.path);s=s.updateChild(f,h.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{fP(n,"transaction put response",{path:c.toString(),status:l});let h=[];if(l==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,h=h.concat(ga(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();dp(n,tC(n.transactionQueueTree_,e)),rC(n,n.transactionQueueTree_),$s(n.eventQueue_,e,h);for(let g=0;g<f.length;g++)Ku(f[g])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Gt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}iC(n,e)}},o)}function iC(n,e){let t=gP(n,e),r=Yu(t),i=mP(n,t);return q4(n,i,r),r}function q4(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=an(t,c.path),h=!1,f;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,f=c.abortReason,i=i.concat(ga(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=F4)h=!0,f="maxretry",i=i.concat(ga(n.serverSyncTree_,c.currentWriteId,!0));else{let g=pP(n,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){dP("transaction failed: Data returned ",y,c.path);let w=Et(y);typeof y=="object"&&y!=null&&Hn(y,".priority")||(w=w.updatePriority(g.getPriority()));let R=c.currentWriteId,k=hP(n),U=C4(w,g,k);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=U,c.currentWriteId=j4(n),o.splice(o.indexOf(R),1),i=i.concat(g4(n.serverSyncTree_,c.path,U,c.currentWriteId,c.applyLocally)),i=i.concat(ga(n.serverSyncTree_,R,!0))}else h=!0,f="nodata",i=i.concat(ga(n.serverSyncTree_,c.currentWriteId,!0))}$s(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}dp(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Ku(r[a]);rC(n,n.transactionQueueTree_)}function gP(n,e){let t,r=n.transactionQueueTree_;for(t=ve(e);t!==null&&Ta(r)===void 0;)r=tC(r,t),e=ke(e),t=ve(e);return r}function mP(n,e){let t=[];return yP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yP(n,e,t){let r=Ta(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lp(e,i=>{yP(n,i,t)})}function dp(n,e){let t=Ta(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,aP(e,t.length>0?t:void 0)}lp(e,r=>{dp(n,r)})}function G4(n,e){let t=Yu(gP(n,e)),r=tC(n.transactionQueueTree_,e);return b4(r,i=>{tE(n,i)}),tE(n,r),uP(r,i=>{tE(n,i)}),t}function tE(n,e){let t=Ta(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(F(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ga(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?aP(e,void 0):t.length=s+1,$s(n.eventQueue_,Yu(e),i);for(let o=0;o<r.length;o++)Ku(r[o])}}function z4(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function W4(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gt(`Invalid query segment '${t}' in query '${n}'`)}return e}var lx=function(n,e){let t=K4(n),r=t.namespace;t.domain==="firebase.com"&&Lr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||$z();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Yf(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Me(t.pathString)}},K4=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let h=n.indexOf("/");h===-1&&(h=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(h,f)),h<f&&(i=z4(n.substring(h,f)));let g=W4(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var HE=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:Mx(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){let e=YM(this._queryParams),t=WE(e);return t==="{}"?"default":t}get _queryObject(){return YM(this._queryParams)}isEqual(e){if(e=We(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=kx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+IW(this._path)}};var Da=class n extends HE{constructor(e,t){super(e,t,new CE,!1)}get parent(){let e=Px(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};f4(Da);p4(Da);var Q4="FIREBASE_DATABASE_EMULATOR_HOST",qE={},Y4=!1;function Z4(n,e,t,r){n.repoInfo_=new Yf(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function J4(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=lx(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Q4]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=lx(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let h=i&&c?new ju(ju.OWNER):new aE(n.name,n.options,e);M4("Invalid Firebase Database URL",o),me(o.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=e3(a,n,h,new oE(n.name,t));return new GE(f,n)}function X4(n,e){let t=qE[e];(!t||t[n.key]!==n)&&Lr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),$4(n),delete t[n.key]}function e3(n,e,t,r){let i=qE[e.name];i||(i={},qE[e.name]=i);let s=i[n.toURLString()];return s&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $E(n,Y4,t,r),i[n.toURLString()]=s,s}var GE=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(L4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,Se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(X4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Lr("Cannot call "+e+" on a deleted database.")}};function _P(n=hi(),e){let t=ps(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Nh("database");r&&vP(t,...r)}return t}function vP(n,e,t,r={}){n=We(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ju(ju.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Mh(r.mockUserToken,n.app.options.projectId);s=new ju(o)}Z4(i,e,t,s)}function t3(n){Uz(Wn),zn(new Pt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return J4(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Le(xM,PM,n),Le(xM,PM,"esm2017")}QE.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};QE.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};t3();var Zu=class{constructor(e){return e}},IP="database",sC=class{constructor(){return ms(IP)}};var oC=new q("angularfire2.database-instances");function n3(n,e){let t=Bo(IP,n,e);return t&&new Zu(t)}function r3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zu(r)}}var i3={provide:sC,deps:[[new ze,oC]]},s3={provide:Zu,useFactory:n3,deps:[[new ze,oC],En]};function wP(n,...e){return Le("angularfire",br.full,"rtdb"),Jt([s3,i3,{provide:oC,useFactory:r3(n),multi:!0,deps:[De,yt,pi,Tr,[new ze,ws],[new ze,fi],...e]}])}var EP=dt(_P,!0);var tr=class n{constructor(e){this.firestore=e}getGastos(){let e=ks(this.firestore,"gastos");return Pu(e,{idField:"id"})}getGastoById(e){let t=Os(this.firestore,`gastos/${e}`);return qw(t,{idField:"id"})}updateGasto(e){if(!e.id)throw new Error("No se proporcion\xF3 un ID para el gasto.");let t=Os(this.firestore,`gastos/${e.id}`);return delete e.id,Kw(t,O({},e))}addGasto(e){let t=ks(this.firestore,"gastos");return Gw(t,O({},e))}deleteGasto(e){console.log(`gastos/${e.id}`);let t=Os(this.firestore,`gastos/${e.id}`);return zw(t)}getGastosByFecha(e){let t=ks(this.firestore,"gastos"),r=Ww(t,Wf("fecha","==",e));return Pu(r,{idField:"id"})}getGastosByRange(e,t){let r=ks(this.firestore,"gastos"),i=Ww(r,Wf("fecha",">=",e),Wf("fecha","<=",t));return Pu(i,{idField:"id"})}getCategorias(){let e=ks(this.firestore,"categorias");return Pu(e,{idField:"id"})}getCategoriaById(e){let t=Os(this.firestore,`categorias/${e}`);return qw(t,{idField:"id"})}updateCategoria(e){if(!e.id)throw new Error("No se proporcion\xF3 un ID para la categor\xEDa.");let t=Os(this.firestore,`categorias/${e.id}`);return delete e.id,Kw(t,O({},e))}addCategoria(e){let t=ks(this.firestore,"categorias");return Gw(t,O({},e))}deleteCategoria(e){console.log(`categorias/${e.id}`);let t=Os(this.firestore,`categorias/${e.id}`);return zw(t)}static \u0275fac=function(t){return new(t||n)(se(Or))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function o3(n,e){if(n&1){let t=oi();H(0,"div",8),Fe("click",function(){let i=ni(t).$implicit,s=mr();return ri(s.itemCategoria_onClick(i))}),H(1,"span",9),ge(2),K(),H(3,"a",10),Ji(4,"img",11),K()()}if(n&2){let t=e.$implicit;si("background-color",t.color),Oe(2),ai(t.nombre)}}var fp=class n{constructor(e,t){this.dataService=e;this.router=t;this.obtenerCategorias()}categorias=[];itemCategoria_onClick(e){this.router.navigate(["categoria"],{queryParams:{id:e.id}})}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>{this.categorias=e})}static \u0275fac=function(t){return new(t||n)(G(tr),G(Bn))};static \u0275cmp=Zt({type:n,selectors:[["categorias"]],standalone:!0,features:[tn],decls:11,vars:1,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","#",1,"txtBlanco","link"],[1,"lista","cards"],["class","card",3,"background-color","click",4,"ngFor","ngForOf"],["href","/categoria",1,"nueva-categoria"],[1,"card",3,"click"],[1,"card-title"],["href","#",1,"center"],["src","edit2.png","alt","Editar",1,"flecha"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),ge(4,"Mireia"),K(),H(5,"a",4),ge(6,"Volver"),K()()(),H(7,"div",5),yn(8,o3,5,3,"div",6),H(9,"a",7),ge(10," A\xF1adir nueva categor\xEDa"),K()()()),t&2&&(Oe(8),Ut("ngForOf",r.categorias))},dependencies:[In,ui]})};var xP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(G(gr),G(Ln))}}static{this.\u0275dir=qe({type:n})}}return n})(),Ep=(()=>{class n extends xP{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=qe({type:n,features:[en]})}}return n})(),il=new q("");var a3={provide:il,useExisting:Fn(()=>Si),multi:!0};function c3(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var u3=new q(""),Si=(()=>{class n extends xP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!c3())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(G(gr),G(Ln),G(u3,8))}}static{this.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Fe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ci([a3]),en]})}}return n})();function l3(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var cC=new q(""),PP=new q("");function d3(n){return l3(n.value)?{required:!0}:null}function CP(n){return null}function kP(n){return n!=null}function OP(n){return es(n)?He(n):n}function FP(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function LP(n,e){return e.map(t=>t(n))}function h3(n){return!n.validate}function VP(n){return n.map(e=>h3(e)?e:t=>e.validate(t))}function f3(n){if(!n)return null;let e=n.filter(kP);return e.length==0?null:function(t){return FP(LP(t,e))}}function uC(n){return n!=null?f3(VP(n)):null}function p3(n){if(!n)return null;let e=n.filter(kP);return e.length==0?null:function(t){let r=LP(t,e).map(OP);return Sg(r).pipe(ie(FP))}}function lC(n){return n!=null?p3(VP(n)):null}function DP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function g3(n){return n._rawValidators}function m3(n){return n._rawAsyncValidators}function aC(n){return n?Array.isArray(n)?n:[n]:[]}function mp(n,e){return Array.isArray(n)?n.includes(e):n===e}function bP(n,e){let t=aC(e);return aC(n).forEach(i=>{mp(t,i)||t.push(i)}),t}function TP(n,e){return aC(e).filter(t=>!mp(n,t))}var yp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ra=class extends yp{get formDirective(){return null}get path(){return null}},rl=class extends yp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_p=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},y3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mte=de(O({},y3),{"[class.ng-submitted]":"isSubmitted"}),Ma=(()=>{class n extends _p{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(G(rl,2))}}static{this.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[en]})}}return n})(),Cp=(()=>{class n extends _p{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(G(Ra,10))}}static{this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[en]})}}return n})();var Ju="VALID",gp="INVALID",Sa="PENDING",Xu="DISABLED",Na=class{},vp=class extends Na{constructor(e,t){super(),this.value=e,this.source=t}},tl=class extends Na{constructor(e,t){super(),this.pristine=e,this.source=t}},nl=class extends Na{constructor(e,t){super(),this.touched=e,this.source=t}},Aa=class extends Na{constructor(e,t){super(),this.status=e,this.source=t}};function UP(n){return(Dp(n)?n.validators:n)||null}function _3(n){return Array.isArray(n)?uC(n):n||null}function jP(n,e){return(Dp(e)?e.asyncValidators:n)||null}function v3(n){return Array.isArray(n)?lC(n):n||null}function Dp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function I3(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[t])throw new B(1001,"")}function w3(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new B(1002,"")})}var Ip=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ic(()=>this.statusReactive()),this.statusReactive=_c(void 0),this._pristine=Ic(()=>this.pristineReactive()),this.pristineReactive=_c(!0),this._touched=Ic(()=>this.touchedReactive()),this.touchedReactive=_c(!1),this._events=new ct,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yr(this.statusReactive)}set status(e){yr(()=>this.statusReactive.set(e))}get valid(){return this.status===Ju}get invalid(){return this.status===gp}get pending(){return this.status==Sa}get disabled(){return this.status===Xu}get enabled(){return this.status!==Xu}get pristine(){return yr(this.pristineReactive)}set pristine(e){yr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return yr(this.touchedReactive)}set touched(e){yr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TP(e,this._rawAsyncValidators))}hasValidator(e){return mp(this._rawValidators,e)}hasAsyncValidator(e){return mp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new nl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new tl(!0,r))}markAsPending(e={}){this.status=Sa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xu,this.errors=null,this._forEachChild(i=>{i.disable(de(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vp(this.value,r)),this._events.next(new Aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ju,this._forEachChild(r=>{r.enable(de(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ju||this.status===Sa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vp(this.value,t)),this._events.next(new Aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xu:Ju}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=OP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Xu:this.errors?gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sa)?Sa:this._anyControlsHaveStatus(gp)?gp:Ju}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new tl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new nl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=v3(this._rawAsyncValidators)}},wp=class extends Ip{constructor(e,t,r){super(UP(t),jP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){w3(this,!0,e),Object.keys(e).forEach(r=>{I3(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var dC=new q("CallSetDisabledState",{providedIn:"root",factory:()=>hC}),hC="always";function E3(n,e){return[...e.path,n]}function BP(n,e,t=hC){$P(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),D3(n,e),T3(n,e),b3(n,e),C3(n,e)}function SP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function C3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function $P(n,e){let t=g3(n);e.validator!==null?n.setValidators(DP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=m3(n);e.asyncValidator!==null?n.setAsyncValidators(DP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();SP(e._rawValidators,i),SP(e._rawAsyncValidators,i)}function D3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HP(n,e)})}function b3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function HP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function T3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function S3(n,e){n==null,$P(n,e)}function A3(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function R3(n){return Object.getPrototypeOf(n.constructor)===Ep}function N3(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function M3(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Si?t=s:R3(s)?r=s:i=s}),i||r||t||null}var x3={provide:Ra,useExisting:Fn(()=>sl)},el=Promise.resolve(),sl=(()=>{class n extends Ra{get submitted(){return yr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ic(()=>this.submittedReactive()),this.submittedReactive=_c(!1),this._directives=new Set,this.ngSubmit=new Qe,this.form=new wp({},uC(t),lC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){el.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),BP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){el.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){el.then(()=>{let r=this._findContainer(t.path),i=new wp({});S3(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){el.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){el.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),N3(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(G(cC,10),G(PP,10),G(dC,8))}}static{this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Fe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ci([x3]),en]})}}return n})();function AP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var P3=class extends Ip{constructor(e=null,t,r){super(UP(t),jP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(RP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){RP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var k3={provide:rl,useExisting:Fn(()=>Hs)},NP=Promise.resolve(),Hs=(()=>{class n extends rl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new P3,this._registered=!1,this.name="",this.update=new Qe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=M3(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),A3(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){NP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&vc(r);NP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?E3(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(G(Ra,9),G(cC,10),G(PP,10),G(il,10),G(ns,8),G(dC,8))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ci([k3]),en,Yi]})}}return n})(),bp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),O3={provide:il,useExisting:Fn(()=>fC),multi:!0},fC=(()=>{class n extends Ep{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[ci([O3]),en]})}}return n})();var F3={provide:il,useExisting:Fn(()=>xa),multi:!0};function qP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function L3(n){return n.split(":")[0]}var xa=(()=>{class n extends Ep{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=qP(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=L3(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Fe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ci([F3]),en]})}}return n})(),Tp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(G(Ln),G(gr),G(xa,9))}}static{this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),V3={provide:il,useExisting:Fn(()=>GP),multi:!0};function MP(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function U3(n){return n.split(":")[0]}var GP=(()=>{class n extends Ep{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=U3(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ci([V3]),en]})}}return n})(),Sp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(MP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(MP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(G(Ln),G(gr),G(GP,9))}}static{this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var j3=(()=>{class n{constructor(){this._validator=CP}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):CP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=qe({type:n,features:[Yi]})}}return n})();var B3={provide:cC,useExisting:Fn(()=>ol),multi:!0};var ol=(()=>{class n extends j3{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=vc,this.createValidator=t=>d3}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Jd("required",i._enabled?"":null)},inputs:{required:"required"},features:[ci([B3]),en]})}}return n})();var $3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qi({type:n})}static{this.\u0275inj=Ki({})}}return n})();var Ai=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dC,useValue:t.callSetDisabledState??hC}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qi({type:n})}static{this.\u0275inj=Ki({imports:[$3]})}}return n})();var Ap=class n{constructor(e){this.firestore=e}formatearFecha(e){let t=typeof e=="string"?new Date(e):e,r=t.getDate(),i=t.toLocaleDateString("es-ES",{month:"long"}),s=t.getFullYear(),o=this.capitalizarMes(i);return`${r} de ${o} del ${s}`}capitalizarMes(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}formatearFechaInput(e){let t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${r}-${t}`}calcularRangoSemana(e){let t=new Date(e);t.setDate(e.getDate()-e.getDay()+1);let r=new Date(t);return r.setDate(t.getDate()+6),{fechaInicio:t,fechaFin:r}}calcularRangoMes(e){let t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);return{fechaInicio:t,fechaFin:r}}static \u0275fac=function(t){return new(t||n)(se(Or))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function q3(n,e){if(n&1){let t=oi();H(0,"div",21),Fe("click",function(){let i=ni(t).$implicit,s=mr();return ri(s.itemGasto_onClick(i))}),H(1,"span",22),ge(2),K(),H(3,"span",23),ge(4),_y(5,"number"),K()()}if(n&2){let t,r=e.$implicit,i=mr();si("background-color",(t=i.obtenerCategoriaById(r.categoriaId))==null?null:t.color),Oe(2),ai(r.descripcion),Oe(2),Xi("",vy(5,4,r.importe,"1.2-2")," \u20AC")}}var Rp=class n{constructor(e,t,r){this.fechaService=e;this.dataService=t;this.router=r;this.fechaSeleccionada=this.fechaService.formatearFechaInput(new Date),this.fechaFormateada=this.fechaService.formatearFecha(this.fechaSeleccionada),this.obtenerDatos()}gastos=[];categorias=[];fechaFormateada="";fechaSeleccionada="";inputFechaSeleccionada_onChange(){this.obtenerGastosPorFecha(this.fechaSeleccionada)}btnMostrarVistaHoy_onClick(){this.fechaSeleccionada=this.fechaService.formatearFechaInput(new Date),this.fechaFormateada=this.fechaService.formatearFecha(this.fechaSeleccionada),this.obtenerGastosPorFecha(this.fechaSeleccionada)}btnMostrarVistaSemana_onClick(){let e=new Date(this.fechaSeleccionada),{fechaInicio:t,fechaFin:r}=this.fechaService.calcularRangoSemana(e);this.obtenerGastosPorRango(this.fechaService.formatearFechaInput(t),this.fechaService.formatearFechaInput(r))}btnMostrarVistaMes_onClick(){let e=new Date(this.fechaSeleccionada),{fechaInicio:t,fechaFin:r}=this.fechaService.calcularRangoMes(e);this.obtenerGastosPorRango(this.fechaService.formatearFechaInput(t),this.fechaService.formatearFechaInput(r))}btnDiaAnterior_onClick(){this.cambiarFecha(-1)}btnDiaPosterior_onClick(){this.cambiarFecha(1)}itemGasto_onClick(e){this.router.navigate(["gasto"],{queryParams:{id:e.id}})}obtenerCategoriaById(e){return this.categorias.find(t=>t.id==e)}sumarImportes(){return this.gastos.reduce((e,t)=>e+t.importe,0)}cambiarFecha(e){let[t,r,i]=this.fechaSeleccionada.split("-").map(Number),s=new Date(t,r-1,i);s.setDate(s.getDate()+e),this.fechaSeleccionada=this.fechaService.formatearFechaInput(s),this.fechaFormateada=this.fechaService.formatearFecha(s),this.obtenerGastosPorFecha(this.fechaSeleccionada)}obtenerGastosPorFecha(e){this.dataService.getGastosByFecha(e).subscribe(t=>{this.gastos=t,this.fechaFormateada=this.fechaService.formatearFecha(new Date(e))})}obtenerGastosPorRango(e,t){this.dataService.getGastosByRange(e,t).subscribe(r=>{this.gastos=r;let i=this.fechaService.formatearFecha(e),s=this.fechaService.formatearFecha(t);this.fechaFormateada=`${i} al ${s}`})}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>{this.categorias=e})}obtenerDatos(){this.obtenerCategorias(),this.obtenerGastosPorFecha(this.fechaSeleccionada)}static \u0275fac=function(t){return new(t||n)(G(Ap),G(tr),G(Bn))};static \u0275cmp=Zt({type:n,selectors:[["inicio"]],standalone:!0,features:[tn],decls:33,vars:7,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],[1,"div-fecha"],["type","date","name","fecha","id","fechaInput",3,"ngModelChange","change","ngModel"],[1,"vistas"],[1,"btn","hoy",3,"click"],[1,"btn","Semana",3,"click"],[1,"btn","Mes",3,"click"],[1,"menuBotones"],["href","/categorias",1,"boton","link"],["href","/gasto",1,"boton","link"],[1,"fechaActual"],[1,"divImporte"],[1,"flecha"],["src","flecha-izquierda.png","alt","flecha anterior",1,"flecha","center",3,"click"],[1,"importeTotal"],["src","flecha-derecha.png","alt","flecha siguiente",1,"flecha","center",3,"click"],[1,"lista","gastos"],["class","card card-importe",3,"background-color","click",4,"ngFor","ngForOf"],[1,"card","card-importe",3,"click"],[1,"card-title"],[1,"card-import"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),ge(4,"Mireia"),K(),H(5,"div",4)(6,"span",3),ge(7,"Fecha seleccionada"),K(),H(8,"input",5),vn("ngModelChange",function(s){return Vn(r.fechaSeleccionada,s)||(r.fechaSeleccionada=s),s}),Fe("change",function(){return r.inputFechaSeleccionada_onChange()}),K()()(),H(9,"div",6)(10,"span",7),Fe("click",function(){return r.btnMostrarVistaHoy_onClick()}),ge(11,"Hoy"),K(),H(12,"span",8),Fe("click",function(){return r.btnMostrarVistaSemana_onClick()}),ge(13,"Semana"),K(),H(14,"span",9),Fe("click",function(){return r.btnMostrarVistaMes_onClick()}),ge(15,"Mes"),K()()(),H(16,"div",10)(17,"a",11),ge(18,"Categor\xEDas"),K(),H(19,"a",12),ge(20,"A\xF1adir Gasto"),K()(),H(21,"span",13),ge(22),K(),H(23,"div",14)(24,"a",15)(25,"img",16),Fe("click",function(){return r.btnDiaAnterior_onClick()}),K()(),H(26,"span",17),ge(27),_y(28,"number"),K(),H(29,"a",15)(30,"img",18),Fe("click",function(){return r.btnDiaPosterior_onClick()}),K()()(),H(31,"div",19),yn(32,q3,6,7,"div",20),K()()),t&2&&(Oe(8),_n("ngModel",r.fechaSeleccionada),Oe(14),ai(r.fechaFormateada),Oe(5),Xi("",vy(28,4,r.sumarImportes(),"1.2-2")," \u20AC"),Oe(5),Ut("ngForOf",r.gastos))},dependencies:[In,ui,y0,Ai,Si,Ma,Hs]})};var Np=class{id="";nombre="";color="";constructor(){}};var G3=n=>({"background-color":n});function z3(n,e){if(n&1&&(H(0,"option",14),ge(1),K()),n&2){let t=e.$implicit;Ut("ngValue",t.value)("ngStyle",WS(3,G3,t.value)),Oe(),Xi(" ",t.name," ")}}function W3(n,e){if(n&1){let t=oi();H(0,"button",15),Fe("click",function(){ni(t);let i=mr();return ri(i.btnEliminar_onClick())}),ge(1," Eliminar "),K()}}var Mp=class n{constructor(e,t,r){this.dataService=e;this.router=t;this.route=r;this.route.queryParams.subscribe(i=>{i.id!=null&&(this.categoria.id=i.id)}),this.obtenerDatos()}categoria=new Np;colores=[{name:"Verde",value:"var(--verdeCategoria)"},{name:"Azul",value:"var(--azulCategoria)"},{name:"Rojo",value:"var(--rojoCategoria)"},{name:"Lila",value:"var(--lilaCategoria)"},{name:"Naranja",value:"var(--naranjaCategoria)"}];btnVolver_onClick(){}frmAgregarCategoria_onSubmit(){this.categoria.id?this.dataService.updateCategoria(this.categoria).then(()=>this.router.navigate(["categorias"])).catch(e=>console.error("Error al actualizar la categor\xEDa:",e)):this.dataService.addCategoria(this.categoria).then(()=>this.router.navigate(["categorias"])).catch(e=>{console.error("Error al actualizar la categor\xEDa:",e)})}btnEliminar_onClick(){this.dataService.deleteCategoria(this.categoria),this.router.navigate(["categorias"])}obtenerCategoria(){this.categoria.id?this.dataService.getCategoriaById(this.categoria.id).subscribe(e=>{this.categoria=e}):console.log("No se encontr\xF3 ID. Creando una nueva categor\xEDa.")}obtenerDatos(){this.categoria.id!=null&&this.obtenerCategoria()}static \u0275fac=function(t){return new(t||n)(G(tr),G(Bn),G(jn))};static \u0275cmp=Zt({type:n,selectors:[["categoria"]],standalone:!0,features:[tn],decls:19,vars:4,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","/categorias",1,"txtBlanco","link"],[1,"form",3,"ngSubmit"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","color",1,"form-label"],["id","color","name","color","required","",1,"color",3,"ngModelChange","ngModel"],["class","form-options",3,"ngValue","ngStyle",4,"ngFor","ngForOf"],[1,"form-btns"],["class","button eliminar",3,"click",4,"ngIf"],["type","submit",1,"button","aceptar"],[1,"form-options",3,"ngValue","ngStyle"],[1,"button","eliminar",3,"click"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),ge(4,"Mireia"),K(),H(5,"a",4),ge(6,"Cancelar"),K()(),H(7,"form",5),Fe("ngSubmit",function(){return r.frmAgregarCategoria_onSubmit()}),H(8,"label",6),ge(9,"Nombre:"),K(),H(10,"input",7),vn("ngModelChange",function(s){return Vn(r.categoria.nombre,s)||(r.categoria.nombre=s),s}),K(),H(11,"label",8),ge(12,"Color:"),K(),H(13,"select",9),vn("ngModelChange",function(s){return Vn(r.categoria.color,s)||(r.categoria.color=s),s}),yn(14,z3,2,5,"option",10),K(),H(15,"div",11),yn(16,W3,2,0,"button",12),H(17,"button",13),ge(18,"Aceptar"),K()()()()()),t&2&&(Oe(10),_n("ngModel",r.categoria.nombre),Oe(3),_n("ngModel",r.categoria.color),Oe(),Ut("ngForOf",r.colores),Oe(2),Ut("ngIf",r.categoria.nombre))},dependencies:[Ai,bp,Tp,Sp,Si,xa,Ma,Cp,ol,Hs,sl,In,ui,oh,m0],styles:[".color[_ngcontent-%COMP%]{display:block;padding:5px;width:200px}.color[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{padding:10px;color:#fff}"]})};var xp=class{id="";categoriaId="";descripcion="";fecha=new Date;importe=0;constructor(){}};function K3(n,e){if(n&1&&(H(0,"option",17),ge(1),K()),n&2){let t=e.$implicit;si("background-color",t.color),Ut("value",t.id),Oe(),ai(t.nombre)}}function Q3(n,e){if(n&1){let t=oi();H(0,"button",18),Fe("click",function(){ni(t);let i=mr();return ri(i.btnEliminar_onClick())}),ge(1,"Borrar"),K()}}var Pp=class n{constructor(e,t,r){this.dataService=e;this.router=t;this.route=r;this.route.queryParams.subscribe(i=>{i.id!=null&&(this.gasto.id=i.id)}),this.obtenerDatos()}gasto=new xp;categorias=[];volverInicio_onClick(){}btnEliminar_onClick(){this.dataService.deleteGasto(this.gasto),this.router.navigate(["inicio"])}frmAgregarGasto_onSubmit(){this.gasto.id?this.dataService.updateGasto(this.gasto).then(()=>this.router.navigate(["inicio"])).catch(e=>console.error("Error al actualizar el gasto:",e)):this.dataService.addGasto(this.gasto).then(()=>this.router.navigate(["inicio"])).catch(e=>{console.error("Error al actualizar el gasto:",e)})}obtenerDatos(){this.obtenerGasto(),this.obtenerCategorias()}obtenerGasto(){this.gasto.id?this.dataService.getGastoById(this.gasto.id).subscribe(e=>{this.gasto=e}):console.log("No se encontr\xF3 ID. Creando un nuevo gasto.")}obtenerCategorias(){this.dataService.getCategorias().subscribe(e=>this.categorias=e)}static \u0275fac=function(t){return new(t||n)(G(tr),G(Bn),G(jn))};static \u0275cmp=Zt({type:n,selectors:[["gasto"]],standalone:!0,features:[tn],decls:25,vars:6,consts:[[1,"body","inicio"],[1,"nav"],[1,"navSuperior"],[1,"txtBlanco"],["href","#",1,"txtBlanco","link"],[1,"form",3,"ngSubmit"],["for","nombre",1,"form-label"],["type","text","id","descripcion","name","descripcion","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","importe",1,"form-label"],["type","number","id","importeGasto","name","importe","required","",1,"form-label",3,"ngModelChange","ngModel"],["for","categoria",1,"form-label"],["id","lstCategorias","name","lstCategorias","required","",1,"form-label",3,"ngModelChange","ngModel"],["class","form-options",3,"background-color","value",4,"ngFor","ngForOf"],["type","date","id","fechaGasto","name","fecha","required","",1,"form-label",3,"ngModelChange","ngModel"],[1,"form-btns"],["class","button eliminar",3,"click",4,"ngIf"],["button","","type","submit",1,"button","aceptar"],[1,"form-options",3,"value"],[1,"button","eliminar",3,"click"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),ge(4,"Mireia"),K(),H(5,"a",4),ge(6,"Volver"),K()(),H(7,"form",5),Fe("ngSubmit",function(){return r.frmAgregarGasto_onSubmit()}),H(8,"label",6),ge(9,"Gasto:"),K(),H(10,"input",7),vn("ngModelChange",function(s){return Vn(r.gasto.descripcion,s)||(r.gasto.descripcion=s),s}),K(),H(11,"label",8),ge(12,"Importe:"),K(),H(13,"input",9),vn("ngModelChange",function(s){return Vn(r.gasto.importe,s)||(r.gasto.importe=s),s}),K(),H(14,"label",10),ge(15,"Categor\xEDa: "),K(),H(16,"select",11),vn("ngModelChange",function(s){return Vn(r.gasto.categoriaId,s)||(r.gasto.categoriaId=s),s}),yn(17,K3,2,4,"option",12),K(),H(18,"label",10),ge(19,"Fecha: "),K(),H(20,"input",13),vn("ngModelChange",function(s){return Vn(r.gasto.fecha,s)||(r.gasto.fecha=s),s}),K(),H(21,"div",14),yn(22,Q3,2,0,"button",15),H(23,"button",16),ge(24," Aceptar"),K()()()()()),t&2&&(Oe(10),_n("ngModel",r.gasto.descripcion),Oe(3),_n("ngModel",r.gasto.importe),Oe(3),_n("ngModel",r.gasto.categoriaId),Oe(),Ut("ngForOf",r.categorias),Oe(3),_n("ngModel",r.gasto.fecha),Oe(2),Ut("ngIf",r.gasto.id))},dependencies:[Ai,bp,Tp,Sp,Si,fC,xa,Ma,Cp,ol,Hs,sl,In,ui,oh]})};var zP=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"*",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:Rp},{path:"categorias",component:fp},{path:"categoria",component:Mp},{path:"gasto",component:Pp}];var WP={providers:[uA(zP),t0({eventCoalescing:!0}),UA(()=>jA({apiKey:"AIzaSyA7_Fnv7X3seinZoTSRhRtml-uU9HAINP8",authDomain:"gastos-app-pro.firebaseapp.com",databaseURL:"https://gastos-app-pro-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gastos-app-pro",storageBucket:"gastos-app-pro.firebasestorage.app",messagingSenderId:"546541408657",appId:"1:546541408657:web:464ad9f7fc318d202eca30",measurementId:"G-PH8D3G82SV"})),NR(()=>MR()),RM(()=>NM()),wP(()=>EP())]};var kp=class n{title="Aplicacion para gastos con Angular";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Zt({type:n,selectors:[["app-root"]],standalone:!0,features:[tn],decls:1,vars:0,template:function(t,r){t&1&&Ji(0,"router-outlet")},dependencies:[g_,Ai,In]})};T0(kp,WP).catch(n=>console.error(n));
